function animateGearWheel(){gearWheelWithText=$(".gearWheelText"),gearWheelWithOut=$(".gearWheelWithOut"),gearWheelWithOut.each(function(){$(this).parent().on("mouseenter",function(){gearWheelWithText.fadeIn("slow",function(){})}),$(this).parent().on("mouseleave",function(){gearWheelWithText.fadeOut("slow",function(){})})})}function setStoererPosition(){stoererWrapper=$(".taubenheimStoererHeaderWrapper"),container=$("#mbc-main-container"),section=stoererWrapper.next($("section")),stoererWidth=stoererWrapper.find(".taubenheimGearWheel").width(),stoererHeight=stoererWrapper.find(".taubenheimGearWheel").height(),stoererLeft=section.width()-stoererWidth-10,stoererTop=section.find("img").height()-stoererHeight/2-50,stoererWrapper.css("left",stoererLeft),stoererWrapper.css("top",stoererTop)}function getRightTaubenheimArticleHeight(){container=$(".taubenheimArticleWrapper"),container.find("ul.mbc-slider-container li").each(function(){var height=0;$(this).each(function(){console.log($(this)),$(this).height()>=height&&(height=$(this).height())}),$(this).each(function(){$(this).css("height",height)})})}function getRightTaubenheimArticleWidth(){$(".taubenheimRow").each(function(){count=$(this).children().length,1==count?$(this).children().css("display","initial"):2==count&&$(this).append('<div class="taubenheimArticle"></div>')})}function setRightTextIntdent(){container=$(".taubenheimArticleWrapper"),$(container).find(".taubenheimHeadline h3").each(function(){console.log($(this).parent().parent(".taubenheimHeadlineWrapper")),($(this).parent().parent(".taubenheimHeadlineWrapper").next().hasClass("mbc-article-text")||$(this).parent().parent(".taubenheimHeadlineWrapper").next().hasClass("mbc-article-text-image-right"))&&(0==$(this).parent().parent(".taubenheimHeadlineWrapper").next().children().children(".mbc-column-content-text-1").hasClass("mbc-column-5-padding-left")&&$(this).parent().parent(".taubenheimHeadlineWrapper").next().children().children(".mbc-column-content-text-1").css("text-indent","25px"),$(this).parent().parent(".taubenheimHeadlineWrapper").next().children().children(".mbc-column-content-text").children("p").css("text-indent","25px"))}),$(container).find(".mbc-article-section-header").each(function(){console.log($(this).parent().hasClass("taubenheimHeadline")),0==$(this).parent().hasClass("taubenheimHeadline")&&($(this).next("p").css("text-indent","25px"),$(this).css("font-size","28px"))})}if(!jQuery)throw new Error("Error: Application requires jQuery.");var createProject=function(params){if("undefined"!=typeof window[params.sProjectname])throw new Error("Necessary namespace already defined.");return window[params.sProjectname]={__className:params.sProjectname||"",__language:params.sLanguage||"",__version:params.sVersion||"",__vendor:params.sVendor||"",__vendorWebsite:params.sVendorWebsite||""}},wpmbcom=new createProject({sProjectname:"mb_com",sVersion:"0.1",sVendor:"SCHOLZ & VOLKMER GmbH",sVendorWebsite:"www.s-v.de"});wpmbcom.core={config:{defaults:{debug:!1,debugLevel:"TRACE",timestamp:(new Date).getTime(),pagePreload:!0},noSupportUserAgents:{Firefox:[1,2,3,3.6,4,5,6,7,8,9],Explorer:[1,2,3,3.6,4,5,6,7],Safari:[1,2,3,4]},language:{defaultLanguage:"en",coreLanguages:["de","en"]}},setBrowserBehavior:function(){$("img").on("mousedown",function(e){return e||(e=window.event),e.returnValue=!1,e.preventDefault&&e.preventDefault(),!1}),Modernizr.touch&&(FastClick.attach(document.body),$(".mbc-hover").removeClass("mbc-hover"))},$imageList:$('[data-funct="images"]'),loadedImages:0,checkImageState:function(){var r=!1;return wpmbcom.core.$imageList.each(function(){var $this=$(this);$this.data("loaded")&&!$this.data("noticed")&&($this.data("noticed",!0),wpmbcom.core.loadedImages+=1)}),wpmbcom.core.loadedImages===wpmbcom.core.$imageList.length&&(r=!0),r},setupResponsiveImages:function(){return $.Deferred(function(dfd){var interval=window.setInterval(function(){wpmbcom.core.checkImageState()&&(window.clearInterval(interval),dfd.resolve())},200)}).promise()},loadYouTubeAPI:function(){window.onYouTubeIframeAPIReady=function(){$(window).trigger("mbc_onYouTubeAPIReady"),$(window).trigger("tracking:clear")};var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)},setGlobalVars:function(){return $.Deferred(function(dfd){$$GLOBAL_VAR={$body:$("body"),$document:$(document),$window:$(window),$preloader:$(".mbc-preloader"),device:wpmbcom.helper.browser.device(),touch:Modernizr.touch,orientation:$(window).width()>$(window).height()?"landscape":"portrait",retina:window.devicePixelRatio>1},dfd.resolve()}).promise()},convertStringToObject:function(oOptionString){var oOptions={};if(oOptionString&&""!==oOptionString&&null!==oOptionString)for(var arr=oOptionString.replace(/\'/g,'"').split(","),i=0;i<arr.length;i++){var option=arr[i].replace(/:/,"$:$").split("$:$"),key=option[0].replace(/"/g,"").replace(/ /g,"");value=$.parseJSON(option[1]),oOptions[key]=value}return oOptions},bindWindowLoad:function(){return $.Deferred(function(dfd){$$GLOBAL_VAR.$window.load(function(){window._loaded=!0}),dfd.resolve()}).promise()},windowLoad:function(){return $.Deferred(function(dfd){var interval=window.setInterval(function(){window._loaded&&(window.clearInterval(interval),dfd.resolve())},200)}).promise()},bindResizeEndEvent:function(){return $.Deferred(function(dfd){var start=!0,endTimer=null;$(window).on("resize",function(){start&&(start=!1,$(window).trigger("resizestart")),$$GLOBAL_VAR.device!==wpmbcom.helper.browser.device()&&($$GLOBAL_VAR.device=wpmbcom.helper.browser.device(),setTimeout(function(){$(window).trigger("devicechange")},40)),clearTimeout(endTimer),endTimer=setTimeout(function(){start=!0,setTimeout(function(){$(window).trigger("resizeend")},50)},650)}),dfd.resolve()}).promise()},setup:function(){var options={aGlobalVars:["html","head","body","#mbc-main-container","#mbc-header","#mbc-main-footer","#preloader"]};return window.wpmbcom.Plugin||(window.wpmbcom.Plugin=[]),$.Deferred(function(dfd){$.when(wpmbcom.core.setGlobalVars(),wpmbcom.helper.createGlobalVars(options.aGlobalVars),wpmbcom.core.bindWindowLoad(),wpmbcom.helper.setup(),wpmbcom.helper.browser.init()).done(function(){$.when(wpmbcom.plugins.setup(),wpmbcom.core.setupResponsiveImages(),wpmbcom.core.bindResizeEndEvent(),wpmbcom.core.setBrowserBehavior()).done(function(){var browser=wpmbcom.helper.browser.type+wpmbcom.helper.browser.version;"undefined"!=typeof wpmbcom.helper[browser]&&wpmbcom.helper[browser].setup(),$("html").addClass(wpmbcom.helper.browser.type),$("html").addClass(browser),$("html").addClass($$GLOBAL_VAR.device),dfd.resolve()}).fail(function(){wpmbcom.log.ERROR("wpmbcom.core.setup say: NOT READY"),dfd.reject()})})}).promise()}},wpmbcom.initialize=function(){wpmbcom.core.loadYouTubeAPI(),wpmbcom.helper.preloader.show(),$.when(wpmbcom.log.setup(),wpmbcom.core.setup(),wpmbcom.core.windowLoad()).done(function(){$__WINDOW__.trigger("site:ready")}).fail(function(){$__WINDOW__.trigger("site:notready")}).always(function(){window.config.isF015||window.config.isNext||window.config.isIAA||0!==window.config.sliderCount||wpmbcom.helper.preloader.hide(),window.config.sliderCount>1&&setTimeout(function(){wpmbcom.helper.preloader.isShowing&&wpmbcom.helper.preloader.hide()},15e3)}),setTimeout(function(){window.config.isF015||window.config.isNext||window.config.isIAA||wpmbcom.helper.preloader.isShowing&&wpmbcom.helper.preloader.hide()},2e3)},jQuery(document).on("ready",wpmbcom.initialize),wpmbcom.helper={browser:{isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)?!0:!1},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?!0:!1},any:function(){return wpmbcom.core.browser.isMobile.Android()||wpmbcom.core.browser.isMobile.BlackBerry()||wpmbcom.core.browser.isMobile.iOS()||wpmbcom.core.browser.isMobile.Windows()}},device:function(){return Modernizr.mq("only screen and (max-device-width: 767px), (-ms-high-contrast: active) and (max-device-width: 768px), (-ms-high-contrast: none) and (max-device-width: 768px)")?"mobile":Modernizr.mq("screen and (max-width: 767px)")?"mobile":Modernizr.mq("only screen and (min-width: 768px) and (max-width: 1024px)")?"tablet":Modernizr.mq("only screen and (min-width: 1280px)")?"desktop_big":"desktop"},init:function(){this.type=this.searchString(this.dataBrowser),this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion),this.id=this.type+this.version,this.OS=this.searchString(this.dataOS),this.client=this.type+this.version},searchString:function(aData){for(var i=0;i<aData.length;i++){var dataString=aData[i].string,dataProp=aData[i].prop;if(this.versionSearchString=aData[i].versionSearch||aData[i].identity,dataString&&-1!==dataString.indexOf(aData[i].subString))return aData[i].identity;if(dataProp)return aData[i].identity}},searchVersion:function(sData){var index=sData.indexOf(this.versionSearchString);if(-1!==index)return parseFloat(sData.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Nexus",identity:"Android",versionSearch:"Android"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},utils:{requestFullscreen:function(node){node.requestFullscreen?node.requestFullscreen():node.webkitRequestFullscreen?node.webkitRequestFullscreen():node.mozRequestFullScreen?node.mozRequestFullScreen():node.msRequestFullscreen&&node.msRequestFullscreen()},bindFullscreen:function(fnHandler){$__DOCUMENT__.on("fullscreenchange",fnHandler),$__DOCUMENT__.on("webkitfullscreenchange",fnHandler),$__DOCUMENT__.on("mozfullscreenchange",fnHandler),$__DOCUMENT__.on("MSFullscreenChange",fnHandler)},unbindFullscreen:function(fnHandler){$__DOCUMENT__.off("fullscreenchange",fnHandler),$__DOCUMENT__.off("webkitfullscreenchange",fnHandler),$__DOCUMENT__.off("mozfullscreenchange",fnHandler),$__DOCUMENT__.off("MSFullscreenChange",fnHandler)},isFullscreen:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?!0:!1},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},createGlobalVars:function(vars){return $.Deferred(function(dfd){if(window.$__WINDOW__=window.$__WINDOW__?window.$__WINDOW__:jQuery(window),window.$__DOCUMENT__=window.$__DOCUMENT__?window.$__DOCUMENT__:jQuery(document),"object"==typeof vars)for(var length=vars.length,i=0;length>i;i++)window["$__"+vars[i].replaceAll("#","").replaceAll(".","").replaceAll(" ","_").replaceAll("-","").toUpperCase()+"__"]=jQuery(vars[i]),i+1===length&&dfd.resolve();else"string"==typeof vars&&(window["$__"+vars.replaceAll("#","").replaceAll(".","").replaceAll(" ","_").replaceAll("-","").toUpperCase()+"__"]=jQuery(vars),dfd.resolve())}).promise()},getUniqueId:function(){return Math.random().toString(36).substr(2,9)},preloader:{$el:$("#mbc-preloader"),$loader:$("#mbc-preloader-img"),pos:0,step:1,sPos:"",STEPS:12,isShowing:!1,hide:function(){TweenMax.to(this.$el,.8,{alpha:0,ease:Sine.easeOut,onComplete:this.onHideComplete,onCompleteScope:this})},show:function(showBackground){this.isShowing||(showBackground?(this.$el.css({opacity:"1",display:"block"}),this.$el.addClass("mbc-content-preloader"),this.run(),this.isShowing=!0):(this.$el.css({opacity:"1",display:"block"}),this.$el.removeClass("mbc-content-preloader"),this.run(),this.isShowing=!0))},run:function(){this.step<this.STEPS?(this.pos-=50,this.step++):(this.pos=0,this.step=1),this.sPos=this.pos+"px 0px",this.$loader.css({backgroundPosition:this.sPos}),TweenMax.delayedCall(.1,this.run,null,this)},onHideComplete:function(){this.stop(),this.$el.css({display:"none"}),this.isShowing=!1,$__WINDOW__.trigger("mbc-preload-complete")},stop:function(){TweenMax.killDelayedCallsTo(this.run)}},string:{appendZero:function(sNumber,iLength){iLength=iLength||2,sNumber+="";for(var j=0;sNumber.length<iLength;j++)sNumber="0"+sNumber;return sNumber},slugify:function(sString){var slug=sString;return slug=slug.toLowerCase().replace(/\s+/g,"-").replace(/ä/g,"a").replace(/á/g,"a").replace(/ö/g,"o").replace(/ü/g,"u").replace(/ß/g,"ss").replace(/é/g,"e").replace(/'/g,"").replace(/"/g,"")},hash:function(iLength){var result=[];for(strLength=iLength+1||6,charSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";--strLength;)result.push(charSet.charAt(Math.floor(Math.random()*charSet.length)));return result.join("")},deparam:function(params,coerce){var obj={},coerce_types={"true":!0,"false":!1,"null":null};return jQuery.each(params.replace("+"," ").split("&"),function(j,v){var val,param=v.split("="),key=decodeURIComponent(param[0]),cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])?(keys[keys_last]=keys[keys_last].replace(/\]$/,""),keys=keys.shift().split("[").concat(keys),keys_last=keys.length-1):keys_last=0,2===param.length)if(val=decodeURIComponent(param[1]),coerce&&(val=val&&!isNaN(val)?+val:"undefined"===val?void 0:void 0!==coerce_types[val]?coerce_types[val]:val),keys_last)for(;keys_last>=i;i++)key=""===keys[i]?cur.length:keys[i],cur=cur[key]=keys_last>i?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;else $.isArray(obj[key])?obj[key].push(val):void 0!==obj[key]?obj[key]=[obj[key],val]:obj[key]=val;else key&&(obj[key]=coerce?void 0:"")}),obj},cut:function(sText,iLength){if(sText.length>iLength){for(;0!==" .,".indexOf(sText[iLength]);iLength--);return sText.substr(0,iLength)+"…"}return sText}},array:{contains:function(aArray,sString){for(var i=0;i<aArray.length;i++)if(aArray[i]===sString)return!0;return!1},filterByData:function(aArray,sString,bValue){for(var i=0;i<aArray.length;i++){var $obj=$(aArray[i]);if($obj.data(sString)===bValue)return $obj}return!1},removeElement:function(aArray,bFirst,sLast){var a=aArray,lastArrayElement=a.length-1;return"last"!==sLast?(lastArrayElement=a[lastArrayElement],lastArrayElement===sLast&&a.splice(a.indexOf(sLast),1)):a.splice(lastArrayElement,1),bFirst&&(a=a.slice(1)),a}},type:{of:function(oObject,sString){return void 0!==sString?Object.prototype.toString.call(oObject)==="[object "+sString+"]"?!0:!1:Object.prototype.toString.call(oObject)}},url:{isDeeplink:function(){var hash=window.location.hash;return hash.split("/").length>1?!0:!1}},cookie:{read:function(sName){for(var nameEQ=sName+"=",ca=document.cookie.split(";"),value=null,i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);0===c.indexOf(nameEQ)&&(value=c.substring(nameEQ.length,c.length))}return value},write:function(sName,sValue,iExpires){var expires="";if(sValue=sValue||"",iExpires){var date=new Date;date.setTime(date.getTime()+24*iExpires*60*60*1e3),expires="; expires="+date.toGMTString()}document.cookie=sName+"="+sValue+expires+"; path=/"},clear:function(sName){wpmbcom.helper.cookie.write(sName,"",-1)}},json:{decode:function(sString){var json=$.parseJSON(sString);return json}},setup:function(){return $.Deferred(function(dfd){dfd.resolve()}).promise()},preventDefaultLinkEvent:function(e){e.preventDefault()}},Array.prototype.indexOf||(Array.prototype.indexOf=function(obj,start){for(var i=start||0,j=this.length;j>i;i++)if(this[i]===obj)return i;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Number.prototype.between=function(a,b){return b>a?this>=a&&b>=this:this>=b&&a>=this},Number.prototype.greaterThenRange=function(a,b){return b>a?a>=this||this>=b:b>=this&&this>=a},Number.prototype.numberFormat=function(decimals,dec_point,thousands_sep){dec_point="undefined"!=typeof dec_point?dec_point:".",thousands_sep="undefined"!=typeof thousands_sep?thousands_sep:",";var parts=this.toFixed(decimals).toString().split(".");return parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,thousands_sep),parts.join(dec_point)},String.prototype.replaceAll=function(token,newToken,ignoreCase){var _token,str=this+"",i=-1;if("string"==typeof token){if(!ignoreCase)return this.split(token).join(newToken);for(_token=token.toLowerCase();-1!==(i=str.toLowerCase().indexOf(token,i>=0?i+newToken.length:0));)str=str.substring(0,i)+newToken+str.substring(i+token.length)}return str},$.extend({getUrlVars:function(){for(var hash,vars=[],hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<hashes.length;i++)hash=hashes[i].split("="),vars.push(hash[0]),vars[hash[0]]=hash[1];return vars},getUrlVar:function(name){return $.getUrlVars()[name]}}),window.console||(console={},console.log=function(){}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}(),wpmbcom.log={sCurrentLevel:"OFF",TRACE:function(aParams){"string"==typeof aParams&&(aParams=aParams.split()),wpmbcom.log.log.out(wpmbcom.log.level.TRACE,aParams)},DEBUG:function(aParams){"string"==typeof aParams&&(aParams=aParams.split()),wpmbcom.log.log.out(wpmbcom.log.level.DEBUG,aParams)},INFO:function(aParams){"string"==typeof aParams&&(aParams=aParams.split()),wpmbcom.log.log.out(wpmbcom.log.level.INFO,aParams)},WARN:function(aParams){"string"==typeof aParams&&(aParams=aParams.split()),wpmbcom.log.log.out(wpmbcom.log.level.WARN,aParams)},ERROR:function(aParams){"string"==typeof aParams&&(aParams=aParams.split()),wpmbcom.log.log.out(wpmbcom.log.level.ERROR,aParams)},level:{create:function(iLevel,sName){this.level=iLevel,this.name=sName},get:function(){return wpmbcom.log.level[wpmbcom.log.sCurrentLevel]},set:function(sLevelName){wpmbcom.log.sCurrentLevel=sLevelName},isGreaterOrEquals:function(iLevel){return iLevel.level>=wpmbcom.log.level.get().level}},log:{out:function(oLevel,aParams){var name=oLevel.name.toLowerCase()||"info";if(wpmbcom.log.log.isAvailable(name)&&wpmbcom.log.level.isGreaterOrEquals(oLevel)){var logger=window.console[name];logger.apply(console,aParams)}},isAvailable:function(sName){return"undefined"!=typeof window.console&&"undefined"!=typeof window.console[sName]&&"undefined"!=typeof window.console[sName].apply}},setup:function(){return $.Deferred(function(dfd){wpmbcom.core.config.defaults.hasOwnProperty("debug")&&wpmbcom.core.config.defaults.debug&&wpmbcom.core.config.defaults.hasOwnProperty("debugLevel")&&wpmbcom.log.level.set(wpmbcom.core.config.defaults.debugLevel),wpmbcom.log.level.ALL=new wpmbcom.log.level.create(Number.MIN_VALUE,"ALL"),wpmbcom.log.level.TRACE=new wpmbcom.log.level.create(1e4,"TRACE"),wpmbcom.log.level.INFO=new wpmbcom.log.level.create(2e4,"INFO"),wpmbcom.log.level.DEBUG=new wpmbcom.log.level.create(3e4,"DEBUG"),wpmbcom.log.level.WARN=new wpmbcom.log.level.create(4e4,"WARN"),wpmbcom.log.level.ERROR=new wpmbcom.log.level.create(5e4,"ERROR"),wpmbcom.log.level.OFF=new wpmbcom.log.level.create(Number.MAX_VALUE,"OFF"),dfd.resolve()}).promise()}};var Plugin=function(){return this.init=function(oElement,oOptions,sName,sUniqueId){return this.element=$(oElement).get(0),this.$element=$(oElement),this.options=$.extend(!0,this.defaults,oOptions),this.options.sRoot=this.$element?this.$element:"",this.options.sUniqueId=sUniqueId?sUniqueId:"",this.sPluginName=sName,this.setup(sName+"_"+this.options.sUniqueId),"undefined"!=typeof this.onorientationchange&&$(window).on("orientationchange",this.onorientationchange),"undefined"!=typeof this.ondevicechange&&$(window).on("devicechange",this.ondevicechange),"undefined"!=typeof this.onresizestart&&$(window).on("resizestart",this.onresizestart),"undefined"!=typeof this.onresize&&$(window).on("resize",this.onresize),"undefined"!=typeof this.onresizeend&&$(window).on("resizeend",this.onresizeend),this},this.destroy=function(){this.$element&&(this.$element.removeData("plugin"),this.$element.removeAttr("data-api-"+this.sPluginName+"-id")),this.options.sRoot&&("string"==typeof this.options.sRoot?$(this.options.sRoot).find("*").off():this.options.sRoot.find("*").off())},this.reInit=function(){this.options.restricted?wpmbcom.helper.array.contains(this.options.restricted,"reinit")||(this.destroy(),this.init(this.element,this.options,this.sPluginName,this.sUniqueId)):(this.destroy(),this.init(this.element,this.options,this.sPluginName,this.sUniqueId))},this.setup=function(name){wpmbcom.log.ERROR("Missing setup method for plugin "+name+".")},this};wpmbcom.plugins={aRegisteredPlugins:[],aLoadedPlugins:[],aAllowedPluginsInEditMode:[],nonDomPlugins:[],pluginsToInit:[],pluginsToInitWaitFor:[],waitForMaxLoopCount:2,waitForLoopCount:{},call:function(oElement,sName,oOptions){return $.Deferred(function(dfd){if(sName){var storageName="plugin-"+sName,constructorName=sName.charAt(0).toUpperCase()+sName.slice(1).replace(/-/g,"").replace(/_/g,""),__constructor=window[constructorName],plugin=null;if(oOptions.aWaitFor&&__constructor)for(var i=0;i<oOptions.aWaitFor.length;i++)for(var bRequiredPluginLoaded=!1,j=0;j<wpmbcom.plugins.aRegisteredPlugins.length;j++)if(wpmbcom.plugins.aRegisteredPlugins[j].indexOf(oOptions.aWaitFor[i])>-1&&(bRequiredPluginLoaded=!0),j===wpmbcom.plugins.aRegisteredPlugins.length-1&&!bRequiredPluginLoaded&&(!wpmbcom.plugins.waitForLoopCount[sName]||wpmbcom.plugins.waitForLoopCount[sName]<=wpmbcom.plugins.waitForMaxLoopCount))for(var k=0;k<wpmbcom.plugins.pluginsToInit.length;k++)if(wpmbcom.plugins.pluginsToInit[k][0]===sName){var index=$.inArray(sName+"_"+wpmbcom.plugins.sPluginUniqueId,wpmbcom.plugins.aRegisteredPlugins);return index>-1&&wpmbcom.plugins.aRegisteredPlugins.splice(index,1),wpmbcom.plugins.pluginsToInitWaitFor.push(new Array(sName,oElement)),wpmbcom.plugins.waitForLoopCount[sName]?wpmbcom.plugins.waitForLoopCount[sName]=wpmbcom.plugins.waitForLoopCount[sName]+1:wpmbcom.plugins.waitForLoopCount[sName]=1,void dfd.reject("CAN't CALL BECAUSE JS PLUGIN HAVE TO WAIT FOR PLUGIN "+oOptions.aWaitFor[i])}__constructor?(__constructor.prototype=new Plugin,__constructor.prototype.constructor=__constructor,plugin=new __constructor(oElement,oOptions),plugin=plugin.init(oElement,oOptions,sName,wpmbcom.plugins.sPluginUniqueId),oElement&&oElement.each(function(){$.data(oElement,storageName)||oElement.data(storageName,plugin),oElement.attr("data-api-"+sName.toLowerCase()+"-id")||oElement.attr("data-api-"+sName.toLowerCase()+"-id",wpmbcom.plugins.sPluginUniqueId)}),window.wpmbcom.Plugin[sName+"_"+wpmbcom.plugins.sPluginUniqueId]=plugin,dfd.resolve("CALL SUCCESSFUL")):wpmbcom.log.ERROR('Missing plugin "'+constructorName+'". Call failed.')}}).promise()},reInit:function(sName){var sName=sName?sName:!1;if(iPluginsCount=wpmbcom.plugins.aRegisteredPlugins.length,sName)window.wpmbcom.Plugin[sName].reInit();else for(var i=0;i<iPluginsCount;i++)window.wpmbcom.Plugin[wpmbcom.plugins.aRegisteredPlugins[i]].reInit()},register:function(sName){return $.Deferred(function(dfd){("register"===sName||"init"===sName||"reInit"===sName||"destroy"===sName||"setup"===sName)&&(wpmbcom.log("The name '"+sName+"' is reserved for the application. Please choose another one."),dfd.reject("CAN't REGISTER BECAUSE RESERVED NAMESPACE")),window[sName]?wpmbcom.helper.array.contains(wpmbcom.plugins.aRegisteredPlugins,sName+"_"+wpmbcom.plugins.sPluginUniqueId)?dfd.resolve("ALREADY REGISTERED"):(wpmbcom.plugins.aRegisteredPlugins.push(sName+"_"+wpmbcom.plugins.sPluginUniqueId),dfd.resolve("REGISTERED")):dfd.reject("CAN't REGISTER BECAUSE JS PLUGIN NOT EXIST")}).promise()},initPlugin:function(oElement,sName){var $this=oElement?$(oElement):null,restricted=oElement?$this.attr("data-funct-restricted")||!1:!1,denied=oElement?$this.attr("data-funct-client-denied")||!1:!1,enabled=!0,reallyEnabled=!0;wpmbcom.plugins.sPluginUniqueId=wpmbcom.helper.getUniqueId(),wpmbcom.helper.type.of(restricted,"String")&&enabled?(restricted=restricted.replace(/ /g,"").split(","),reallyEnabled=wpmbcom.helper.array.contains(restricted,$$GLOBAL_VAR.device)):reallyEnabled=!wpmbcom.helper.type.of(restricted,"String")&&enabled?!0:!1,wpmbcom.helper.type.of(denied,"String")&&reallyEnabled&&(denied=denied.replace(/ /g,"").split(","),reallyEnabled=!wpmbcom.helper.array.contains(denied,wpmbcom.helper.browser.client)),reallyEnabled&&$.when(wpmbcom.plugins.register(sName)).done(function(sStatus){wpmbcom.log.INFO(["wpmbcom.plugins.setup say: PLUGIN",'"'+sName+"_"+wpmbcom.plugins.sPluginUniqueId+'"',sStatus]),$.when(wpmbcom.plugins.initialize($this,sName)).done(function(){wpmbcom.log.INFO(["wpmbcom.plugins.setup say: PLUGIN",'"'+sName+"_"+wpmbcom.plugins.sPluginUniqueId+'"',"INITIALIZED"]),wpmbcom.plugins.aLoadedPlugins.push({Plugin:sName+"_"+wpmbcom.plugins.sPluginUniqueId,Element:$this?$this.context:null})}).fail(function(sStatus){wpmbcom.log.ERROR(["wpmbcom.plugins.setup say: PLUGIN",'"'+sName+"_"+wpmbcom.plugins.sPluginUniqueId+'"',"INITIALIZATION FAILED - ",sStatus])})}).fail(function(sStatus){wpmbcom.log.ERROR(["wpmbcom.plugins.setup say: PLUGIN",'"'+sName+"_"+wpmbcom.plugins.sPluginUniqueId+'"',"REGISTRATION FAILED","\n	Error message:",sStatus])})},setup:function(){return $.Deferred(function(dfd){if($__HTML__.hasClass("no-support"))dfd.resolve(),wpmbcom.log.INFO(["wpmbcom.plugins.setup say: ABORT BECAUSE NO-SUPPORT"]);else{var $sSelector=$("[data-funct]");"undefined"!=typeof window.wpmbcom.Plugin&&(window.wpmbcom.Plugin=[]),$sSelector.each(function(){for(var dataFunctString=$(this).attr("data-funct").toString(),parts=dataFunctString.indexOf(" ")>-1?dataFunctString.split(" "):new Array(dataFunctString),k=0;k<parts.length;k++)wpmbcom.plugins.pluginsToInit.push(new Array(parts[k],$(this)))});for(var i=0;i<wpmbcom.plugins.nonDomPlugins.length;i++)wpmbcom.plugins.pluginsToInit.push(new Array(wpmbcom.plugins.nonDomPlugins[i],null));for(var j=0;j<wpmbcom.plugins.pluginsToInit.length;j++)if(wpmbcom.plugins.initPlugin(wpmbcom.plugins.pluginsToInit[j][1],wpmbcom.plugins.pluginsToInit[j][0]),j===wpmbcom.plugins.pluginsToInit.length-1)for(var k=0;k<wpmbcom.plugins.pluginsToInitWaitFor.length;k++)wpmbcom.plugins.initPlugin(wpmbcom.plugins.pluginsToInitWaitFor[k][1],wpmbcom.plugins.pluginsToInitWaitFor[k][0]);dfd.resolve(),wpmbcom.log.INFO(["wpmbcom.plugins.setup say: READY","\n	Registered plugins",wpmbcom.plugins.aRegisteredPlugins,"\n	Loaded plugins",wpmbcom.plugins.aLoadedPlugins])}}).promise()},initialize:function(oElement,sName){return $.Deferred(function(dfd){var f=sName,o=oElement?oElement.attr("data-funct-options-"+f.toLowerCase())||"":"";o?(o=o.replace(/\'/g,'"'),o=$.parseJSON(o)):o={},$.when(wpmbcom.plugins.call(oElement,f,o)).done(function(){dfd.resolve()}).fail(function(sStatus){dfd.reject(sStatus)})}).promise()}},function(window,$,Helper){"use strict";window.Cookie=function(){var self=this;return self.defaults={clickEvent:Modernizr.touch?"touchend":"click",cookieSeenName:"c_disclaimer",cookieModifiedName:"c_disclaimer_modified"},self.setup=function(){if(!$("html").hasClass("jp")){if(self.lastModified=$.cookie(self.options.cookieModifiedName),self.seen=$.cookie(self.options.cookieSeenName)+"",self.lastModified?self.lastModified=$.parseJSON(self.lastModified):self.lastModified={},!self.lastModified[config.lang]||self.lastModified[config.lang]!==config.cookieModified){self.lastModified[config.lang]=config.cookieModified,$.cookie(self.options.cookieModifiedName,JSON.stringify(self.lastModified),{path:"/",expires:365});var rx=new RegExp(","+config.lang+"_INT|"+config.lang+"_INT,|"+config.lang+"_INT","g");self.seen=self.seen.replace(rx,""),self.seen?$.cookie(self.options.cookieSeenName,self.seen,{path:"/",expires:365}):$.removeCookie(self.options.cookieSeenName,{path:"/"})}if("undefined"!=typeof Helper){Helper.bindSignal(document,"c:layer:show:cookies",function(){Helper.triggerSignal(document,"c:layer:hide",{notice:!0}),$__WINDOW__.trigger("mbc-meta-open-show-cookies")});var timer=setInterval(function(){0!=$("#cLayerClose").length&&($("#cLayerClose").on(self.options.clickEvent,function(e){$.cookie(self.options.cookieSeenName)||$__HTML__.hasClass("Explorer8")&&setTimeout(function(){$("#cLayer").remove(),$.cookie(self.options.cookieSeenName)||(document.cookie=self.options.cookieSeenName+"="+config.lang+"_INT"),$__WINDOW__.trigger("c_layer_ie_close")},300)}),$("#cLayer").on(self.options.clickEvent,function(e){$.cookie(self.options.cookieSeenName)||$__HTML__.hasClass("Explorer8")&&setTimeout(function(){$("#cLayer").remove(),$.cookie(self.options.cookieSeenName)||(document.cookie=self.options.cookieSeenName+"="+config.lang+"_INT")},300)}),clearInterval(timer))},100);$(window).on("tracking:clear",function(){clearInterval(timer)})}}},this},wpmbcom.plugins.nonDomPlugins.push("Cookie")}(this.window,this.jQuery,this.Helper),function(window,Application,Helper){"use strict";window.Psyma=function(){var self=this;return this.defaults={scriptPath:"//scripts.psyma.com/scripts/auto.com/auto_com_mercedes_"+config.lang+".php"},this.insertScript=function(){self.$element.append('<script type="text/javascript" src="'+self.options.scriptPath+'"></script>')},this.setup=function(){$("html").hasClass("jp")||$("html").hasClass("hk")||(Application.disclaimerCookieExists()?self.insertScript():Helper.bindSignal(document,"c:layer:hide",self.insertScript))},this}}(this.window,this.Application,this.Helper),function(window,$){"use strict";window.Segmentation=function(){var $element;return this.defaults={key:"value",disable:!1},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setupTeaserMode=function(){var self=this;$element=this.$element,"UL"!=$element.prop("tagName")&&($element=$element.find("ul"));var score,uScore,cScore,teasers,$teaser,segments,$teasers=$element.find("li.mbc-teaser, li.mbc-slide"),maxUScore=0;$teasers.each(function(){$teaser=$(this),segments=$teaser.data("segmentation-segments"),"string"==typeof segments&&(segments=""==segments?[]:segments.split(","),$teaser.data("segmentation-segments",segments)),uScore=self.calculateElementCategoryScore(this,window.wpmbcomSegmentation.userSegmentationVO),cScore=0,window.wpmbcomSegmentation.contextSegmentationVO.segments.length>0&&(cScore=self.calculateElementCategoryScore(this,window.wpmbcomSegmentation.contextSegmentationVO)),score=uScore+cScore,$teaser.hasClass("mbc-teaser-first-item")&&(uScore=1e3,cScore=1e3,score=1e3),$teaser.data("segmentation-uscore",uScore),$teaser.data("segmentation-cscore",cScore),$teaser.data("segmentation-content-consumed",window.wpmbcomSegmentation.userSegmentationVO.contentConsumed.indexOf($teaser.data("segmentation-id"))>-1),
$teaser.data("segmentation-score",score),$teaser.data("segmentation-priority",segments.indexOf("segmentation-priority")>-1),uScore>maxUScore&&(maxUScore=uScore)}),window.wpmbcomSegmentation.contextSegmentationVO.segments.length>0&&$teasers.each(function(){$teaser=$(this),score=parseInt($teaser.data("segmentation-score")),uScore=parseInt($teaser.data("segmentation-uscore")),cScore=parseInt($teaser.data("segmentation-cscore")),cScore>0&&$teaser.data("segmentation-score",Math.max(uScore,maxUScore)+cScore)}),teasers=$teasers.get(),teasers.sort(self.sortByScoreDesc);var maxItems=parseInt($element.data("segmentation-maxitems"));maxItems>0&&$teasers.splice(maxItems).remove(),$element.append(teasers),self.$element.hasClass("mbc-large")&&self.$element.hasClass("mbc-large-teasers")},this.setup=function(){window.config.disableSegmentation!==!0&&(this.initialize(),"mbc-article"==this.$element.attr("id")?window.setTimeout(this.markPostAsRead.bind(this),1e4):this.setupTeaserMode())},this.getBlankSegmentationVO=function(){return{segments:{},contentConsumed:[],version:.1}},this.initialize=function(){void 0==window.wpmbcomSegmentation&&(window.wpmbcomSegmentation={userSegmentationVO:this.getUserSegmentationVO(),contextSegmentationVO:this.getContextSegmentationVO()})},this.getUserSegmentationVO=function(){var userSegmentationVO=null;return void 0!=window.localStorage&&(userSegmentationVO=window.localStorage.getItem("wpmbcomSegmentation")),(null==userSegmentationVO||void 0==userSegmentationVO)&&(userSegmentationVO=$.cookie("wpmbcomSegmentation")),null!=userSegmentationVO&&(userSegmentationVO=JSON.parse(userSegmentationVO)),(null==userSegmentationVO||void 0==userSegmentationVO)&&(userSegmentationVO=this.getBlankSegmentationVO()),userSegmentationVO},this.getContextSegmentationVO=function(){var contextSegmentationVO=this.getBlankSegmentationVO(),urlParameters=this.getURLParameter("c");if(void 0!=urlParameters){var count;for(urlParameters=urlParameters.replace(/[^a-zA-Z\-_,\.]/gi,"").split(","),count=0;count<urlParameters.length;++count)contextSegmentationVO.segments[urlParameters[count]]=1}return contextSegmentationVO},this.getURLParameter=function(sParam){for(var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&"),i=0;i<sURLVariables.length;i++){var sParameterName=sURLVariables[i].split("=");if(sParameterName[0]==sParam)return decodeURIComponent(sParameterName[1])}},this.sortByScoreDesc=function(el1,el2){var $element1=$(el1),$element2=$(el2),element1Prioritized=$element1.data("segmentation-priority"),element2Prioritized=$element2.data("segmentation-priority");if(element1Prioritized&&!element2Prioritized)return-1;if(element2Prioritized&&!element1Prioritized)return 1;var element1Score=$element1.data("segmentation-score"),element2Score=$element2.data("segmentation-score");if(element1Score>element2Score)return-1;if(element2Score>element1Score)return 1;var element1Segments=$element1.data("segmentation-segments"),element2Segments=$element2.data("segmentation-segments");return element1Segments.length>element2Segments.length?-1:element1Segments.length<element2Segments.length?1:0},this.calculateElementCategoryScore=function(element,segmentationVO){for(var $element=$(element),segmentationId=$element.data("segmentation-id"),elementSegments=$element.data("segmentation-segments"),score=0,matches=0,numSegments=elementSegments.length,i=0,len=elementSegments.length;len>i;i++)"segmentation-priority"!=elementSegments[i]?segmentationVO.segments.hasOwnProperty(elementSegments[i])&&(++matches,score+=segmentationVO.segments[elementSegments[i]]/3):numSegments--;return score*=matches,numSegments>0&&(score/=numSegments),segmentationVO.contentConsumed.indexOf(segmentationId)>-1&&(score*=.5),score},this.markPostAsRead=function(){var $element=this.$element,segmentationId=$element.data("segmentation-id"),segments=$element.data("segmentation-segments").split(",");null==segments&&(segments=[]);var userSegmentationVo=window.wpmbcomSegmentation.userSegmentationVO,contentConsumed=userSegmentationVo.contentConsumed.indexOf(segmentationId)>-1;if(!contentConsumed){userSegmentationVo.contentConsumed.push(segmentationId);for(var parentSegments=[],segmentsProcessed=[],segmentsToProcess=segments,scoreToApply=1,currentSegment=null;segmentsToProcess.length>0;){for(segmentsProcessed=[],parentSegments=[];segmentsToProcess.length>0;)currentSegment=segmentsToProcess.shift(),-1==jQuery.inArray(currentSegment,segmentsProcessed)&&(segmentsProcessed.push(currentSegment),userSegmentationVo.segments.hasOwnProperty(segments[i])?userSegmentationVo.segments[currentSegment]+=scoreToApply:userSegmentationVo.segments[currentSegment]=scoreToApply,null!=window.Segmentation.availableSegments[currentSegment]&&null!=window.Segmentation.availableSegments[window.Segmentation.availableSegments[currentSegment]]&&parentSegments.push(window.Segmentation.availableSegments[currentSegment]));segmentsToProcess=parentSegments,scoreToApply/=2}}this.updateSegmentationCookie()},this.updateSegmentationCookie=function(){for(;window.wpmbcomSegmentation.userSegmentationVO.contentConsumed.length>50;)window.wpmbcomSegmentation.userSegmentationVO.contentConsumed.shift();void 0!=window.localStorage?window.localStorage.setItem("wpmbcomSegmentation",JSON.stringify(window.wpmbcomSegmentation.userSegmentationVO)):$.cookie("wpmbcomSegmentation",JSON.stringify(window.wpmbcomSegmentation.userSegmentationVO),{expires:3650,path:"/"})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Parallax=function(){var options,self=this;return self.defaults={horizontalScrolling:!1,verticalOffset:0,horizontalOffset:0,responsive:!0,positionProperty:"transform",hideDistantElements:!1},self.setup=function(){options=self.options,Modernizr.touch||$(window).stellar(options)},self}}(this.window,this.jQuery),function(window,$){"use strict";window.TopSlider=function(){var element,$element,options,$slider,$mobileInfoContainer,$infoItems,isSingleItem,self=this;return this.videoIsPlaying=!1,this.videoSlides=[],this.defaults={key:"value",sliderPause:7e3,sliderSpeed:400},this.onresizestart=function(){try{isSingleItem||$slider.stopAuto()}catch(e){}},this.onresizeend=function(){try{self.videoIsPlaying||isSingleItem||$slider.startAuto()}catch(e){}},this.onresize=function(){},this.ondevicechange=function(){},this.buildTrackingInfo=function(init){var $el;$el=init&&1==init?self.$element.find(".mbc-info a").eq(self.$slider.getCurrentSlide()):self.$element.find(".mbc-info a").eq(self.$slider.getCurrentSlide()+1);var $trackingel=self.$element.find(".mbc-info a").eq(self.$slider.getCurrentSlide()),index=$.inArray($trackingel.data("analytics-teaser-content-id"),digitalData.teaser.content.id);-1!=index&&(digitalData.teaser.content.id.splice(index,1),digitalData.teaser.content.contentTitle.splice(index,1),digitalData.teaser.content.issueDate.splice(index,1),digitalData.teaser.content.primaryCategory.splice(index,1),digitalData.teaser.content.subCategory1.splice(index,1),digitalData.teaser.content.subCategory2.splice(index,1),digitalData.teaser.content.metaCategories.splice(index,1),digitalData.teaser.content.format.splice(index,1),digitalData.teaser.content.type.splice(index,1)),digitalData.teaser.content.id.push($el.data("analytics-teaser-content-id")),digitalData.teaser.content.contentTitle.push($el.data("analytics-teaser-content-contenttitle")),digitalData.teaser.content.issueDate.push($el.data("analytics-teaser-content-issuedate")),digitalData.teaser.content.primaryCategory.push($el.data("analytics-teaser-content-primarycategory")),digitalData.teaser.content.subCategory1.push($el.data("analytics-teaser-content-subcategory1")),digitalData.teaser.content.subCategory2.push($el.data("analytics-teaser-content-subcategory2")),digitalData.teaser.content.metaCategories.push($el.data("analytics-teaser-content-metacategories")),digitalData.teaser.content.format.push($el.data("analytics-teaser-content-format")),digitalData.teaser.content.type.push($el.data("analytics-teaser-content-type"))},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$mobileInfoContainer=$element.find(".mbc-slider-mobile-info"),"mobile"!=wpmbcom.helper.browser.device()&&($mobileInfoContainer.append($element.find(".mbc-info").clone(!0).addClass("mbc-hide-info")),$infoItems=$mobileInfoContainer.find(".mbc-info"),$infoItems.find("h2").addClass("mbc-white").removeClass("mbc-icon-headline-55x2").addClass("mbc-icon-headline-46x2"),$infoItems.find("a").removeClass("mbc-btn").addClass("mbc-white").addClass("mbc-arrow-link"),$infoItems.eq(0).removeClass("mbc-hide-info"),isSingleItem=$element.find(".mbc-top-slider-container .mbc-slide").length<=1?!0:!1,isSingleItem&&$element.addClass("mbc-single-item"),self.$slider=$element.find(".mbc-top-slider-container").bxSlider({auto:!isSingleItem,autoStart:!isSingleItem,autoHover:!1,pause:this.defaults.sliderPause,responsive:!0,speed:this.defaults.sliderSpeed,swipeThreshold:100,useCSS:!1,adaptiveHeight:!1,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,minSlides:1,maxSlides:1,slideWidth:0,pager:!0,pagerType:"full",infiniteLoop:!0,onSlideBefore:this.onSlideBefore,onSlideAfter:this.onSlideAfter,oneToOneTouch:!1}),"mobile"!==wpmbcom.helper.browser.device()&&isSingleItem&&($element.on("mouseenter",this.onMouseEnter),$element.on("mouseleave",this.onMouseLeave)),$(window).on("mbc_top_slider_video_play",$.proxy(this.onVideoStart,this)),$(window).on("mbc_top_slider_video_end",$.proxy(this.onVideoEnd,this)),$(window).on("mbc_top_slider_navigation_open",self.stopSlideshow),$(window).on("mbc_top_slider_navigation_close",self.startSlideshow),self.buildTrackingInfo(!0))},this.onVideoStart=function(){this.videoIsPlaying=!0,self.$slider.stopAuto()},this.onVideoEnd=function(){this.videoIsPlaying=!1},this.onSlideBefore=function($slideElement,oldIndex,newIndex){$infoItems.eq(oldIndex).addClass("mbc-hide-info"),$infoItems.eq(newIndex).removeClass("mbc-hide-info"),$(window).trigger("onTopSliderBeforeChange")},this.onSlideAfter=function($slideElement,oldIndex,newIndex){!Modernizr.touch||self.videoIsPlaying||isSingleItem||self.$slider.startAuto(),$(window).trigger("onTopSliderAfterChange"),self.buildTrackingInfo()},this.onMouseLeave=function(){self.videoIsPlaying||isSingleItem||self.$slider.startAuto()},this.onMouseEnter=function(){self.$slider.stopAuto()},this.startSlideshow=function(){self.$slider.startAuto()},this.stopSlideshow=function(){self.$slider.stopAuto()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.VideoTopSlide=function(){var element,$element,options,player,btnId,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){if(1==self.isPlaying){var height=Math.floor(self.$viewport.width()/1.777);TweenMax.to([self.$videoWrapper.parent(),self.$viewport],.5,{height:height})}else{var height=Math.floor(self.$videoWrapper.parent().width()/2.118);TweenMax.to([self.$videoWrapper.parent(),self.$viewport],.5,{height:height})}},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){return element=this.element,$element=this.$element,options=this.options,self.supportsInlineVideo()?(btnId=_.uniqueId(),$element.find(".mbc-btn").addClass("mbc-hide"),$element.find(".mbc-btn").data({"btn-id":btnId}),$element.find(".mbc-video-start-btn").data({"btn-id":btnId}),$element.find(".mbc-btn, .mbc-video-start-btn").on("click",function(e){e.preventDefault(),$(window).trigger("mbc_on_top_video_btn_clicked",{btnId:$(e.target).data("btn-id")})}),self.$videoWrapper=$element.find(".mbc-video-container"),self.isPlaying=!1,$element.find(".mbc-video-close-btn").on("click",self.onVideoCloseClicked),void $(window).on("mbc_onYouTubeAPIReady",this.onYouTubeAPIReady)):($element.find(".mbc-btn").attr("href","http://youtu.be/"+options.videoId),void $element.find(".mbc-btn").attr("target","_blank"))},this.supportsInlineVideo=function(){return!0},this.onVideoEvent=function(e){e.data===YT.PlayerState.ENDED?(self.showVideoStartImage(),self.destroyPlayer(),$(window).trigger("mbc_top_slider_video_end")):e.data===YT.PlayerState.PLAYING&&$(window).trigger("mbc_top_slider_video_play")},this.onPlayerReady=function(){player&&!Modernizr.touch&&player.playVideo(),self.isPlaying=!0;var height=Math.floor(self.$viewport.width()/1.777);TweenMax.to([self.$videoWrapper.parent(),self.$viewport],.5,{height:height})},this.onVideoCloseClicked=function(e){e.preventDefault(),player&&player.pauseVideo(),self.showVideoStartImage(),self.destroyPlayer(),$(window).trigger("mbc_top_slider_video_end");var height=Math.floor(self.$videoWrapper.parent().width()/2.118);TweenMax.to([self.$videoWrapper.parent(),self.$viewport],.5,{height:height}),self.isPlaying=!1},this.onYouTubeAPIReady=function(){$element.find(".mbc-btn").removeClass("mbc-hide"),$(window).on("mbc_on_top_video_btn_clicked",$.proxy(self.onVideoStartClicked,self)),$(window).on("onTopSliderAfterChange",self.onSliderChange)},this.onSliderChange=function(){player&&(player.stopVideo(),self.destroyPlayer(),$(window).trigger("mbc_top_slider_video_end")),self.showVideoStartImage()},this.destroyPlayer=function(){player&&($element.find(".mbc-video-container").hide(),player.destroy(),player=null);var height=Math.floor(self.$videoWrapper.parent().width()/2.118);TweenMax.to([self.$videoWrapper.parent(),self.$viewport],.5,{height:height}),self.isPlaying=!1},this.showVideoStartImage=function(){$element.find(".mbc-info").removeClass("mbc-hide-preview"),$element.find(".mbc-top-img").removeClass("mbc-hide-preview"),$element.find(".mbc-video-start-btn").removeClass("mbc-hide-preview")},this.hideVideoStartImage=function(){$element.find(".mbc-info").addClass("mbc-hide-preview"),$element.find(".mbc-top-img").addClass("mbc-hide-preview"),$element.find(".mbc-video-start-btn").addClass("mbc-hide-preview")},this.onVideoStartClicked=function(e,data){if(e.preventDefault(),data.btnId===btnId){self.$videoWrapper.show();var videoElement=$element.find(".mbc-video-placeholder").get(0);$(".mbc-top-slider .bx-viewport").length>=1?self.$viewport=$(".mbc-top-slider .bx-viewport"):self.$viewport=$(".mme-top-slider .bx-viewport"),player=new YT.Player(videoElement,{videoId:options.videoId,playerVars:{modestbranding:1,showinfo:0,WMode:"opaque",color:"white"},events:{onReady:self.onPlayerReady,onStateChange:self.onVideoEvent}}),TweenMax.delayedCall(.5,self.hideVideoStartImage),$(window).trigger("mbc_top_slider_video_play")}},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TeaserSlider=function(){this.TYPE_3_LARGE="3-large",this.TYPE_4_SMALL="4-small",this.TYPE_ALL="all";var element,$element,$item,options,self=this;return this.defaults={type:this.TYPE_3_LARGE,isLarge:0,isHome:0,number:null},this.onresizestart=function(){},this.onresizeend=function(){self.updateHeight()},this.onresize=function(){},this.ondevicechange=function(){self.updateHeight()},this.updateHeight=function(){if(self.options.type==self.TYPE_ALL)self.$slider.height("auto"),self.$sliderHeight=self.$slider.height();else{var itemHeight=self.$slider.find("li.mbc-teaser").first().outerHeight(!0);if(self.options.type!==self.TYPE_3_LARGE||1!==self.loadCounter&&0!==self.loadCounter||1!==self.options.isLarge||(itemHeight+=self.$slider.find("li.mbc-teaser").eq(1).outerHeight(!0)),1===self.loadCounter||0===self.loadCounter)self.$slider.height(itemHeight);else{var destHeight=itemHeight*(self.loadCounter+1);if(!self.isLoading){var $lastLoaded=$("li.mbc-teaser.loaded",self.$element).last();destHeight=$lastLoaded.position().top+$lastLoaded.outerHeight(!0)}TweenMax.to(self.$slider,.5,{height:destHeight,ease:Quad.easeOut})}self.options.number&&self.$slider.height(itemHeight*self.options.number/3),self.$sliderHeight=self.$slider.height()}},this.loadContent=function(type,number){var loadCount;type===self.TYPE_4_SMALL?self.isfirstItems?(self.isfirstItems=!1,loadCount=4):(loadCount=8,self.options.loadMoreCount&&(loadCount=self.options.loadMoreCount)):self.isfirstItems?(self.isfirstItems=!1,loadCount=1===self.options.isLarge?4:3):(loadCount=6,self.options.loadMoreCount&&(loadCount=self.options.loadMoreCount)),null!=number&&(loadCount=number),self.aImages=[],self.loadItems=self.loadItems+loadCount,console.log(self.loadItems);for(var i=self.loadItems-loadCount;i<self.loadItems;i++)void 0!=self.$slides.eq(i).data("img-src")?self.aImages.push(self.$slides.eq(i).data("img-src")):self.hideLoadMore();self.buildLoadingQue(self.aImages)},this.loadAllContent=function(){var loadCount=999999;self.aImages=[],self.loadItems=self.loadItems+loadCount;for(var i=self.loadItems-loadCount;i<self.loadItems;i++)void 0!=self.$slides.eq(i).data("img-src")&&self.aImages.push(self.$slides.eq(i).data("img-src"));self.buildLoadingQue(self.aImages)},this.buildLoadingQue=function(images){for(var preload=new createjs.LoadQueue(!1),i=0;i<images.length;i++)preload.loadFile(images[i]);self.isLoading=!0,self.loadCounter++,self.showLoading(),self.$loader||self.updateHeight(),preload.addEventListener("complete",self.imageLoadComplete),preload.load()},this.imageLoadComplete=function(e){self.hideLoading();var $item,factor,current="";factor=self.options.type===self.TYPE_4_SMALL?.05:.1;for(var i=0;i<self.aImages.length;i++)current=self.aImages[i],$item=self.$slider.find('[data-img-src="'+current+'"]'),$item.hasClass("loaded")||(self.options.backgroundImages?$item.find(".mbc-teaser-img").css("background-image","url('"+current+"')"):$item.find(".mbc-teaser-img").attr("src",current),$item.addClass("loaded"),TweenMax.to($item.find(".mbc-img-holder"),.8,{alpha:1,ease:Quad.easIn,delay:factor*i}));self.initialLoad&&(window.config.sliderLoaded++,window.config.sliderLoaded===window.config.sliderCount&&setTimeout(function(){wpmbcom.helper.preloader.hide()},500)),self.initialLoad=!1,self.buildTrackingInfo(),self.$slider.find(".loaded").length>self.$slides.length-1&&self.hideLoadMore(),self.isLoading=!1,self.$element.trigger("mbc-teaser-slider-load-complete"),self.updateHeight()},this.hideLoadMore=function(){self.$loadMore.off("click"),TweenMax.to(self.$loadMore.closest(".mbc-load-more-wrapper"),.3,{autoAlpha:0,display:"none"}),$__WINDOW__.off("scroll",self.checkAutoload),$__WINDOW__.off("resize",self.checkAutoload)},this.setup=function(){element=this.element,$element=this.$element,$item=$element.find(".mbc-teaser").first(),options=this.options,$(".bx-wrapper").css({maxWidth:"inherit"}),self.$loadMore=self.$element.find(".mbc-load-more-btn"),self.$slides=self.$element.find(".mbc-slider-container li.mbc-teaser"),self.$slider=self.$element.find(".mbc-slider-container"),self.$loader=self.$element.find(".mbc-preloader-img"),self.loadCounter=0,self.initialLoad=!0,self.loadItems=0,self.isfirstItems=!0,self.isLoading=!1,self.options.backgroundImages=1==parseInt(self.options.backgroundImages),self.updateHeight(),self.$loadMore.on("click",function(e){e.preventDefault(),self.isLoading||self.loadContent(self.options.type)}),Modernizr.touch&&self.$loadMore.addClass("touch"),self.options.type===self.TYPE_ALL?self.loadAllContent():self.loadContent(self.options.type,self.options.number),self.buildTrackingInfo();var $sections=$("#mbc-main-container");self.$element.is($sections.find("section.mbc-teaser-slider").eq($sections.find("section.mbc-teaser-slider").length-1))&&self.$element.addClass("last-index"),1==parseInt(self.options.autoload)&&($__WINDOW__.on("scroll",self.checkAutoload),$__WINDOW__.on("resize",self.checkAutoload))},this.showLoading=function(){self.$element.addClass("loading"),self.$loader&&self.$loader.data("plugin-LoaderAnimation")&&self.$loader.data("plugin-LoaderAnimation").show()},this.hideLoading=function(){self.$element.removeClass("loading"),self.$loader&&self.$loader.data("plugin-LoaderAnimation")&&self.$loader.data("plugin-LoaderAnimation").hide()},this.buildTrackingInfo=function(){var items=self.options.type==self.TYPE_3_LARGE?3:4;self.$element.find("a.mbc-teaser-link").length;"mobile"==wpmbcom.helper.browser.device()&&(items=self.options.type==self.TYPE_3_LARGE?1:2);for(var $el,i=0;i<(self.loadCounter+1)*items;i++){$el=self.$element.find("a").eq(i);var index=$.inArray($el.data("analytics-teaser-content-id"),digitalData.teaser.content.id);-1!=index&&(digitalData.teaser.content.id.splice(index,1),digitalData.teaser.content.contentTitle.splice(index,1),digitalData.teaser.content.issueDate.splice(index,1),digitalData.teaser.content.primaryCategory.splice(index,1),digitalData.teaser.content.subCategory1.splice(index,1),digitalData.teaser.content.subCategory2.splice(index,1),digitalData.teaser.content.metaCategories.splice(index,1),digitalData.teaser.content.format.splice(index,1),digitalData.teaser.content.type.splice(index,1))}for(var i=self.loadCounter*items;i<(self.loadCounter+1)*items;i++)$el=self.$element.find("a").eq(i),digitalData.teaser.content.id.push($el.data("analytics-teaser-content-id")),digitalData.teaser.content.contentTitle.push($el.data("analytics-teaser-content-contenttitle")),digitalData.teaser.content.issueDate.push($el.data("analytics-teaser-content-issuedate")),digitalData.teaser.content.primaryCategory.push($el.data("analytics-teaser-content-primarycategory")),digitalData.teaser.content.subCategory1.push($el.data("analytics-teaser-content-subcategory1")),digitalData.teaser.content.subCategory2.push($el.data("analytics-teaser-content-subcategory2")),digitalData.teaser.content.metaCategories.push($el.data("analytics-teaser-content-metacategories")),digitalData.teaser.content.format.push($el.data("analytics-teaser-content-format")),digitalData.teaser.content.type.push($el.data("analytics-teaser-content-type"))},this.checkAutoload=function(){self.isLoadMoreInViewport()&&(self.isLoading||self.loadContent(self.options.type))},this.isLoadMoreInViewport=function(){var rect=self.$loadMore[0].getBoundingClientRect();return 0==rect.top&&0==rect.bottom?!1:rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.GoToPageTop=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$element.on("click",function(e){e.preventDefault(),TweenMax.to([$__WINDOW__,$__DOCUMENT__],.8,{scrollTo:{y:0},ease:Sine.easeOut})})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.OnPageNavigation=function(){var element,$element,options,self=this;return this.defaults={key:"value",isInspire:!1},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){self.prepareList()},this.prepareList=function(){self.$element.find(".last-in-row").removeClass("last-in-row"),self.$list=$element.find("li");var width=0,contentWidth=self.$element.children("ul").width();self.$list.each(function(index,node){var nodeWidth,$this=$(node);0===width&&(width=$this.outerWidth(!0)),nodeWidth=$this.next().outerWidth(!0),width+nodeWidth>contentWidth?(width=0,$this.find("a").addClass("last-in-row")):width+=nodeWidth})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$links=$element.find("a").not(".mme-article-navigation-extern-link"),self.$images=self.$links.find("img"),self.options.isInspire||self.$links.on("click",function(e){e.preventDefault();var pos,id=$(this).find(".mme-onpage-text").data("onpage-id"),$el=$("section[data-onpage-id='"+id+"']");pos=$el.prev().hasClass("mbc-article-section")?$el.prev().offset().top:$el.offset().top,TweenLite.to([$__WINDOW__,$__DOCUMENT__],1,{scrollTo:{y:pos,x:0},ease:Power4.easeOut})}),this.prepareList()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Search=function(){var element,$element,options,$input,$results,$searchBtn,$clearBtn,self=this;return this.ondevicechange=function(){try{"tablet"===wpmbcom.helper.browser.device()||"mobile"===wpmbcom.helper.browser.device()?self.$isMobile=!0:self.$isMobile=!1}catch(e){}},this.onUpdate=function($el){jQuery("#searchContainer .result_container").jScrollPane({showArrows:!1,autoReinitialise:!0,hideFocus:!0})},this.onResults=function(html){var $el=jQuery(this),$resp=$(html),$copy=$resp.find("h4").first(),$text=$copy.text(),key=$text.match(/"(.*?)"/),$span=$copy.find("span"),$headline=$resp.find("h4"),$state=-1==$headline.text().indexOf("Keine");$state||$headline.text(config.translations.search.noresults+" "+config.translations.search.quoteopen+key[1]+config.translations.search.quoteclose),$span.find("span.link-button.read").text(config.translations.search.read_more),$span.length>=0&&$state&&$headline.text(config.translations.search.results+" "+config.translations.search.quoteopen+key[1]+config.translations.search.quoteclose),$results.removeClass("loading").append($resp),digitalData.navigation.search.results=String($results.find(".result_container .results li").length),digitalData.navigation.search.searchterm=$el.val(),$results.find(".result_container .results li a").on("click",function(){digitalData.navigation.search.resultposition=$(this).parent().parent().attr("class")}),$results.find(".result_container").css("opacity",0).animate({opacity:1},400),self.onUpdate($el),setTimeout(function(){$("#searchContainer span.link-button.read").text(config.translations.search.read_more)},800),$__WINDOW__.trigger("yt.video.hide")},this.find=function($el,q,url){if($el.data("searched")!==q){$results.addClass("loading"),"none"===$results.css("display")&&($results.fadeIn(300),jQuery(document).unbind("click.search").bind("click.search",self.onClickOutside));var search=function(){$el.data("searched",q),jQuery.ajax({url:url+$el.data("filter")+"&filter=p&q="+q,context:$el,success:self.onResults})};$results.find(".result_container").length>0?$results.find(".result_container").animate({opacity:0,height:247},400,function(){$results.find(".result_container").remove(),search()}):search()}},this.suggest=function($el,q,url,e){if(!self.$isMobile){var suggestURL=url+"&filter=p&q="+q;jQuery.getJSON(suggestURL,function(json){if(json.results.length>0){var $val=$el.parent().find(".mbc-search-input").val(),fire=!1,reverse=!1,term=json.results[0].name,$vals=$val.split(" ").length,$suggests=json.results[0].name.split(" "),spaceIndex=$val.lastIndexOf(" ");$vals===$suggests.length?($el.parent().find(".suggest").val(json.results[0].name),fire=!0):$vals<$suggests.length&&8===e.keyCode&&-1===spaceIndex&&($el.parent().find(".suggest").val($suggests[$suggests.length-2]),term=$suggests[$suggests.length-2],reverse=!0),$results.fadeIn(300),(json.results[0].name!==$el.data("searchTerm")&&fire===!0||reverse===!0||e.isTrigger)&&($results.addClass("loading"),$el.data("searchTerm",term),self.find($el,term,$el.data("search-url"))),$.cookie("search_suggest",$el.parent().find(".suggest").val(),{path:"/"})}else $el.data("searchTerm",""),$el.parent().find(".suggest").val(""),$.cookie("search_suggest","",{path:"/"}),$el.data("timer",window.setTimeout(function(){self.find($el,q,$el.data("search-url"))},2e3))}),jQuery(document).unbind("click.search").bind("click.search",self.onClickOutside)}},this.onKeyUp=function(e){return self.$isMobile&&13===e.keyCode?void jQuery(this).parents("form").submit():(window.clearTimeout(jQuery(this).data("timer")),void(e&&13!==e.keyCode?(jQuery(this).val().length<4&&$.cookie("search_suggest","",{path:"/"}),$.cookie("search_term",jQuery(this).val(),{path:"/"}),jQuery(this).val().length>3?self.suggest(jQuery(this),jQuery(this).val(),jQuery(this).data("suggest-url"),e):($results.fadeOut(300),$results.find(".result_container").remove(),jQuery(this).data("searchTerm","")),jQuery(this).val().length>0?($searchBtn.addClass("mbc-hide"),$clearBtn.removeClass("mbc-hide")):($searchBtn.removeClass("mbc-hide"),$clearBtn.addClass("mbc-hide")),jQuery(this).data("searched","")):jQuery(this).parents("form").submit()))},this.onSearchClicked=function(e){e.stopPropagation(),e.preventDefault(),$input.focus()},this.onFocus=function(e){self.$isMobile||($input.addClass("mbc-open"),jQuery(this).data("isSearchFromCookie")?jQuery(this).data("isSearchFromCookie",!1):jQuery(this).val().length>3&&$results.fadeIn(300,function(){jQuery(document).unbind("click.search").bind("click.search",self.onClickOutside)}),jQuery(this).val().length>0?($searchBtn.addClass("mbc-hide"),$clearBtn.removeClass("mbc-hide")):($searchBtn.removeClass("mbc-hide"),$clearBtn.addClass("mbc-hide")),$("html").on("click",self.focusLost))},this.focusLost=function(e){e.isTrigger||$(e.target).parent().is("a")||(window.clearTimeout($element.find(".mbc-search-input").data("timer")),e.preventDefault(),$input.removeClass("mbc-open"),$("html").off("click",self.focusLost),$searchBtn.removeClass("mbc-hide"),$clearBtn.addClass("mbc-hide"),$__WINDOW__.trigger("yt.video.show"))},this.onClickOutside=function(e,param){e.isTrigger||$(e.target).parent().is("a")||(0!==jQuery(e.target).parents("#searchContainer").length||param===!0||jQuery(e.target).is("input")||(jQuery(document).unbind("click.search"),$results.fadeOut(300),jQuery("[data-role='gsa-search']").data("searched","")),window.clearTimeout($element.find(".mbc-search-input").data("timer")),window.clearTimeout(jQuery(this).data("timer")),$__WINDOW__.trigger("yt.video.show"))},this.onSubmit=function(e){if(!self.$isMobile){e.preventDefault(),jQuery(this).find(".inputImage").addClass("clear");var $el=e.data.$el;""!==$el.val()&&self.find($el,$el.val(),$el.data("search-url"))}},this.onClearClick=function(e){e.preventDefault(),e.stopPropagation(),$searchBtn.removeClass("mbc-hide"),$clearBtn.addClass("mbc-hide"),$input.val(""),$.cookie("search_term","",{path:"/"}),$.cookie("search_suggest","",{path:"/"}),$results.fadeOut(300),$__WINDOW__.trigger("yt.video.show")},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$searchBtn=$element.find(".mbc-search-link"),$clearBtn=$element.find(".mbc-clear-link");var oOpt={sSelector:"[data-role='gsa-search']",sResults:"#searchContainer"};$input=$element.find(".mbc-search-input"),$results=$("#searchContainer"),$element.on("click",this.onSearchClicked),$clearBtn.on("click",this.onClearClick),self.ondevicechange(),jQuery(oOpt.sSelector).each(function(){var $el=jQuery(this),search_from_cookie=$.cookie("search_term")&&""!==$.cookie("search_term")?$.cookie("search_term"):"";$.cookie("search_suggest")&&""!==$.cookie("search_suggest")?$.cookie("search_suggest"):"";$el.data("oOpt",oOpt),$el.val(search_from_cookie);var isSearchFromCookie=""===search_from_cookie?!1:!0;isSearchFromCookie&&$el.parent().find(".inputImage").addClass("clear"),$el.data("searchTerm","").data("filter","").data("searched","").data("isSearchFromCookie",isSearchFromCookie).data("timer",null),$el.bind("keyup",self.onKeyUp).bind("focus",self.onFocus),$el.parents("form").bind("submit",{$el:$el},self.onSubmit)})},this}}(this.window,this.jQuery),function(window,$,Helper,Application){"use strict";window.MetaNavigation=function(){var element,$element,options,self=this;return this.defaults={key:"value",isNewsletter:!1},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){try{"mobile"===wpmbcom.helper.browser.device()?self.renderMobile():self.renderDesktop()}catch(e){}},this.renderMobile=function(){self.$box.find("h2").css({display:"block"}),TweenMax.to(self.$box,.5,{autoAlpha:1,display:"block"}),self.$navi.css({display:"none"}),TweenMax.to(self.$boxcontent,0,{autoAlpha:0,display:"none"})},this.renderDesktop=function(){self.$box.find("h2").css({display:"none"}),self.$links.first().trigger("click"),self.$navi.css({display:"block"}),TweenMax.to(self.$boxcontent,0,{autoAlpha:1,display:"block"})},this.showElement=function($el,$sel,slug){slug?digitalData.layer.layerInfo.layerName=self.convertToSlug(slug):digitalData.layer.layerInfo.layerName=self.convertToSlug(config.translations.legal.provider),
self.$links.removeClass("mbc-active"),self.$navi.find("a"+$sel).addClass("mbc-active"),TweenMax.to(self.$box,.5,{autoAlpha:0,display:"none",onComplete:function(){TweenMax.to($el,.5,{autoAlpha:1,display:"block"})}})},this.openLayer=function(deeplink){wpmbcom.helper.preloader.show(!0);var isNewsletter=self.options.isNewsletter,containerHeight=550;1==isNewsletter&&(containerHeight=620),$.get(self.$element.attr("href"),function(resp){self.$resp=$(resp),setTimeout(function(){self.$resp.modal({autoResize:!0,autoPosition:!0,overlayClose:!0,modal:!0,containerCss:{backgroundColor:"#fff",color:"#000",height:containerHeight,padding:0,width:580},onShow:function(){isNewsletter&&$__WINDOW__.trigger("mbcNewsletterOpen"),wpmbcom.helper.preloader.hide(),$__WINDOW__.trigger("yt.video.hide"),""==digitalData.layer.layerInfo.layerName&&(digitalData.layer.layerInfo.layerName=self.convertToSlug(config.translations.legal.provider)),digitalData.layer.category.primaryCategory="legal"},onClose:function(){$.modal.close(),self.isOpen=!1,Application.disclaimerCookieExists()||Helper.writeCookie(Application.disclaimerCookieName,Application._acceptedLanguageAsString(),Application.disclaimerCookieExpiration),$__WINDOW__.trigger("yt.video.show"),digitalData.layer.layerInfo.layerName=null,digitalData.layer.category.primaryCategory=null}})},200),self.isOpen=!0;var $closeBtn=self.$resp.find(".close");$closeBtn.on("click",function(e){e.preventDefault(),$.modal.close(),self.isOpen=!1}),self.$navi=self.$resp.find("#mbc-modal-navigation"),self.$links=self.$navi.find("a"),self.$box=self.$resp.find(".mbc-meta-box"),self.$pane=self.$resp.find("#mbc-meta-wrapper ul"),self.$boxcontent=self.$box.find(".mbc-content"),self.$accordionhead=self.$box.find(".mbc-accorion-headline"),self.$links.on("click",function(e){e.preventDefault();var $sel="[data-id='"+$(this).data("id")+"']",$el=self.$resp.find(".mbc-meta-box"+$sel);self.showElement($el,$sel,$(this).data("id"))});var $cookieLink=self.$resp.find("a.mbc-legal-cookie-link");if($cookieLink.length>0&&$cookieLink.on("click",function(e){e.preventDefault(),$__WINDOW__.trigger("mbc-meta-open-show-meta",[self.convertToSlug(config.translations.legal.cookies)])}),self.$accordionhead.on("click",function(e){e.preventDefault(),$(this).next().toggleClass("active"),$(this).next().hasClass("active")?(TweenMax.to($(this).next(),.5,{autoAlpha:1,display:"block"}),$(this).addClass("active")):(TweenMax.to($(this).next(),.5,{autoAlpha:0,display:"none"}),$(this).removeClass("active"))}),self.$pane.jScrollPane({showArrows:!1,autoReinitialise:!0,hideFocus:!0}),self.$api=self.$pane.data("jsp"),"mobile"===wpmbcom.helper.browser.device())self.renderMobile();else if(self.renderDesktop(),"first"===deeplink)self.$navi.find("a:first").trigger("click");else{var $sel="[data-id='"+deeplink+"']",$el=self.$resp.find(".mbc-meta-box"+$sel);self.showElement($el,$sel,deeplink)}})},this.convertToSlug=function(text){return text.replace(/[^A-Za-z0-9-]+/g,"-")},this.triggerMetaCookies=function(){self.triggerMeta("",config.translations.legal.cookies)},this.triggerMetaPrivacy=function(){self.triggerMeta("",config.translations.legal.notice)},this.triggerMeta=function(e,id){if(0==self.options.isNewsletter)if(self.isOpen){var $sel="[data-id='"+id+"']",$el=self.$resp.find(".mbc-meta-box"+$sel);self.showElement($el,$sel,id)}else self.openLayer(id)},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.isOpen=!1,$__WINDOW__.on("mbc-meta-open-show-cookies",self.triggerMetaCookies),$__WINDOW__.on("mbc-meta-open-show-privacy",self.triggerMetaPrivacy),$__WINDOW__.on("mbc-meta-open-show-meta",self.triggerMeta),$("body").delegate('#simplemodal-container a[href*="#cookies"]',"click",self.triggerMetaCookies),$("body").delegate('#simplemodal-container a[href*="#privacy"]',"click",self.triggerMetaPrivacy),$element.on("click",function(e){e.preventDefault(),self.openLayer("first")})},this}}(this.window,this.jQuery,this.Helper,this.Application),function(window,$){"use strict";window.Maps=function(){var element,$element,options,self=this;return this.defaults={key:"value",postindex:"",adress:"",city:"",name:"",lat:"","long":""},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){self.gMap.width(self.gMap.parent().parent().width()),self.gMap.height(self.gMap.parent().parent().height())},this.gmapReady=function(){var mLatLng=null,mCenter=!0;""!=self.options.lat&&""!=self.options["long"]&&(mLatLng=[self.options.lat,self.options["long"]],mCenter=mLatLng),self.gMap.gmap3({map:{options:{center:mCenter,zoom:16,maxZoom:16,draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0}},marker:self.gMapMarker},"autofit")},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.gMap=self.$element.find(".mbc-map-content"),$("html").hasClass("jp")?this.gMpaData="<div style='line-height:1.35;overflow:hidden;color:black;white-space:nowrap;'><strong>"+self.options.name+"</strong><br />"+self.options.postindex+"<br />"+self.options.city+" "+self.options.adress+"</div>":this.gMpaData="<div style='line-height:1.35;overflow:hidden;color:black;white-space:nowrap;'><strong>"+self.options.name+"</strong><br />"+self.options.adress+"<br />"+self.options.postindex+" "+self.options.city+"</div>";var mAdress=self.options.postindex.replace("-","")+self.options.city+", "+self.options.adress,mLatLng=null;""!=self.options.lat&&""!=self.options["long"]&&(mAdress="",mLatLng=[self.options.lat,self.options["long"]]),this.gMapMarker={latLng:mLatLng,address:mAdress,data:self.gMpaData,options:{icon:new google.maps.MarkerImage("//maps.google.com/mapfiles/ms/icons/red-dot.png",new google.maps.Size(32,37,"px","px"))},tag:"store",callback:function(marker,event,context){var map=$(this).gmap3("get"),infowindow=$(this).gmap3({get:{name:"infowindow"}});infowindow?(infowindow.open(map,marker),infowindow.setContent(self.gMpaData)):$(this).gmap3({infowindow:{anchor:marker,options:{content:self.gMpaData}}})},events:{click:function(marker,event,context){var map=$(this).gmap3("get"),infowindow=$(this).gmap3({get:{name:"infowindow"}});infowindow?(infowindow.open(map,marker),infowindow.setContent(context.data)):$(this).gmap3({infowindow:{anchor:marker,options:{content:context.data}}})},mouseover:function(marker,event,context){var map=$(this).gmap3("get"),infowindow=$(this).gmap3({get:{name:"infowindow"}});infowindow?(infowindow.open(map,marker),infowindow.setContent(context.data)):$(this).gmap3({infowindow:{anchor:marker,options:{content:context.data}}})},mouseout:function(){var infowindow=$(this).gmap3({get:{name:"infowindow"}});infowindow&&infowindow.close()}}},this.gMap.width(this.gMap.parent().parent().width()),this.gMap.height(this.gMap.parent().parent().height()),$.getScript(config.assetpath+"javascript/vendor/gmap3.min.js",function(){self.gmapReady()})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.WelcomeSectionMME=function(){var element,$element,options,$openBtn,$videoPrevLayer,$textLayer,player,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.onYouTubeAPIReady=function(){self.buildPlayer()},this.onPlayerReady=function(){$openBtn.removeClass("mbc-hide")},this.onVideoEvent=function(e){e.data===YT.PlayerState.ENDED&&self.onVideoEnd()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$videoPrevLayer=$element.find(".mme-video-prev"),$textLayer=$element.find(".mme-welcome-text"),$openBtn=$element.find(".mme-video-play-btn"),$openBtn.addClass("mbc-hide"),$openBtn.on("click",$.proxy(this.onStartVideoClicked,this)),$element.find(".mbc-video-close-btn").on("click",self.onVideoCloseClicked),$(window).on("mbc_onYouTubeAPIReady",this.onYouTubeAPIReady),$element.find(".mme-mobile-quote-wrapper").append($element.find(".mme-video-prev .mme-quote").clone())},this.onStartVideoClicked=function(e){e.preventDefault(),self.startVideo()},this.startVideo=function(){$videoPrevLayer.addClass("mme-hide-prev"),$textLayer.addClass("mme-video-playing"),player&&(Modernizr.touch||player.playVideo())},this.onVideoEnd=function(){$videoPrevLayer.removeClass("mme-hide-prev"),$textLayer.removeClass("mme-video-playing"),TweenMax.delayedCall(2,self.buildPlayer)},this.onVideoCloseClicked=function(e){e.preventDefault(),player&&player.pauseVideo(),self.onVideoEnd()},this.destroyPlayer=function(){player&&($element.find(".mme-video-container").hide(),player.destroy(),player=null)},this.buildPlayer=function(){self.destroyPlayer(),$element.find(".mme-video-container").show();var videoElement=$element.find(".mme-video-placeholder").get(0);player=new YT.Player(videoElement,{videoId:options.videoId,playerVars:{modestbranding:1,showinfo:0,wmode:"transparent",color:"white"},events:{onReady:self.onPlayerReady,onStateChange:self.onVideoEvent}})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.RemoveOnpage=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$element.remove()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ArticleGallery=function(){var element,$element,options,$slider,$pager,$mobileTitleContainer,self=this,validClasses=["mbc-gallery-controls","mbc-control-side"],$fullscreenContainer=$(".mbc-gallery-fullscreen-container"),$fullscreenImg=$(".mbc-gallery-fullscreen-image"),$fullscreenWrapper=$(".mbc-gallery-fullscreen-image-wrapper");$(".mbc-row-image-info");return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){TweenMax.killDelayedCallsTo(self.delayedClassChange),$element.find(".mbc-control-container").removeClass("mbc-off-page")},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$mobileTitleContainer=$element.find(".mbc-mobile-title-container"),$mobileTitleContainer.append($element.find(".mbc-img-title").clone()),$mobileTitleContainer.find(".mbc-img-title").eq(0).addClass("mbc-show"),$pager=$element.find(".mbc-pager");var $downloads=$element.find("a.mbc-image-download");$downloads.on("click",function(e){e.preventDefault(),self.saveToDisk($(this).data("image"),$(this).data("image-name"))}),self.$element.find(".mbc-gallery-controls").on("click",function(evt){evt.preventDefault();var $this=$(evt.target),firstClass=$this.attr("class").split(" ")[0];if(-1!==$.inArray(firstClass,validClasses)){var currentIndex=$slider.getCurrentSlide(),$currentSlide=self.$element.find(".mbc-gallery-slide-container").children("li").eq(parseInt(currentIndex+1,10)),srcUrl=$currentSlide.find("img").attr("src");if(!$currentSlide.hasClass("mbc-fullscreen"))return;$fullscreenImg.off("load").on("load",function(){wpmbcom.helper.preloader.show(),$fullscreenContainer.modal({autoResize:!0,autoPosition:!0,overlayClose:!0,modal:!0,close:!0,zIndex:10010,opacity:80,containerId:"mbc-gallery-fullscreen-container",onClose:function(dialog){dialog.data.hide(),dialog.container.hide(),dialog.overlay.hide(),$.modal.close(),$fullscreenImg.attr("src","#")},onShow:function(){wpmbcom.helper.preloader.hide(),$fullscreenContainer.css("overflow","hidden"),$fullscreenImg.css({width:"100%",height:"auto"}),$fullscreenWrapper.css("padding","0 10px")}})}).attr("src",srcUrl)}}),$slider=$element.find(".mbc-gallery-slide-container").bxSlider({auto:!1,autoStart:!1,autoHover:!1,responsive:!0,speed:600,swipeThreshold:100,useCSS:!0,adaptiveHeight:!1,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,minSlides:1,maxSlides:1,pager:!0,pagerType:"full",infiniteLoop:!0,onSlideBefore:this.onSlideBefore,onSlideAfter:this.onSlideAfter,onSliderLoad:function(){self.$element.find(".mbc-slide").eq(1).addClass("active"),self.$slides=self.$element.find("li.mbc-slide"),self.$element.find(".mbc-slide").eq(1).hasClass("black-arrows")&&self.$element.find("a.mbc-control-container").addClass("black-arrow")}}),$element.find(".mbc-control-side.mbc-left a.mbc-control-container").on("click",this.onPrevClicked),$element.find(".mbc-control-side.mbc-right a.mbc-control-container").on("click",this.onNextClicked),$slider.getSlideCount()<2&&($element.find(".mbc-control-side").css("cursor","default"),$element.find(".mbc-control-side.mbc-left a.mbc-control-container").css({display:"none"}),$element.find(".mbc-control-side.mbc-right a.mbc-control-container").css({display:"none"})),this.setPager($slider.getCurrentSlide(),$slider.getSlideCount())},this.isIE8=function(){return"Explorer"===wpmbcom.helper.browser.type&&wpmbcom.helper.browser.version<=8},this.isMobile=function(){return"tablet"===wpmbcom.helper.browser.device()||"mobile"===wpmbcom.helper.browser.device()},this.onSlideBefore=function(){$mobileTitleContainer.find(".mbc-img-title").removeClass("mbc-show")},this.onSlideAfter=function($slideElement,oldIndex,newIndex,$caption){self.setPager($slider.getCurrentSlide(),$slider.getSlideCount()),$mobileTitleContainer.find(".mbc-img-title").eq(newIndex).addClass("mbc-show"),$element.find(".mbc-slide.active").removeClass("active"),$slideElement.addClass("active"),$slideElement.hasClass("black-arrows")?$element.find("a.mbc-control-container").addClass("black-arrow"):$element.find("a.mbc-control-container").removeClass("black-arrow")},this.setPager=function(currentIndex,totalItems){$pager.find(".mbc-current").text(currentIndex+1),$pager.find(".mbc-total").text(totalItems)},this.updateThumbs=function($slideElement){var urlLeft=$slideElement.prev().find(".mbc-slide-img").attr("src"),urlRight=$slideElement.next().find(".mbc-slide-img").attr("src");$element.find(".mbc-control-side.mbc-left .mbc-gallery-thumb").attr("src",urlLeft),$element.find(".mbc-control-side.mbc-right .mbc-gallery-thumb").attr("src",urlRight)},this.onPrevClicked=function(e){e.preventDefault();var index=$slider.getCurrentSlide()+1;self.$slides.eq(index).removeClass("active"),setTimeout(function(){$slider.goToPrevSlide()},250)},this.onNextClicked=function(e){e.preventDefault();var index=$slider.getCurrentSlide()+1;self.$slides.eq(index).removeClass("active"),setTimeout(function(){$slider.goToNextSlide()},250)},this.onMouseLeave=function(e){if(!self.isMobile()){var control=$(e.target).find("a.mbc-control-container");control.addClass("mbc-off-page"),"left"===e.data.side?(TweenMax.killDelayedCallsTo(self.delayedClassChangeLeft),TweenMax.delayedCall(.4,self.delayedClassChangeLeft,[control,"","mbc-off-page mbc-open"])):(TweenMax.killDelayedCallsTo(self.delayedClassChangeRight),TweenMax.delayedCall(.4,self.delayedClassChangeRight,[control,"","mbc-off-page mbc-open"]))}},this.onMouseEnter=function(e){if(!self.isMobile()){var control=$(e.target).find("a.mbc-control-container");control.addClass("mbc-off-page"),"left"===e.data.side?(TweenMax.killDelayedCallsTo(self.delayedClassChangeLeft),TweenMax.delayedCall(.1,self.delayedClassChangeLeft,[control,"mbc-open","mbc-off-page"])):(TweenMax.killDelayedCallsTo(self.delayedClassChangeRight),TweenMax.delayedCall(.1,self.delayedClassChangeRight,[control,"mbc-open","mbc-off-page"]))}},this.delayedClassChangeLeft=function($el,addClass,removeClass){self.delayedClassChange($el,addClass,removeClass)},this.delayedClassChangeRight=function($el,addClass,removeClass){self.delayedClassChange($el,addClass,removeClass)},this.saveToDisk=function(fileURL,fileName){if(window.ActiveXObject){if(window.ActiveXObject&&document.execCommand){var _window=window.open(fileURL,"_blank");_window.document.close(),_window.document.execCommand("SaveAs",!0,fileName||fileURL),_window.close()}}else{var save=document.createElement("a");save.href=fileURL,save.target="_blank",save.download=fileName||fileURL;var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),save.dispatchEvent(evt),(window.URL||window.webkitURL).revokeObjectURL(save.href)}},this.delayedClassChange=function($el,addClass,removeClass){$el.addClass(addClass),$el.removeClass(removeClass)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.LanguageChooser=function(){var element,$element,options,$listWrapper,selectedLangCode,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){$element.hasClass("mbc-open")&&self.toggleOpenState()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,selectedLangCode=$__HTML__.data("lang"),$listWrapper=$element.find(".mbc-list-wrapper");var initialWidth=$element.find(".mbc-lang-list").width();$element.width(initialWidth),$element.find(".mbc-lang-list").css({"min-width":initialWidth+"px"}),$element.find(".mbc-selected-lang a").on("click",this.onSelectedItemClicked),$element.find(".mbc-lang-list .mbc-lang-link").on("click",this.onItemSelected),this.updateSelectedItem(selectedLangCode)},this.onItemSelected=function(e){selectedLangCode=$(e.target).data("lang"),self.updateSelectedItem(selectedLangCode),self.toggleOpenState()},this.onSelectedItemClicked=function(e){e.preventDefault(),self.toggleOpenState()},this.toggleOpenState=function(){$element.toggleClass("mbc-open"),$element.hasClass("mbc-open")?$listWrapper.height($element.find(".mbc-lang-list").outerHeight()):$listWrapper.height($element.height())},this.updateSelectedItem=function(lang){(""==lang||void 0==lang)&&(lang="en"),$element.find(".mbc-lang-item").removeClass("mbc-active"),$element.find(".mbc-lang-item."+lang).addClass("mbc-active");var langText=$element.find(".mbc-lang-list .mbc-active .mbc-lang-link").text();$element.find(".mbc-selected-lang .mbc-lang-link").text(langText)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.MetaLandingPage=function(){var element,$element,intialHash,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.fadeInElement=function(hash){self.$element.find(".mbc-meta-box").hide(),self.$element.find(".mbc-meta-box").filter('[data-id="'+hash+'"]').show()},this.fadeOutAll=function(){self.$element.find(".mbc-meta-box").hide()},this.showElement=function(evt){evt.preventDefault();var $el=$(evt.currentTarget);if(!$el.hasClass("mbc-active")){var hash=$el.data("id");self.$links.removeClass("mbc-active"),$el.addClass("mbc-active"),self.fadeInElement(hash),window.location.hash=hash}},this.setup=function(){element=this.element,$element=this.$element,options=this.options,intialHash=window.location.hash,self.$navi=self.$element.find("#mbc-modal-navigation"),self.$pane=self.$element.find("#mbc-meta-wrapper ul"),self.$links=self.$navi.find("a"),self.$links.on("click",self.showElement);var $activeElement="";$activeElement=intialHash.length>0?self.$links.filter('[data-id="'+intialHash.substr(1,intialHash.length)+'"]'):self.$links.first(),$activeElement.length||($activeElement=self.$links.first()),$activeElement.trigger("click"),self.$pane.jScrollPane({showArrows:!1,autoReinitialise:!0,hideFocus:!0})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.SearchPage=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.onResults=function(resp){var $resp=$(resp),$head=$resp.find(".item h3"),$img=$resp.find(".item img");if($__HTML__.hasClass("mobile"))for(var i=0;i<$head.length;i++)$head.eq(i).insertAfter($img.eq(i));$resp.find("span.link-button.read").text(config.translations.search.read_more),self.$result.html($resp),setTimeout(function(){if($__HTML__.hasClass("mobile"))for(var i=0;i<$head.length;i++)$head.eq(i).insertAfter($img.eq(i));$resp.find("span.link-button.read").text(config.translations.search.read_more),self.$result.html($resp)},500)},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$result=self.$element.find(".result_container");var param=$.getUrlVar("search"),url=self.$element.data("search-url");jQuery.ajax({url:url+"&filter=p&q="+param,context:self.$element,success:self.onResults})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.AjaxNewsletter=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.success=function(){self.$success.show(),self.$form.hide(),self.$copy.hide()},this.error=function(){self.$error.show(),self.$copy.hide(),self.$form.hide()},this.complete=function(response,status){wpmbcom.helper.preloader.hide(),200===response.status&&"OK"==response.statusText?self.success():self.error()},this.checkInput=function(type,val){var valid=!1;switch(type){case"first_name":valid=/[\d]/.test(val)?!1:!0;break;case"last_name":valid=/[\d]/.test(val)?!1:!0;break;case"email":valid=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(val)?!0:!1}return valid},this.validate=function(formData,jqForm,options){var gerror,ferror,nerror,eerror,$form=jqForm[0],cerror=!1,mbc=$__BODY__.hasClass("mbc");$($form.sex).eq(0).get(0).checked||$($form.sex).eq(1).get(0).checked?($($form.sex).parent().find(".control-indicator").css({border:"inherit"}),$($form.sex).parent().css({color:"black"}),gerror=!1):($($form.sex).parent().find(".control-indicator").css({border:"1px solid red"}),$($form.sex).parent().css({color:"red"}),gerror=!0),0==mbc?0==self.checkInput("first_name",$form.FNAME.value)||""==$form.FNAME.value?($($form.FNAME).css({border:"1px solid red"}),$($form.FNAME).parent().find("label").css({color:"red"}),ferror=!0):($($form.FNAME).css({border:"inherit"}),$($form.FNAME).parent().find("label").css({color:"black"}),ferror=!1):ferror=!1,0==self.checkInput("last_name",$form.LNAME.value)||""==$form.LNAME.value?($($form.LNAME).css({border:"1px solid red"}),$($form.LNAME).parent().find("label").css({color:"red"}),nerror=!0):($($form.LNAME).css({border:"inherit"}),$($form.LNAME).parent().find("label").css({color:"black"}),nerror=!1),0==self.checkInput("email",$form.EMAIL.value)||""==$form.EMAIL.value?($($form.EMAIL).css({border:"1px solid red"}),$($form.EMAIL).parent().find("label").css({color:"red"}),eerror=!0):($($form.EMAIL).css({border:"inherit"}),$($form.EMAIL).parent().find("label").css({color:"black"}),eerror=!1),0==mbc?0==self.checkInput("first_name",$form.country.value)||""==$form.country.value?($($form.country).css({border:"1px solid red"}),$($form.country).parent().css({color:"red"}),cerror=!0):($($form.country).css({border:"inherit"}),$($form.country).parent().css({color:"black"}),cerror=!1):cerror=!1;var verify=!(gerror||ferror||nerror||eerror||cerror);return verify?(wpmbcom.helper.preloader.show(!0),self.$errorMessage.hide(),digitalData.layer.layerInfo.layerName="newsletter_form/completed",!0):(self.$errorMessage.show(),!1)},this.onNewsletter=function(){digitalData.layer.layerInfo.layerName="newsletter_form/started",self.$form=$("#mbc-article .mc4wp-ajax form"),self.$success=$("#mbc-newsletter-success"),self.$copy=$("#mbc-article p.mbc-newsletter-content"),self.$error=$("#mbc-newsletter-error"),self.$errorMessage=self.$form.find(".mbc-error-text");var service=$__BODY__.hasClass("mbc")?config.server+config.lang+config.comnewsletter:config.server+config.lang+config.menewsletter;self.$form.ajaxForm({data:{action:"mc4wp_submit_form"},type:"post",dataType:"json",url:service,delegation:!0,complete:self.complete,beforeSubmit:self.validate})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$__WINDOW__.on("mbcNewsletterOpen",self.onNewsletter)},this},wpmbcom.plugins.nonDomPlugins.push("AjaxNewsletter")}(this.window,this.jQuery),function(window,$){"use strict";window.OnpageHighlight=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options;var url=window.location.href.split("/");url=url[url.length-2],self.$element.find("[data-id='"+url+"']").addClass("mbc-active")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.MetaNavigationFooter=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.newsLetter=function(href){wpmbcom.helper.preloader.show(!0),$.get(href,function(resp){self.$resp=$(resp),setTimeout(function(){self.$resp.modal({autoResize:!0,autoPosition:!0,overlayClose:!0,modal:!0,containerCss:{backgroundColor:"#fff",color:"#000",height:620,padding:0,width:580},onShow:function(){wpmbcom.helper.preloader.hide(),$__WINDOW__.trigger("mbcNewsletterOpen"),$__WINDOW__.trigger("yt.video.hide"),digitalData.layer.category.primaryCategory="newsletter_form"},onClose:function(){$.modal.close(),self.isOpen=!1,$__WINDOW__.trigger("yt.video.show"),digitalData.layer.layerInfo.layerName=null,digitalData.layer.category.primaryCategory=null}})},200);var $closeBtn=self.$resp.find(".close");$closeBtn.on("click",function(e){e.preventDefault(),$.modal.close(),self.isOpen=!1})})},this.openLightbox=function(href,type){wpmbcom.helper.preloader.show(!0);var width=580,height=550;"iframe"===type&&(width=785,height=726),"linkout"===type&&(height=250);var part=href.split("/");$.get(href,function(resp){self.$resp=$(resp),setTimeout(function(){self.$resp.modal({autoResize:!0,autoPosition:!0,overlayClose:!0,modal:!0,containerCss:{backgroundColor:"#fff",color:"#000",height:height,padding:0,width:width},onShow:function(){wpmbcom.helper.preloader.hide(),$("#mbc-meta-wrapper .mbc-meta-wrapper-pane").jScrollPane({showArrows:!1,autoReinitialise:!0,hideFocus:!0}),$__WINDOW__.trigger("yt.video.hide"),digitalData.layer.layerInfo.layerName=part[part.length-2],"rss-feed"==digitalData.layer.layerInfo.layerName||"rss-2"==digitalData.layer.layerInfo.layerName?digitalData.layer.category.primaryCategory="rss-feed":digitalData.layer.category.primaryCategory="contact_form"},onClose:function(){$.modal.close(),self.isOpen=!1,$__WINDOW__.trigger("yt.video.show"),digitalData.layer.layerInfo.layerName=null,digitalData.layer.category.primaryCategory=null}})},200);var $closeBtn=self.$resp.find(".close");$closeBtn.on("click",function(e){e.preventDefault(),$.modal.close(),self.isOpen=!1});var $linkoutCloseBtn=self.$resp.find(".mbc-linkout-close");$linkoutCloseBtn.on("click",function(e){e.preventDefault(),$.modal.close(),self.isOpen=!1})})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$element.find("a").on("click",function(e){if(($(this).hasClass("deeplink")||$(this).hasClass("iframe")||$(this).hasClass("newsletter")||$(this).hasClass("lightbox"))&&e.preventDefault(),$(this).hasClass("deeplink")&&$__WINDOW__.trigger("mbc-meta-open-show-meta",[$(this).data("id")]),$(this).hasClass("iframe")||$(this).hasClass("lightbox")){var type=$(this).hasClass("iframe")?"iframe":"lightbox";self.openLightbox($(this).attr("href"),type)}$(this).hasClass("newsletter")&&self.newsLetter($(this).attr("href"))}),$__WINDOW__.on("com-open-lightbox",function(e,data){self.openLightbox(data.href,data.type,data.style)}),$__WINDOW__.on("com-close-lightbox",function(){$.modal.close(),self.isOpen=!1})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.SiteLogo=function(){var element,$element,options;return this.defaults={key:"value",cls:""},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$("html.jp #mme-me-logo").on("click",function(e){e.preventDefault()})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Linktool=function(){return this.defaults={aWaitFor:["CountryChooser","WelcomeLayerMBC"]},this.setup=function(){window.LinktoolData={},window.LinktoolData.locale=$.cookie("locale")?$.cookie("locale").toUpperCase():"DE",this.loadCountryList()},this.loadCountryList=function(){var langToLoad="de"===window.config.lang?"de":"en";$.getJSON("/wp-content/themes/mbcom/assets/content/mb-com/"+langToLoad+"/linktool_countries_"+langToLoad+"_static.json").done(this.onCountryListLoaded)},this.onCountryListLoaded=function(data){window.LinktoolData.global=data,$(window).trigger("linktool_ready",[window.LinktoolData])},this},wpmbcom.plugins.nonDomPlugins.push("Linktool")}(this.window,this.jQuery),function(window,$){"use strict";window.CountryChooser=function(){var element,$element,options,self=this;return this.$el,this.$wrapper,this.targetHeight,this.countryData,this.$initState,this.$countryState,this.$currentState,this.$countryListContainer,this.$flyout,this.easing,this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,this.$el=$element=this.$element,options=this.options,$(window).on("linktool_ready",$.proxy(this.onLinktoolReady,this))},this.onLinktoolReady=function(){this.initModule()},this.initModule=function(){this.$wrapper=this.$el.find(".wrapper"),this.$initState=this.$el.find(".init-state"),this.$countryState=this.$el.find(".country-state"),this.$currentState=this.$initState,this.$countryListContainer=this.$countryState.find(".mbc-countries"),this.$flyout=this.$el.find(".mbc-flyout"),this.$el.find("a.change-country").on("click",$.proxy(this.onChangeCountryClicked,this)),this.$el.find("a.mbc-close").on("click",$.proxy(this.onCloseCountryStateClicked,this)),TweenMax.set(this.$countryState,{autoAlpha:0}),this.$countryState.css({display:"none"}),this.parseCountryJSON(),self.isIE8()?this.easing=SteppedEase.config(1):this.easing=Sine.easeOut,Modernizr.touch?(this.$el.find(".mbc-flyout-toggle").hammer().on("tap",$.proxy(this.onTouchToggle,this)),this.$el.find(".mbc-flyout-toggle").on("click",wpmbcom.helper.preventDefaultLinkEvent)):this.$el.find(".mbc-flyout-toggle").on("click",$.proxy(this.onTouchToggle,this)),$(window).on("open_country_chooser",self.onOpenCountryChooserEvent)},this.onOpenCountryChooserEvent=function(){TweenMax.delayedCall(.6,self.show)},this.isIE8=function(){return"Explorer"===wpmbcom.helper.browser.type&&wpmbcom.helper.browser.version<=8},this.getHoverClass=function(){return Modernizr.touch?"":"mbc-hover"},this.parseCountryJSON=function(){var $dropdown=this.$el.find(".mbc-dropdown-wrapper select"),$countryList=this.$el.find(".country-state .mbc-countries");for(var i in window.LinktoolData.global){$dropdown.append('<option value=".'+i.toLowerCase()+'">'+window.LinktoolData.global[i].name+"</option>");for(var j in window.LinktoolData.global[i].countries){var $countryLi=$('<li><a class="mbc-country-link '+i.toLowerCase()+" "+self.getHoverClass()+'" href="#">'+window.LinktoolData.global[i].countries[j].country+"</a></li>").addClass("dropdown-content").addClass(i.toLowerCase()).addClass("mbc-hide");$countryLi.data("countryData",window.LinktoolData.global[i].countries[j]),$countryLi.find(".mbc-country-link").on("click",$.proxy(this.onCountrySelected,this)),$countryList.append($countryLi);var $selectedRegion,currentRegionCode;window.LinktoolData.global[i].countries[j].iso===window.LinktoolData.locale&&($countryList.find(".dropdown-content."+i.toLowerCase()).removeClass("mbc-hide"),$selectedRegion=$dropdown.find('option[value=".'+i.toLowerCase()+'"]'),currentRegionCode=i.toLowerCase(),this.countryData=window.LinktoolData.global[i].countries[j]);
}}$element.find(".mbc-dropdown-wrapper").data("plugin").initDropdown(),$dropdown.on("change",$.proxy(this.onCountryDropdownClicked,this)),$element.find(".mbc-dropdown-wrapper").data("plugin").updateSelectedItem("."+currentRegionCode),this.initCountryLink()},this.initCountryLink=function(){var linkName,linkObj,data;if(self.countryData){data=self.countryData,data.country&&self.$initState.find(".label-country-name").text(" "+data.country),data&&data.link&&(linkName=data.link.replace(/.*?:\/\//g,""),"/"==linkName.slice(-1)&&(linkName=linkName.substr(0,linkName.length-1)),linkObj=data.link?'<div class="link-container"><a data-analytics-linkcategory="conversion" data-analytics-linkname="emb-homepage" data-analytics-linkposition="header" href="'+data.link+'" target="_blank" class="mbc-btn mbc-external mbc-country-link '+self.getHoverClass()+'">'+linkName+"</a></div>":"");var textObj=data.contact||"";if(self.$initState.find(".mbc-container-country-info").empty(),linkObj)self.$initState.find(".mbc-container-country-info").append(linkObj);else{var emails=textObj.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]{2,8})/gi),www=textObj.match(/(w+\.[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]{2,8})/gi);if(emails)for(var i=0;i<emails.length;i++)textObj=textObj.replace(emails[i],'<a href="mailto:'+emails[i]+'" class="mbc-mail-link mbc-hover">'+emails[i]+"</a>");www&&(textObj=textObj.replace(www,'<a href="http://'+www+'" target="_blank" class="mbc-arrow-link mbc-external">'+www+"</a>")),self.$initState.find(".mbc-container-country-info").append(textObj).append("<br>"),self.$initState.find(".mbc-container-country-info").find(".country-link.basic").addClass("mbc-arrow-link mbc-external mbc-hover")}}},this.onChangeCountryClicked=function(e){e.preventDefault(),this.prepareCountryState(),this.swapState(this.$currentState,this.$countryState)},this.onCloseCountryStateClicked=function(e){e&&e.preventDefault(),this.prepareInitState(),this.swapState(this.$currentState,this.$initState)},this.swapState=function($currentState,$nextState){TweenMax.to(this.$currentState,.1,{autoAlpha:0,ease:this.easing,onComplete:this.showState,onCompleteParams:[$currentState,$nextState],onCompleteScope:this})},this.showState=function($currentState,$nextState){$currentState.css({display:"none"}),$nextState.css({display:"block"}),this.$currentState=$nextState,this.slideContainerToTargetHeight(this.fadeInState)},this.fadeInState=function(){TweenMax.to(this.$currentState,.6,{autoAlpha:1,ease:this.easing})},this.onCountryDropdownClicked=function(e,noAnimation){this.$el.find(".dropdown-content").addClass("mbc-hide");var countryClass=$(e.target).val();this.$el.find(".dropdown-content"+countryClass).removeClass("mbc-hide"),noAnimation!==!0&&(TweenMax.killTweensOf(this.$countryListContainer),TweenMax.killDelayedCallsTo(this.slideContainerToTargetHeight),TweenMax.set(this.$countryListContainer,{autoAlpha:0}),TweenMax.delayedCall(.15,this.slideContainerToTargetHeight,[],this),TweenMax.to(this.$countryListContainer,.4,{autoAlpha:1,ease:Sine.easeOut,delay:.4}))},this.onCountrySelected=function(e){e.preventDefault(),this.countryData=$(e.currentTarget).parent().data("countryData"),this.prepareInitState(),this.swapState(this.$currentState,this.$initState)},this.prepareCountryState=function(){},this.prepareInitState=function(){this.initCountryLink()},this.slideContainerToTargetHeight=function(onComplete){var onCompleteFunc=onComplete?onComplete:function(){};this.targetHeight=this.$wrapper.innerHeight(),TweenMax.to(this.$flyout,.5,{height:this.targetHeight,ease:Sine.easeOut,onComplete:onCompleteFunc,onCompleteScope:this})},this.show=function(){self.$flyout.removeClass("mbc-hide"),self.$el.find(".mbc-flyout-toggle").addClass("mbc-active"),TweenMax.set(self.$flyout,{height:self.$wrapper.innerHeight()}),TweenMax.killDelayedCallsTo(self.hide),$__WINDOW__.trigger("yt.video.hide")},this.hide=function(){this.$currentState===this.$countryState&&(this.$currentState.css({display:"none"}),this.$initState.css({display:"block"}),TweenMax.set(this.$initState,{autoAlpha:1}),this.$currentState=this.$initState,this.$flyout.attr("style","")),this.$el.find(".mbc-flyout-toggle").removeClass("mbc-active"),this.$flyout.addClass("mbc-hide"),$__WINDOW__.trigger("yt.video.show")},this.onMouseLeave=function(e){TweenMax.delayedCall(CountryChooser.CLOSE_DELAY,this.hide,[],this)},this.onTouchToggle=function(e){return e.preventDefault(),self.isMobile()?void self.onOpenCountryChooserClicked():void(this.$flyout.hasClass("mbc-hide")?(this.show(),$__DOCUMENT__.on("click",self.closeElement)):(this.hide(),$__DOCUMENT__.off("click",self.closeElement)))},this.closeElement=function(e){e.isTrigger||$(e.target).parent().is("a")||$(e.target).parents().is(".mbc-country-chooser")||(self.$currentState===self.$countryState&&(self.$currentState.css({display:"none"}),self.$initState.css({display:"block"}),TweenMax.set(self.$initState,{autoAlpha:1}),self.$currentState=self.$initState,self.$flyout.attr("style","")),self.$el.find(".mbc-flyout-toggle").removeClass("mbc-active"),self.$flyout.addClass("mbc-hide"),$__DOCUMENT__.off("click",self.closeElement),$__WINDOW__.trigger("yt.video.show"))},this.isMobile=function(){return"mobile"===wpmbcom.helper.browser.device()},this.onOpenCountryChooserClicked=function(){var $currentCountryContent=$('<div class="mbc-mobile-country-chooser"></div>');$currentCountryContent.append(self.$initState.clone(!0)),$currentCountryContent.find(".mbc-btn.change-country").remove(),$currentCountryContent.find(".mbc-btn.mbc-country-link").addClass("mbc-white");for(var $options=self.$countryState.find(".mbc-dropdown-wrapper select option"),$regionList=$('<ul class="mbc-region-list"></ul>'),i=0;i<$options.length;i++){var $li=$('<li><a href="#" class="mbc-main-nav-link mbc-item-with-children '+self.getHoverClass()+'" data-value="'+$($options[i]).attr("value")+'">'+$($options[i]).text()+"</a></li>");$regionList.append($li)}Modernizr.touch?$regionList.find("a").hammer().on("tap",self.onMobileRegionSelected):$regionList.find("a").on("click",self.onMobileRegionSelected),$currentCountryContent.append($regionList);var title=$element.find(".mbc-flyout-toggle").text();$(window).trigger("show_next_navi_level",[title,$currentCountryContent])},this.onMobileRegionSelected=function(e){e.preventDefault();var regionClass=$(e.target).data("value"),regionTitle=$(e.target).text();self.$el.find(".dropdown-content").addClass("mbc-hide"),self.$el.find(".dropdown-content"+regionClass).removeClass("mbc-hide");var $naviContent=$("<ul></ul>"),$selectedCountries=self.$countryListContainer.find("li"+$(e.target).data("value")).clone(!0);$selectedCountries.find("a").addClass("mbc-main-nav-link mbc-item-with-children "+self.getHoverClass()),$selectedCountries.find("a").off(),Modernizr.touch?$selectedCountries.find("a").hammer().on("tap",self.onMobileCountrySelected):$selectedCountries.find("a").on("click",self.onMobileCountrySelected),$naviContent.append($selectedCountries),$(window).trigger("show_next_navi_level",[regionTitle,$naviContent])},this.onMobileCountrySelected=function(e){e.preventDefault(),self.countryData=$(e.currentTarget).parent().data("countryData"),self.initCountryLink();var $currentCountryContent=$('<div class="mbc-mobile-country-chooser"></div>');$currentCountryContent.append(self.$initState.clone(!0)),$currentCountryContent.find(".mbc-btn.change-country").remove(),$currentCountryContent.find(".mbc-btn.mbc-country-link").addClass("mbc-white");var title=$element.find(".mbc-flyout-toggle").text();$(window).trigger("show_next_navi_level",[title,$currentCountryContent])},this}}(this.window,this.jQuery),function(window,$){"use strict";window.AdrivoStats=function(){var element,$element,options,self=this;return this.defaults={type:"AMG F1"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.renderTables=function(){self.$tables.jScrollPane({showArrows:!1,autoReinitialise:!0,hideFocus:!0})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$tables=self.$element.find(".mbc-adrivo-tables-wrapper"),self.renderTables()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TvChannels=function(){var element,$element,options,$listWrapper,$activeItem,selectedChannel,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){var initialWidth=$element.find(".mbc-video-filter-channels").width();$element.width(initialWidth),$element.find(".mbc-video-filter-channels").css({width:"100%"}),config.isIframe===!0&&$__HTML__.width()>800&&self.$element.parents("li").find(".mbc-video-filter-buttons").height(self.$element.parents("li").next().height()-41)},this.ondevicechange=function(){$element.hasClass("mbc-open")&&self.toggleOpenState()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$__WINDOW__.on("mbc.yt.loadplaylist.ready",function(){self.onresize()}),selectedChannel=$element.find(".mbc-video-filter-channels .mbc-channel-link").first().parent(),$listWrapper=$element.find(".mbc-channels-wrapper"),$activeItem=$(".mbc-selected-channel a"),Modernizr.touch?($element.find(".mbc-selected-channel a").hammer().on("tap",this.onSelectedItemClicked),$element.find(".mbc-video-filter-channels .mbc-channel-link").hammer().on("tap",this.onItemSelected),$element.find("a").on("click",wpmbcom.helper.preventDefaultLinkEvent)):($element.find(".mbc-selected-channel a").on("click",this.onSelectedItemClicked),$element.find(".mbc-video-filter-channels .mbc-channel-link").on("click",this.onItemSelected)),this.updateSelectedItem(selectedChannel)},this.updateSelectedItem=function($channel){$listWrapper.find(".mbc-active").removeClass("mbc-active"),$channel.addClass("mbc-active"),$activeItem.find(".label").text($channel.text())},this.onItemSelected=function(e){e.preventDefault(),selectedChannel=$(e.target).parent(),window.tvPlaylistName=$(this).text(),$__HTML__.hasClass("mobile")?($__WINDOW__.trigger("mbc.yt.loadplaylist.mobile",$(this).parent().data("playlist")),$__WINDOW__.trigger("mbc.yt.loadplaylist.desktop",$(this).parent().data("playlist"))):($__WINDOW__.trigger("mbc.yt.loadplaylist.desktop",$(this).parent().data("playlist")),$__WINDOW__.trigger("mbc.yt.loadplaylist.mobile",$(this).parent().data("playlist"))),self.updateSelectedItem(selectedChannel),self.toggleOpenState()},this.onSelectedItemClicked=function(e){e.preventDefault(),self.toggleOpenState()},this.toggleOpenState=function(){$element.toggleClass("mbc-open"),$element.hasClass("mbc-open")?($__WINDOW__.trigger("mbc.yt.filter.open"),$listWrapper.height($element.find(".mbc-video-filter-channels").outerHeight())):($__WINDOW__.trigger("mbc.yt.filter.close"),$listWrapper.height($element.find(".mbc-channel-item").first().outerHeight()))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.YTcarPlaylists=function(){var element,$element,options,self=this;return this.defaults={key:"value",isIframe:!1},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.ytError=function(){},this.getPlaylistID=function(json){self.data=json.items;for(var i=0;i<self.data.length;i++)for(var j=0;j<self.playlistNames.length;j++)self.playlistNames[j]==self.data[i].snippet.title&&(self.maxItems++,self.getPlaylistIinfo(self.data[i].id,self.data[i].snippet.title))},this.parseMultichannelPlaylists=function(json){if(self.playlistCounter++,self.multiChannelPlaylists.push(json.items),self.playlistCounter==self.feeds.length){var dump=[];for(var i in self.multiChannelPlaylists)dump=dump.concat(self.multiChannelPlaylists[i]);self.multiChannelPlaylists=dump,self.getMultiChannelPlaylistIDs(self.multiChannelPlaylists)}},this.getMultiChannelPlaylistIDs=function(json){self.data=json;for(var i=0;i<self.data.length;i++)for(var j=0;j<self.playlistNames.length;j++)self.playlistNames[j]==self.data[i].snippet.title&&(self.maxItems++,self.getPlaylistIinfo(self.data[i].id,self.data[i].snippet.title))},this.getPlaylistIinfo=function(id,title){var feed="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2CcontentDetails%2Cid%2Cstatus&maxResults=50&order=date&playlistId="+id+"&key="+self.apiKey;$.ajax({url:feed,dataType:"jsonp",success:function(data){self.generatePlaylists(data,title)},error:self.ytError})},this.generatePlaylists=function(data,title){var thumb,id=0;"private"==data.items[0].status.privacyStatus&&(id=1),data.items[id].snippet.hasOwnProperty("thumbnails")&&(thumb=data.items[id].snippet.thumbnails.hasOwnProperty("medium")?data.items[id].snippet.thumbnails.medium.url:data.items[id].snippet.thumbnails["default"].url),self.parsePlaylists(title,thumb,data.pageInfo.totalResults,data.items[id].snippet.playlistId),self.itemCount==self.maxItems-1&&self.renderComplete(),self.itemCount++},this.renderComplete=function(){setTimeout(function(){$__HTML__.hasClass("Explorer8")&&($("a.mbc-yt-car-playlist-link").on("mouseover",function(){$(this).find(".mbc-info-holder").css({visibility:"visible"})}),$("a.mbc-yt-car-playlist-link").on("mouseout",function(){$(this).find(".mbc-info-holder").css({visibility:"hidden"})}))},1200);var $dump=$("#mbc-car-playlist li").sort(self.asc_sort);self.$wrapper.empty(),self.$wrapper.append($dump),$dump=null},this.asc_sort=function(a,b){return $(b).text()<$(a).text()?1:-1},this.parsePlaylists=function(name,thumb,count,id){var output="",target="_blank";output+='<li class="mbc-column">',output+='<div class="item mbc-tv-overlay">',output+='<a class="mbc-yt-car-playlist-link" data-analytics-linkcategory="yt-playlist" data-analytics-linkname="'+name.toLowerCase()+'" data-analytics-linkposition="tv" href="//www.youtube.com/watch?v='+thumb.split("/")[4]+"&list="+id+'" target="'+target+'">',output+='<span class="mbc-img-holder">',output+='<img src="'+thumb+'" alt="">',output+='<span class="mbc-item-headline">',output+="<h4>"+name+"</h4>",output+="</span>",output+="</span>",output+='<span class="mbc-info-holder">',output+='<h3 class="mbc-icon-headline-55x3 mbc-icon">'+count+" Videos</h3>",output+='<span class="mbc-hover mbc-icon mbc-button mbc-icon-no-hover-icon mbc-icon-small-arrow-right">'+config.tv.playall+"</span>",output+="</span>",output+="</a>",output+="</div>",output+="</li>",self.$wrapper.append(output)},this.loadPlaylist=function(feed){$.ajax({url:feed,dataType:"jsonp",success:function(data){self.getPlaylistID(data)},error:self.ytError})},this.loadPlaylists=function(feeds){for(var i=0;i<feeds.length;i++)$.ajax({url:feeds[i],dataType:"jsonp",success:function(data){self.parseMultichannelPlaylists(data)},error:self.ytError})},this.setup=function(){if(element=this.element,$element=this.$element,options=this.options,self.apiKey=config.tv.api,self.playlistNames=config.tv.playlists,self.channelID=config.tv.channelID,self.channelIDs=[],self.feeds=[],self.multiChannelPlaylists=[],self.playlistCounter=0,self.itemCount=0,self.maxItems=0,self.itemNames=[],self.$wrapper=self.$element.find("#mbc-car-playlist"),self.channelID.indexOf(",")>=-1)if(self.channelIDs=self.channelID.split(","),self.channelID=self.channelIDs[0],self.channelIDs[0]==self.channelIDs[1])self.feeds.push("https://www.googleapis.com/youtube/v3/playlists?part=id,snippet&channelId="+self.channelID+"&maxResults=50&key="+self.apiKey);else for(var i=0;i<self.channelIDs.length;i++)self.feeds.push("https://www.googleapis.com/youtube/v3/playlists?part=id,snippet&channelId="+self.channelIDs[i]+"&maxResults=50&key="+self.apiKey);else self.feeds.push("https://www.googleapis.com/youtube/v3/playlists?part=id,snippet&channelId="+self.channelID+"&maxResults=50&key="+self.apiKey);self.channelIDs.length>1?this.loadPlaylists(self.feeds):this.loadPlaylist(self.feeds[0])},this}}(this.window,this.jQuery),function(window,$){"use strict";window.FilterCategory=function(){var element,$element,options,$listWrapper,$activeItem,selectedCategory,self=this;return this.defaults={defaultCategoryIsFirst:!0},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){var initialWidth=$element.find(".mbc-filter-categories").width();$element.width(initialWidth),$element.find(".mbc-filter-categories").css({width:"100%"})},this.ondevicechange=function(){$element.hasClass("mbc-open")&&self.toggleOpenState()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,selectedCategory=$element.find(".mbc-filter-categories .mbc-active"),!selectedCategory.length&&options.defaultCategoryIsFirst&&(selectedCategory=$element.find(".mbc-filter-categories .mbc-category-link").first().parent()),$listWrapper=$element.find(".mbc-category-wrapper"),$activeItem=$element.find(".mbc-selected-category a");var initialWidth=$element.find(".mbc-filter-categories").width();$element.width(initialWidth),$element.find(".mbc-filter-categories").css({width:"100%"}),$element.find(".mbc-selected-category a").on("click",this.onSelectedItemClicked),$element.find(".mbc-filter-categories .mbc-category-link").on("click",this.onItemSelected),this.updateSelectedItem(selectedCategory)},this.updateSelectedItem=function($category){$listWrapper.find(".mbc-active").removeClass("mbc-active"),$category.addClass("mbc-active"),$activeItem.find(".label").text($category.text())},this.onItemSelected=function(e){selectedCategory=$(e.target).parent(),self.updateSelectedItem(selectedCategory),self.toggleOpenState()},this.onSelectedItemClicked=function(e){e.preventDefault(),self.toggleOpenState()},this.toggleOpenState=function(){$element.toggleClass("mbc-open"),$element.hasClass("mbc-open")?$listWrapper.height($element.find(".mbc-filter-categories").outerHeight()):$listWrapper.height($element.find(".mbc-category-item").first().outerHeight())},this}}(this.window,this.jQuery),function(window,$){"use strict";window.YTrelatedPlaylists=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.ytError=function(){},this.parseAMGF1=function(json){var $el=$("#mbc-yt-related-2");$el.find(".mbc-teaser-head").text(json.items[0].snippet.title),$el.find(".mbc-teaser-desc").text(json.items[0].snippet.description),$el.find(".mbc-teaser-img").attr("src",json.items[0].snippet.thumbnails.medium.url);var feed="https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&channelId="+self.channelIDAMGF1+"&maxResults=50&key="+self.apiKey;self.loadPlaylist(feed,self.parseAMGF1Playlist)},self.parseAMGF1Playlist=function(json){var $el=$("#mbc-yt-related-2");$el.find(".mbc-teaser-img").attr("src",json.items[0].snippet.thumbnails.medium.url),$el.find(".mbc-teaser-link").attr("href","//www.youtube.com/watch?v="+json.items[0].snippet.thumbnails.medium.url.split("/")[4]+"&list="+json.items[0].id)},this.parseVans=function(json){var $el=$("#mbc-yt-related-3");$el.find(".mbc-teaser-head").text(json.items[0].snippet.title),$el.find(".mbc-teaser-desc").text(json.items[0].snippet.description),$el.find(".mbc-teaser-img").attr("src",json.items[0].snippet.thumbnails.medium.url);var feed="https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&channelId="+self.channelIDVans+"&maxResults=50&key="+self.apiKey;self.loadPlaylist(feed,self.parseVansPlaylist)},self.parseVansPlaylist=function(json){var $el=$("#mbc-yt-related-3");$el.find(".mbc-teaser-img").attr("src",json.items[0].snippet.thumbnails.medium.url),$el.find(".mbc-teaser-link").attr("href","//www.youtube.com/watch?v="+json.items[0].snippet.thumbnails.medium.url.split("/")[4]+"&list="+json.items[0].id)},this.parseMB=function(json){var $el=$("#mbc-yt-related-1");$el.find(".mbc-teaser-img").attr("src",json.items[0].snippet.thumbnails.medium.url),$el.find(".mbc-teaser-link").attr("href","//www.youtube.com/watch?v="+json.items[0].snippet.thumbnails.medium.url.split("/")[4]+"&list="+json.items[0].id)},this.loadPlaylist=function(feed,functionname){$.ajax({url:feed,dataType:"jsonp",success:function(data){functionname(data)},error:self.ytError})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.apiKey=config.tv.api,self.channelID=config.tv.channelID,self.channelIDVans=config.tv.relatedChannels[0],self.channelIDAMGF1=config.tv.relatedChannels[1],self.channelIDmb=config.tv.relatedChannels[2];var vansfeed="https://www.googleapis.com/youtube/v3/channels?part=snippet&id="+self.channelIDVans+"&maxResults=50&key="+self.apiKey,amgf1feed="https://www.googleapis.com/youtube/v3/channels?part=snippet&id="+self.channelIDAMGF1+"&maxResults=50&key="+self.apiKey,mbfeed="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2CcontentDetails%2Cid%2Cstatus&maxResults=50&playlistId="+self.channelIDmb+"&key="+self.apiKey;self.loadPlaylist(vansfeed,self.parseVans),self.loadPlaylist(amgf1feed,self.parseAMGF1),self.loadPlaylist(mbfeed,self.parseMB)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.DropdownMBC=function(){var element,$element,options,self=this;return this.$select,this.$listWrapper,this.defaults={key:"value",initialWord:""},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,0===$element.find("select").length&&$element.append("<select></select>"),$element.data("plugin",this),this.initDropdown()},this.initDropdown=function(){$element.find(":not(select,option,optgroup)").off().remove(),$element.prepend('<div class="mbc-selected-item"><a class="mbc-item-link" href="#"></a></div>'),$element.prepend('<div class="mbc-list-wrapper"><ul class="mbc-list"></ul></div>'),self.$select=$element.find("select"),self.$listWrapper=$element.find(".mbc-list-wrapper");var $list=$element.find(".mbc-list");if(self.initialSetup=!0,self.renderListElements(self.$select,$list),"auto"===options.width){$element.addClass("mbc-auto-width");var initialWidth=$list.width();$element.width(initialWidth),$list.css({"min-width":initialWidth+"px"})}$("html").on("click",self.onClickedOutside),""!=self.options.initialWord?($element.find(".mbc-selected-item .mbc-item-link").text(self.options.initialWord),self.updateSelectedItem(250,!0)):self.updateSelectedItem(self.$select.val(),!0),$element.find(".mbc-selected-item .mbc-item-link").on("click",self.onOpenDropdownClicked),$list.find(".mbc-item-link:not(.mbc-has-children)").on("click",self.onItemSelected),self.$select.off("change.dropdown").on("change.dropdown",self.onSelectChanged)},this.renderListElements=function($selectContext,$currentList){$selectContext.find(">option,>optgroup").each(function(index,el){var $el=$(el);if($el.is("optgroup")){var $liWithChildren=$('<li class="mbc-list-item mbc-has-children"><a class="mbc-item-link mbc-has-children" href="javascript:;">'+$el.attr("label")+"</a><ul></ul></li>");$currentList.append($liWithChildren),self.renderListElements($el,$liWithChildren.find("ul"))}else $currentList.append('<li class="mbc-list-item"><a class="mbc-item-link" data-value="'+$el.attr("value")+'" href="#">'+$el.text()+"</a></li>")})},this.onClickedOutside=function(e){$element.hasClass("mbc-open")&&self.toggleOpenState()},this.onOpenDropdownClicked=function(e){e.preventDefault(),e.stopPropagation(),self.toggleOpenState()},this.onItemSelected=function(e){e.preventDefault(),e.stopPropagation();var selectedValue=$(e.target).data("value");self.updateSelectedItem(selectedValue),self.toggleOpenState()},this.toggleOpenState=function(){$element.toggleClass("mbc-open"),$element.hasClass("mbc-open")?(self.$listWrapper.height($element.find(".mbc-list").outerHeight()).addClass("mbc-open"),$__WINDOW__.trigger("mbc-dropdown-open")):(self.$listWrapper.height($element.height()),$__WINDOW__.trigger("mbc-dropdown-close"))},this.updateSelectedItem=function(value,initial){$element.find(".mbc-list-item").removeClass("mbc-selected"),$element.find('.mbc-list-item .mbc-item-link[data-value="'+value+'"]').parent().addClass("mbc-selected");var langText=$element.find(".mbc-list .mbc-selected .mbc-item-link").text();""!=self.options.initialWord&&self.initialSetup===!0?$element.find(".mbc-selected-item .mbc-item-link").text(self.options.initialWord):$element.find(".mbc-selected-item .mbc-item-link").text(langText),self.$select.val(value),self.$select.trigger("change",{selfTriggered:!0,initial:initial}),self.initialSetup=!1},this.onSelectChanged=function(e,options){options&&options.selfTriggered===!0||self.updateSelectedItem(self.$select.val())},this}}(this.window,this.jQuery),function(window,$){"use strict";window.DropdownMBCMultiple=function(){var element,$element,options,self=this;return this.$select,this.$listWrapper,this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,0===$element.find("select").length&&$element.append("<select></select>"),$element.data("plugin",this),self.langText="",self.categories=[],self.listCounter=0,this.initDropdown()},this.initDropdown=function(){$element.find(":not(select,option,optgroup)").off().remove(),$element.prepend('<div class="mbc-selected-item"><a class="mbc-item-link" href="#"></a></div>'),$element.prepend('<div class="mbc-list-wrapper"><ul class="mbc-list"></ul></div>'),self.$select=$element.find("select"),self.$listWrapper=$element.find(".mbc-list-wrapper");var $list=$element.find(".mbc-list");if(self.renderListElements(self.$select,$list),"auto"===options.width){$element.addClass("mbc-auto-width");var initialWidth=$list.width();$element.width(initialWidth),$list.css({"min-width":initialWidth+"px"})}$("html").on("click",self.onClickedOutside),self.$select.val()?self.updateSelectedItem(self.$select.val(),!0):self.updateSelectedItem([9999],!0),$element.find(".mbc-selected-item .mbc-item-link").on("click",self.onOpenDropdownClicked),$list.find(".mbc-item-link:not(.mbc-has-children)").on("click",self.onItemSelected),self.$select.off("change.dropdown").on("change.dropdown",self.onSelectChanged),$__WINDOW__.on("MBCmobileCalendarClear",function(){self.updateSelectedItem(self.$select.val(),!0)})},this.renderListElements=function($selectContext,$currentList){$selectContext.find(">option,>optgroup").each(function(index,el){var $el=$(el);if($el.is("optgroup")){var $liWithChildren=$('<li class="mbc-list-item mbc-has-children"><a class="mbc-item-link mbc-has-children" href="javascript:;">'+$el.attr("label")+"</a><ul></ul></li>");$currentList.append($liWithChildren),self.renderListElements($el,$liWithChildren.find("ul"))}else 0===self.listCounter?$currentList.append('<li class="mbc-list-item mbc-list-item-first"><a class="mbc-item-link" data-value="'+$el.attr("value")+'" href="#">'+$el.text()+"</a></li>"):$currentList.append('<li class="mbc-list-item"><a class="mbc-item-link" data-value="'+$el.attr("value")+'" href="#">'+$el.text()+"</a></li>");self.listCounter++})},this.onClickedOutside=function(e){$element.hasClass("mbc-open")&&self.toggleOpenState()},this.onOpenDropdownClicked=function(e){e.preventDefault(),e.stopPropagation(),self.toggleOpenState()},this.onItemSelected=function(e){e.preventDefault(),e.stopPropagation();var selectedValue=$(e.target).data("value");self.updateSelectedItem(selectedValue)},this.toggleOpenState=function(){$element.toggleClass("mbc-open"),$element.hasClass("mbc-open")?(window.clanedarFirstLoad=!1,self.$listWrapper.height($element.find(".mbc-list").outerHeight())):self.$listWrapper.height($element.height())},this.updateSelectedItem=function(value,initial){var isAll,isSelect=!1,initianlNull=!1,isIframeTablet="mobile"===mb_com.helper.browser.device()&&$__BODY__.width()>=700&&config.isIframe,browserId=window.wpmbcom.helper.browser.id;if(self.categories=self.$select.val(),$.isArray(value)&&9999===value[0]&&(initianlNull=!0),isAll="mobile"!==mb_com.helper.browser.device()||isIframeTablet?$element.find(".mbc-list-item.mbc-list-item-first").is($element.find('.mbc-list-item .mbc-item-link[data-value="'+value+'"]').parent()):!1,(!self.categories||self.categories.length<1||null==self.categories[0])&&(self.categories=[],self.categories.push("")),(!isAll&&"mobile"!==mb_com.helper.browser.device()||!isAll&&isIframeTablet)&&($.isArray(self.categories)||(self.categories=[self.$select.val()]),!$__HTML__.hasClass("mobile")||isIframeTablet))if($.isArray(self.categories)&&self.renderSelected(self.categories),$element.find('.mbc-list-item .mbc-item-link[data-value="'+value+'"]').parent().hasClass("mbc-selected"))$element.find('.mbc-list-item .mbc-item-link[data-value="'+value+'"]').parent().removeClass("mbc-selected"),self.categories.splice($.inArray(String(value),self.$select.val()),1);else if($element.find('.mbc-list-item .mbc-item-link[data-value="'+value+'"]').parent().addClass("mbc-selected"),value&&""!=value&&!initial)if($.isArray(value))for(var k=0;k<value.length;k++)self.categories.push(String(value[k]));else self.categories.push(String(value));initial===!0&&initianlNull&&"Explorer8"!==browserId&&"Explorer9"!==browserId?(self.selectAllCategories(),isSelect=!0,$element.find(".mbc-selected-item .mbc-item-link").text(config.translations.categories.all_events)):isAll&&!$__HTML__.hasClass("mobile")&&!initial||isIframeTablet&&!initial&&isAll?self.$element.find("ul.mbc-list li").eq(0).hasClass("mbc-selected")?(self.deselectAllCategories(),isSelect=!1):(self.selectAllCategories(),isSelect=!0):(self.$select.val(self.categories),self.$select.trigger("change",{selfTriggered:!0,initial:initial})),isAll&&!initial?isSelect?$element.find(".mbc-selected-item .mbc-item-link").text(config.translations.categories.all_events):$element.find(".mbc-selected-item .mbc-item-link").text(config.translations.categories.select_category):initial&&self.categories.length<=1?$element.find(".mbc-selected-item .mbc-item-link").text(config.translations.categories.select_category):self.categories.length===self.$element.find("ul.mbc-list li").not(".mbc-has-children").length-1?($element.find(".mbc-selected-item .mbc-item-link").text(config.translations.categories.all_events),$element.find(".mbc-list-item.mbc-list-item-first").addClass("mbc-selected")):1==self.categories.length?1==self.categories.length&&""===self.categories[0]?$element.find(".mbc-selected-item .mbc-item-link").text(config.translations.categories.select_category):$element.find(".mbc-selected-item .mbc-item-link").text(self.categories.length+" "+config.translations.categories.categorie_single):-1!=$.inArray("",self.categories)?2==self.categories.length?$element.find(".mbc-selected-item .mbc-item-link").text(self.categories.length-1+" "+config.translations.categories.categorie_single):$element.find(".mbc-selected-item .mbc-item-link").text(self.categories.length-1+" "+config.translations.categories.categorie_multi):$element.find(".mbc-selected-item .mbc-item-link").text(self.categories.length+" "+config.translations.categories.categorie_multi),"Explorer8"!==browserId&&"Explorer9"!==browserId&&$__WINDOW__.trigger("calender_trigger_initial_value"),$__WINDOW__.trigger("reset_calendar_pager")},this.submitOnClose=function(){self.$select.val(self.categories),self.$select.trigger("change",{selfTriggered:!0,initial:!1})},this.renderSelected=function(cats){for(var $list=self.$element.find("ul.mbc-list li"),$val=cats,i=0;i<self.categories.length;i++)""!==$val[i]&&$list.find("a[data-value='"+$val[i]+"']").parent().addClass("mbc-selected")},this.selectAllCategories=function(){for(var $item,$list=self.$element.find("ul.mbc-list li"),cats=[],i=0;i<$list.length;i++)$item=$list.eq(i),$item.hasClass("mbc-has-children")||0===i||($list.eq(i).addClass("mbc-selected"),cats.push(String($list.eq(i).find("a").data("value")))),0===i&&($list.eq(i).find("a").text(config.translations.categories.deselect_all_events),$list.eq(i).addClass("mbc-selected"));
self.$select.val(cats),self.$select.trigger("change",{selfTriggered:!0,initial:!1})},this.deselectAllCategories=function(){for(var $item,$list=self.$element.find("ul.mbc-list li"),cats=[""],i=0;i<$list.length;i++)$item=$list.eq(i),$item.hasClass("mbc-has-children")||$list.eq(i).removeClass("mbc-selected"),0===i&&$list.eq(i).find("a").text(config.translations.categories.select_all_events);self.$select.val(cats),self.$select.trigger("change",{selfTriggered:!0,initial:!1})},this.onSelectChanged=function(e,options){options&&options.selfTriggered===!0||self.updateSelectedItem(self.$select.val())},this}}(this.window,this.jQuery),function(window,$){"use strict";window.YTvideoTiles=function(){var element,$element,options,self=this;return this.defaults={key:"value",state:"desktop"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){$__HTML__.width()<=800?self.$frame.height(self.$element.find(".mbc-video-lg.mbc-video-lg-mobile").height()):self.$frame.height(self.$element.height())},this.ondevicechange=function(){},this.ytPlaylists=function(json,search){var ids="";if(self.data=json.items,!json.hasOwnProperty("error")){for(var i=0;i<self.data.length;i++)ids+=search===!0?self.data[i].id.videoId:self.data[i].contentDetails.videoId,i<self.data.length-1&&(ids+=",");self.videoIDs=ids;var feed="https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,id,status,statistics&id="+self.videoIDs+"&maxResults=50&key="+self.apiKey;self.loadPlaylist(feed,self.parseVideos)}},this.parseVideos=function(json){self.videos=[];var ids=[];self.maxItems=json.items.length,self.maxItems>=9&&(self.maxItems=9);for(var i=0;i<json.items.length;i++)ids.push(json.items[i].statistics.viewCount);if(0==json.items.length)return setTimeout(function(){wpmbcom.helper.preloader.hide()},1e3),void setTimeout(function(){config.isIframe!==!0||$__HTML__.hasClass("mobile")||$__WINDOW__.trigger("mbc.yt.loadplaylist.ready")},1e3);if(self.maxItems>=9)self.videos.push(json.items[0],json.items[2],json.items[3],json.items[4],json.items[5],json.items[6],json.items[7],json.items[8],json.items[1]);else for(var k=0;k<self.maxItems;k++)self.videos.push(json.items[k]);self.renderPlaylist()},this.renderPlaylist=function(){for(var duration,titles=[],i=0;i<self.maxItems;i++)duration=self.convertTime(self.videos[i].contentDetails.duration),duration=self.dateObjFormatter(1e3*duration),TweenMax.to(self.$tiles[i],.5,{autoAlpha:1}),self.$tiles[i].find("h3").text(self.videos[i].snippet.title),titles.push(self.videos[i].snippet.title),self.$tiles[i].find("p.timer").text(duration),self.$tiles[i].find("a").data("video",self.videos[i].id),self.$tiles[i].find("a").data("data-analytics-linkname",self.convertToSlug(self.videos[i].snippet.title)),self.videos[i].snippet.thumbnails.hasOwnProperty("standard")?self.$tiles[i].find("img").attr("src",self.videos[i].snippet.thumbnails.standard.url):self.$tiles[i].find("img").attr("src",self.videos[i].snippet.thumbnails["default"].url);if(self.maxItems<9)for(var k=self.maxItems;9>k;k++)TweenMax.to(self.$tiles[k],.5,{autoAlpha:0});setTimeout(function(){wpmbcom.helper.preloader.hide()},1e3),setTimeout(function(){config.isIframe!==!0||$__HTML__.hasClass("mobile")||$__WINDOW__.trigger("mbc.yt.loadplaylist.ready")},1e3)},this.convertToSlug=function(text){return text.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")},this.playVideo=function(e){e.preventDefault(),self.videoName=self.convertToSlug($(this).find(".mbc-info-holder h3").text()),digitalData.page.pageInfo.trackingIdentifier=self.trackingIdentifier+"-videoview",digitalData.page.pageInfo.template="tv-videoview",digitalData.page.content={},digitalData.page.content.type="mbtv-video",digitalData.page.content.contentTitle=self.videoName,digitalData.page.content.youtubeID=$(this).data("video"),digitalData.page.content.metaCategories=self.convertToSlug(window.tvPlaylistName),digitalData.page.content.primaryCategory="tv";var playlist=self.bsearch?null:self.playlistID,type=self.bsearch?null:"playlist";self.player&&self.player.destroy();var iHeight=self.$element.height();$__HTML__.width()<=800?(self.$frame.height(self.$element.find(".mbc-video-lg.mbc-video-lg-mobile").height()),iHeight=self.$element.find(".mbc-video-lg.mbc-video-lg-mobile").height()):self.$frame.height(iHeight),self.player=new YT.Player(self.videoElement,{videoId:$(this).data("video"),playerVars:{listType:type,list:playlist,modestbranding:1,showinfo:0,wmode:"transparent",color:"white",height:iHeight},events:{onReady:self.onPlayerReady,onStateChange:self.onVideoEvent}}),wpmbcom.helper.preloader.show(!0),(!Modernizr.touch||$__HTML__.hasClass("iPad")||$__HTML__.hasClass("mobile"))&&self.$frame.css({"z-index":"4"})},this.onPlayerReady=function(){self.playerReady=!0,wpmbcom.helper.preloader.hide(),TweenMax.to(self.$frame,.8,{alpha:1,onComplete:function(){Modernizr.touch||self.player.playVideo()}}),Modernizr.touch&&($__HTML__.width()>800?TweenMax.to(self.$element,.5,{paddingTop:self.$element.height()}):TweenMax.to(self.$element.find(".mbc-column.mbc-column-6.mbc-video-lg-mobile"),.5,{paddingTop:self.$element.find(".mbc-video-lg.mbc-video-lg-mobile").height()}),$("#video-iframe .close").css({display:"none"})),TweenMax.to([$__WINDOW__,$__DOCUMENT__],.5,{scrollTo:{y:0},ease:Sine.easeOut})},this.onVideoEvent=function(e){e.data===YT.PlayerState.ENDED?("undefined"!=typeof _satellite&&_satellite.track("mb_com_video_completed"),self.onVideoEnd()):e.data===YT.PlayerState.PLAYING&&"undefined"!=typeof _satellite&&(_satellite.track("mb_com_video_started"),self.setTimerInterval())},this.setTimerInterval=function(){var percentage=0,triggerOnce25=!1,triggerOnce50=!1,triggerOnce75=!1;self.playerInt=setInterval(function(){percentage=Math.round(self.player.getCurrentTime()/self.player.getDuration()*100),percentage>=25&&50>percentage?triggerOnce25===!1&&("undefined"!=typeof _satellite&&_satellite.track("mb_com_video_25"),triggerOnce25=!0):percentage>=50&&75>percentage?triggerOnce50===!1&&("undefined"!=typeof _satellite&&_satellite.track("mb_com_video_50"),triggerOnce50=!0):percentage>=75&&triggerOnce75===!1&&("undefined"!=typeof _satellite&&_satellite.track("mb_com_video_75"),triggerOnce75=!0)},1e3)},this.onVideoEnd=function(){self.player&&(1==self.bsearch?(self.closeVideo(),Modernizr.touch&&($__HTML__.hasClass("mobile")?TweenMax.to(self.$element.find(".mbc-column.mbc-column-6.mbc-video-lg-mobile"),.5,{paddingTop:0}):TweenMax.to(self.$element,.5,{paddingTop:0})),digitalData.page.pageInfo.template="tv"):Modernizr.touch||self.player.nextVideo())},this.closeVideo=function(){TweenMax.to(self.$frame,.8,{alpha:0,onComplete:function(){self.$frame.css({"z-index":"0"})}}),self.player&&(self.player.stopVideo(),digitalData.page.pageInfo.template="tv",digitalData.page.pageInfo.trackingIdentifier=self.trackingIdentifier,digitalData.page.pageInfo.template=self.trackingTemplate,digitalData.page.content=null)},this.showPlayer=function(){self.player&&$__HTML__.hasClass("mobile")&&(self.$frame.find("iframe").show(0),self.$frame.find(".mbc-video-placeholder").css({backgroundColor:"#transparent"}))},this.hidePlayer=function(){self.player&&$__HTML__.hasClass("mobile")&&(self.$frame.find("iframe").hide(0),self.$frame.find(".mbc-video-placeholder").css({backgroundColor:"#000000"}))},this.convertTime=function(duration){var a=duration.match(/\d+/g);return duration.indexOf("M")>=0&&-1==duration.indexOf("H")&&-1==duration.indexOf("S")&&(a=[0,a[0],0]),duration.indexOf("H")>=0&&-1==duration.indexOf("M")&&(a=[a[0],0,a[1]]),duration.indexOf("H")>=0&&-1==duration.indexOf("M")&&-1==duration.indexOf("S")&&(a=[a[0],0,0]),duration=0,3==a.length&&(duration+=3600*parseInt(a[0]),duration+=60*parseInt(a[1]),duration+=parseInt(a[2])),2==a.length&&(duration+=60*parseInt(a[0]),duration+=parseInt(a[1])),1==a.length&&(duration+=parseInt(a[0])),duration},self.dateObjFormatter=function(ms){var date=new Date(ms),mm=date.getMinutes(),ss=date.getSeconds();return 10>mm&&(mm="0"+mm),10>ss&&(ss="0"+ss),mm+":"+ss},this.loadPlaylist=function(feed,funct,search){wpmbcom.helper.preloader.show(!0),$.ajax({url:feed,dataType:"jsonp",success:function(data){funct(data,search)},error:self.ytError})},this.loadPlaylistbyID=function(e,id){self.playlistID=id,self.bsearch=!1,self.$element.find(".mbc-latest-videos").removeClass("mbc-active"),self.$element.find(".mbc-most-videos").removeClass("mbc-active"),wpmbcom.helper.preloader.show(!0);var feed="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2CcontentDetails%2Cid%2Cstatus&maxResults=50&playlistId="+id+"&key="+self.apiKey,link="https://www.youtube.com/playlist?list="+id+"&feature=plcp";self.$element.find(".playall").attr("href",link),$.ajax({url:feed,dataType:"jsonp",success:function(data){self.ytPlaylists(data)},error:self.ytError})},this.latestVideos=function(e){e&&e.preventDefault(),self.bsearch=!0;var feed="https://www.googleapis.com/youtube/v3/search?part=snippet&channelId="+self.channelID+"&maxResults=50&order=date&key="+self.apiKey;self.searchquery="channelId="+self.channelID+"&maxResults=50&order=date&key="+self.apiKey,self.loadPlaylist(feed,self.ytPlaylists,!0);var link="//www.youtube.com/user/MercedesBenzTV/videos?view=1";self.$element.find(".mbc-latest-videos").addClass("mbc-active"),self.$element.find(".mbc-most-videos").removeClass("mbc-active"),window.tvPlaylistName="latest-videos",setTimeout(function(){self.$element.find(".playall").attr("href",link)},300)},this.mostVideos=function(e){e.preventDefault(),self.bsearch=!0;var feed="https://www.googleapis.com/youtube/v3/search?part=snippet&channelId="+self.channelID+"&maxResults=50&order=viewCount&key="+self.apiKey;self.searchquery="channelId="+self.channelID+"&maxResults=50&order=date&key="+self.apiKey,self.loadPlaylist(feed,self.ytPlaylists,!0);var link="//www.youtube.com/user/MercedesBenzTV/videos?flow=grid&sort=p&view=0";self.$element.find(".mbc-latest-videos").removeClass("mbc-active"),self.$element.find(".mbc-most-videos").addClass("mbc-active"),window.tvPlaylistName="most-viewed",setTimeout(function(){self.$element.find(".playall").attr("href",link)},300)},this.onYouTubeAPIReady=function(){"mobile"===self.options.state?$__WINDOW__.on("mbc.yt.loadplaylist.mobile",self.loadPlaylistbyID):$__WINDOW__.on("mbc.yt.loadplaylist.desktop",self.loadPlaylistbyID),self.latestVideos()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.apiKey=config.tv.api,self.channelID=config.tv.channelID,self.channelID.indexOf(",")>=-1&&(self.channelIDs=self.channelID.split(","),self.channelID=self.channelIDs[0]),self.maxItems=9,self.playerReady=!1,self.videoElement=$("#mbc-yt-video").get(0),self.$tiles=[],self.bsearch=!1,self.trackingIdentifier=digitalData.page.pageInfo.trackingIdentifier,self.trackingTemplate=digitalData.page.pageInfo.template,self.playlistID="en"==config.lang?"PLB74147F39E0EE2B2":"PLjMMpQjWVCa5jU5L3p2ffiK_Rj9tAoNDW",Modernizr.touch?(self.$element.find("a.mbc-video-tile-link").hammer().on("click",self.playVideo),self.$element.find(".mbc-latest-videos").hammer().on("click",self.latestVideos),self.$element.find(".mbc-most-videos").hammer().on("click",self.mostVideos),self.$element.find("a.mbc-video-tile-link").on("click",wpmbcom.helper.preventDefaultLinkEvent)):(self.$element.find("a.mbc-video-tile-link").on("click",self.playVideo),self.$element.find(".mbc-latest-videos").on("click",self.latestVideos),self.$element.find(".mbc-most-videos").on("click",self.mostVideos)),self.$frame=$("#video-iframe");var id="PLB74147F39E0EE2B2",link="https://www.youtube.com/playlist?list="+id+"&feature=plcp";self.$element.find(".playall").attr("href",link);for(var i=0;i<self.maxItems;i++)self.$tiles.push(self.$element.find(".mbc-video-tile[data-id='"+i+"']"));self.$frame.find(".close").on("click",function(e){e.preventDefault(),self.closeVideo()}),$__WINDOW__.on("mbc.yt.filter.close",self.showPlayer),$__WINDOW__.on("mbc.yt.filter.open",self.hidePlayer),$__WINDOW__.on("yt.video.show",self.showPlayer),$__WINDOW__.on("yt.video.hide",self.hidePlayer),$(window).on("mbc_onYouTubeAPIReady",self.onYouTubeAPIReady),window.tvPlaylistName="en"==config.lang?"Vehicles":"Fahrzeuge"},this}}(this.window,this.jQuery),function(window,$){"use strict";window.WelcomeLayerMBC=function(){var element,$element,options,$wrapper,countryData,$countryInfo,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){var targetHeight=$wrapper.innerHeight();TweenMax.set($element,{height:targetHeight})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$countryInfo=$element.find(".country-info"),$wrapper=$element.find(".mbc-layer-wrapper"),$(window).on("linktool_ready",self.onLinktoolReady),$element.find("a.mbc-change-country").on("click",self.onChangeCountryClicked),$element.find("a.mbc-experience-now").on("click",self.onCloseBtnClicked),$element.find("a.mbc-close").on("click",self.onCloseBtnClicked)},this.onLinktoolReady=function(){Application.disclaimerCookieExists()?self.initModule():Helper.bindSignal(document,"c:layer:hide",self.initModule)},this.initModule=function(){$.cookie(WelcomeLayerMBC.SHOW_COOKIE_NAME)&&"1"!==$.cookie(WelcomeLayerMBC.SHOW_COOKIE_NAME)?self.$element.remove():TweenMax.delayedCall(WelcomeLayerMBC.SHOW_DELAY,self.show),self.parseCountryJSON(),self.initCountryLink()},this.parseCountryJSON=function(){for(var i in window.LinktoolData.global)for(var j in window.LinktoolData.global[i].countries)window.LinktoolData.global[i].countries[j].iso===window.LinktoolData.locale&&(countryData=window.LinktoolData.global[i].countries[j])},this.initCountryLink=function(){var linkName,linkObj,data;if(countryData){data=countryData,data.country&&$countryInfo.find(".label-country-name").text(" "+data.country),data&&data.link&&(linkName=data.link.replace("www5","www").replace("www3","www").replace("http://","").replace("https://","").split("/")[0],linkObj=data.link?'<a href="'+data.link+'" target="_blank" class="mbc-arrow-link mbc-white mbc-hover mbc-external mbc-country-link" data-analytics-linkcategory="conversion" data-analytics-linkname="emb-homepage" data-analytics-linkposition="header">'+linkName+"</a>":"");var textObj=data.contact||"";if($countryInfo.find(".container-country-info").empty(),linkObj)$countryInfo.find(".container-country-info").append(linkObj);else{var emails=textObj.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]{2,8})/gi),www=textObj.match(/(w+\.[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]{2,8})/gi);if(emails)for(var i=0;i<emails.length;i++)textObj=textObj.replace(emails[i],'<a href="mailto:'+emails[i]+'" class="mbc-mail mbc-hover mbc-country-link">'+emails[i]+"</a>");www&&(textObj=textObj.replace(www,'<a href="http://'+www+'" target="_blank">'+www+"</a>")),$countryInfo.find(".container-country-info").append(textObj).append("<br>")}}},this.onChangeCountryClicked=function(e){e.preventDefault(),$(window).trigger("open_country_chooser"),self.hide()},this.show=function(){TweenMax.set($element,{height:0}),$element.removeClass("mbc-hide"),TweenMax.killTweensOf($element),TweenMax.killTweensOf($wrapper);var targetHeight=$wrapper.innerHeight();TweenMax.to($element,WelcomeLayerMBC.FADE_IN_TIME,{height:targetHeight,ease:Sine.easeOut}),TweenMax.to($wrapper,.5,{alpha:1,ease:Sine.easeOut,delay:WelcomeLayerMBC.FADE_IN_TIME-.2})},this.hide=function(){$.cookie(WelcomeLayerMBC.SHOW_COOKIE_NAME,"0",{expires:1825,path:"/"}),TweenMax.killTweensOf($element),TweenMax.killTweensOf($wrapper),TweenMax.to($element,WelcomeLayerMBC.FADE_OUT_TIME,{height:0,ease:Sine.easeOut,delay:.2,onComplete:self.onHideComplete}),TweenMax.to($wrapper,.3,{alpha:0,ease:Sine.easeOut})},this.onCloseBtnClicked=function(e){e.preventDefault(),self.hide()},this.onHideComplete=function(){$element.addClass("mbc-hide")},this},WelcomeLayerMBC.SHOW_COOKIE_NAME="show_infobox",WelcomeLayerMBC.FADE_IN_TIME=.9,WelcomeLayerMBC.FADE_OUT_TIME=.7,WelcomeLayerMBC.SHOW_DELAY=2.5}(this.window,this.jQuery),function(window,$){"use strict";window.Sitemap=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.accordion=self.$element.find("li.page_item_has_children ul.children ul.children"),self.accordion.hide(0),self.accordion.parent().find("a:first").on("click",function(e){e.preventDefault();var $el=$(this).parent().find("ul.children");$el.toggleClass("mbc-active"),$el.hasClass("mbc-active")?($el.slideDown(500),$(this).addClass("active")):($el.slideUp(500),$(this).removeClass("active"))})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ArticleVideo=function(){var element,$element,options,self=this;return this.defaults={key:"value",videoid:"",autoplay:0,scrollToPlay:0,energy:!1},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.showPlayer=function(){($__HTML__.hasClass("mobile")||$__HTML__.hasClass("tablet")||$__HTML__.hasClass("iPad"))&&self.$frame.fadeIn(600)},this.hidePlayer=function(){($__HTML__.hasClass("mobile")||$__HTML__.hasClass("tablet")||$__HTML__.hasClass("iPad"))&&self.$frame.fadeOut(600)},this.onPlayerReady=function(){},this.setTimerInterval=function(){var percentage=0,triggerOnce25=!1,triggerOnce50=!1,triggerOnce75=!1;self.playerInt=setInterval(function(){percentage=Math.round(self.player.getCurrentTime()/self.player.getDuration()*100),percentage>=25&&50>percentage?triggerOnce25===!1&&("undefined"!=typeof _satellite&&_satellite.track("mb_com_video_25"),triggerOnce25=!0):percentage>=50&&75>percentage?triggerOnce50===!1&&("undefined"!=typeof _satellite&&_satellite.track("mb_com_video_50"),triggerOnce50=!0):percentage>=75&&triggerOnce75===!1&&("undefined"!=typeof _satellite&&_satellite.track("mb_com_video_75"),triggerOnce75=!0)},1e3)},this.onVideoEvent=function(e){switch(e.data){case YT.PlayerState.ENDED:"undefined"!=typeof _satellite&&_satellite.track("mb_com_video_completed"),clearInterval(self.playerInt);break;case YT.PlayerState.PAUSED:clearInterval(self.playerInt);break;case YT.PlayerState.PLAYING:"undefined"!=typeof _satellite&&_satellite.track("mb_com_video_started"),self.setTimerInterval()}},this.initPlayer=function(){var videoElement=self.$element.find(".mbc-yt-video-container").get(0);self.options.energy===!0?self.player=new YT.Player(videoElement,{videoId:self.options.videoid,playerVars:{modestbranding:1,showinfo:0,wmode:"transparent",color:"white",autoplay:0,theme:"dark",rel:0,start:5},events:{onReady:self.onPlayerReady,onStateChange:self.onVideoEvent}}):self.player=new YT.Player(videoElement,{videoId:self.options.videoid,playerVars:{modestbranding:1,showinfo:0,wmode:"transparent",color:"white",autoplay:0,theme:"dark",rel:0},events:{onReady:self.onPlayerReady,onStateChange:self.onVideoEvent}}),$__WINDOW__.on("mbc-preload-complete",function(){1===self.options.autoplay&&self.playVideo()})},this.playVideo=function(){self.isPlaying=!0,self.player.playVideo()},this.pauseVideo=function(){self.isPlaying=!1,self.player.pauseVideo()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$frame=self.$element.find("iframe"),self.isPlaying=!1,$__WINDOW__.on("yt.video.show",self.showPlayer),$__WINDOW__.on("yt.video.hide",self.hidePlayer),digitalData.page.hasOwnProperty("content")&&(digitalData.page.content.youtubeID=self.options.videoid);var isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;isIOS&&(self.options.autoplay=0),config.isF015===!1&&("undefined"!=typeof YT&&"undefined"!=typeof YT.Player?self.initPlayer():$__WINDOW__.on("mbc_onYouTubeAPIReady",function(){self.initPlayer()})),1===self.options.scrollToPlay&&$__WINDOW__.on("scroll",function(){self.$element.visible(!1)?self.isPlaying===!1&&self.playVideo():self.isPlaying===!0&&self.pauseVideo()})},this}}(this.window,this.jQuery),function(window,$,document){"use strict";var mbcArticleStatus={scrolled:{percent25:!1,percent50:!1,percent75:!1},blocked:!1,isVideo:!1};$(window).on("scroll",function(){if($("#mbc-article").length>0&&$("#mbc-article").find(".mbc-row-content").length>0&&"undefined"!=typeof _satellite&&!mbcArticleStatus.blocked&&!mbcArticleStatus.isVideo){mbcArticleStatus.blocked=!0;var scrollTop=$(window).scrollTop()+$(window).height(),fullHeight=$(document).height(),scrollPercentage=scrollTop/(fullHeight/100);scrollPercentage>25&&(mbcArticleStatus.scrolled.percent25||(mbcArticleStatus.scrolled.percent25=!0,_satellite.track("article_25"))),scrollPercentage>50&&(mbcArticleStatus.scrolled.percent50||(mbcArticleStatus.scrolled.percent50=!0,_satellite.track("article_50"))),scrollPercentage>75&&(mbcArticleStatus.scrolled.percent75||(mbcArticleStatus.scrolled.percent75=!0,_satellite.track("article_75"))),setTimeout(function(){mbcArticleStatus.blocked=!1},1e3)}}),$(window).on("load",function(){void 0!==digitalData&&void 0!==digitalData.page&&void 0!==digitalData.page.content&&void 0!==digitalData.page.content.type&&"video"==digitalData.page.content.type&&(mbcArticleStatus.isVideo=!0),(!$("#mbc-article").length||$("#tribe-events").length)&&"undefined"!=typeof digitalData.page.content&&"undefined"!=typeof digitalData.page.content.type&&"article"==digitalData.page.content.type&&(digitalData.page.content.type="")})}(this.window,this.jQuery,this.document),function(window,$){"use strict";window.LiveStream=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(e){self.renderLivestream()},this.renderLivestream=function(){var width,height,device=wpmbcom.helper.browser.device(),url=self.$element.find("iframe").attr("src");switch(device){case"desktop":width=self.objectSize.medium.width,height=self.objectSize.medium.height;break;case"desktop_big":width=self.objectSize.large.width,height=self.objectSize.large.height;break;case"tablet":width=self.objectSize.medium.width,height=self.objectSize.medium.height;break;case"mobile":width=self.objectSize.small.width,height=self.objectSize.small.height;break;case"default":width=self.objectSize.medium.width,height=self.objectSize.medium.height}var regEx=/([?&]width)=([^#&]*)/g,newurl=url.replace(regEx,"$1="+width),regEx=/([?&]height)=([^#&]*)/g,newurl=newurl.replace(regEx,"$1="+height);self.$element.find("iframe").attr("src",newurl).width(width).height(height)},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.objectSize={small:{width:320,height:181},medium:{width:944,height:533},large:{width:1280,height:720}},self.$iframe=self.$element.find("iframe"),self.renderLivestream()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Accordion=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$box=self.$element.find(".mbc-accordion-box"),self.$boxcontent=self.$box.find(".mbc-accordion-content"),self.$accordionhead=self.$box.find(".mbc-accordion-link"),self.$accordionhead.on("click",function(e){e.preventDefault(),$(this).next().toggleClass("mbc-active"),$(this).next().hasClass("mbc-active")?($(this).next().slideDown(500),$(this).addClass("mbc-active")):($(this).next().slideUp(500),$(this).removeClass("mbc-active"))})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Table=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$cells=self.$element.find("td"),self.$cells.each(function(index){$(this).attr("data-th",$(this).parents(".mbc-table").find("th").eq($(this).index()).text())})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.GravityForm=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){var field=$(document.activeElement);field.is(".hasDatepicker")&&field.datepicker("hide").datepicker("show")},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$element.find("input").iCheck({cursor:!0,checkedClass:"checked"})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.RadioMBC=function(){var element,$element,options,self=this;return this.API_URL="http://api.mercedes-benz-radio.com/radio/2.0/",this.API_URL_SSL="https://api.mercedes-benz-radio.com/radio/2.0/",this.BITRATE_LOW=96,this.BITRATE_HIGH=160,this.QUALITY_COOKIE_NAME="radio_high_quality",this.API={SERVER_TIME:"serverTime",AVAILABLE_CODECS:"ondemand/availableCodecs",STREAM_ID:"stream/streamId",PLAYLIST:"ondemand/playlist",CURRENTLY_PLAYING:"stream/playing"},this.streamId,this.serverTimeOffset=0,this.currentMetaData=null,this.streamURL=null,this.playerReady=!1,this.isPlaying=!1,this.streamInfo=null,this.$backgroundImg,this.$coverImg,this.$progressBar,this.$artist,this.$title,this.$itunesBtn,this.$infoContainer,this.$volumeSlider,this.$jplayer,this.$volumeBtn,this.$settingsScreen,this.$qualityToggle,this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.$backgroundImg=$element.find("img.mbc-radio-background"),this.$coverImg=$element.find("img.mbc-radio-cover-img"),this.$progressBar=$element.find(".mbc-progress-bar-state"),this.$artist=$element.find(".mbc-meta-data .mbc-artist-txt"),this.$title=$element.find(".mbc-meta-data .mbc-title"),this.$itunesBtn=$element.find(".mbc-meta-data .mbc-itunes-btn"),this.$infoContainer=$element.find(".mbc-info-container"),this.$volumeSlider=$element.find(".mbc-volume-slider"),this.$jplayer=$element.find("#jquery_jplayer_1"),this.$volumeBtn=$element.find(".mbc-volume-btn"),this.$settingsScreen=$element.find(".mbc-settings-screen"),this.$qualityToggle=$element.find(".mbc-settings-screen .mbc-quality-toggle"),"0"===$.cookie(self.QUALITY_COOKIE_NAME)&&self.$qualityToggle.addClass("mbc-off"),$element.find(".mbc-new-tab-btn").attr("href",window.location.href),this.queryAPI(self.API.SERVER_TIME,{},this.onGetServerTime,this.onGetServerTime)},this.buildPlayer=function(){$element.find(".mbc-play-btn").on("click",self.onPlayClicked),$element.find(".mbc-stop-btn").on("click",self.onStopClicked),$element.find(".mbc-settings-btn").on("click",self.toggleSettingsScreen),self.$qualityToggle.on("click",self.toggleQuality),self.$settingsScreen.find(".mbc-close").on("click",self.toggleSettingsScreen),self.$volumeBtn.on("click",self.onVolumeBtnClicked),self.$jplayer.jPlayer({ready:function(event){self.playerReady=!0,$(this).jPlayer("setMedia",self.streamURL),$("html").hasClass("touch")||$element.find(".mbc-play-btn").trigger("click")},pause:function(){$(this).jPlayer("clearMedia")},error:function(event){self.playerReady&&event.jPlayer.error.type===$.jPlayer.error.URL_NOT_SET&&$(this).jPlayer("setMedia",self.streamURL).jPlayer("play")},swfPath:"/wp-content/themes/mbcom/assets/flash/",supplied:"mp3",preload:"none",wmode:"window",keyEnabled:!0,volume:.8,cssSelectorAncestor:".mbc-player-controls",cssSelector:{play:".mbc-play-btn",pause:".mbc-stop-btn"}}),self.$volumeSlider.noUiSlider({start:.8,animate:!1,connect:"lower",orientation:"vertical",direction:"rtl",range:{min:0,max:1}}),self.$volumeSlider.on("change",self.onVolumeSliderChange),self.$volumeSlider.on("slide",self.onVolumeSliderSlide),self.$volumeSlider.addClass("mbc-hide")},this.queryAPI=function(apiMethod,apiParams,callback,error){var cb,cb_base,errorCallback=error?error:self.defaultErrorCallback,apiURL="https"===URI().protocol()?self.API_URL_SSL:self.API_URL;window.mb_jsonp_counters=window.mb_jsonp_counters||{},cb_base=apiMethod.replace(/\//g,"_"),window.mb_jsonp_counters[cb_base]=window.mb_jsonp_counters[cb_base]||0,window.mb_jsonp_counters[cb_base]++,cb=cb_base+(1===window.mb_jsonp_counters[cb_base]?"":"_"+window.mb_jsonp_counters[cb_base]),window.cb_base=cb_base;var req=$.ajax({url:apiURL+apiMethod+"?ssl=true&jsonp=?",dataType:"jsonp",data:apiParams,timeout:3e3,cache:!0,jsonpCallback:cb});req.success(callback),req.error(errorCallback)},this.defaultErrorCallback=function(jqxhr,textStatus,error){window.mb_jsonp_counters[window.cb_base]--},this.getCurrentMetaData=function(){self.queryAPI(self.API.CURRENTLY_PLAYING,{streamId:self.streamId},self.onMetaData,self.onMetaData)},this.onMetaData=function(data,status){if(window.mb_jsonp_counters[window.cb_base]--,TweenMax.killDelayedCallsTo(self.getCurrentMetaData),"timeout"==status)return void TweenMax.delayedCall(5,self.getCurrentMetaData);var newMetaData=self.convertMetaData(data);self.currentMetaData=newMetaData;var timeToNextSong=self.currentMetaData.endsAt-self.getCachedServerTime(),timePlayed=self.getCachedServerTime()-self.currentMetaData.startsAt,currentPercent=timePlayed/self.currentMetaData.duration*100;TweenMax.killTweensOf(self.$progressBar),self.isPlaying&&($element.addClass("mbc-is-playing"),TweenMax.set(self.$progressBar,{width:currentPercent+"%"}),TweenMax.to(self.$progressBar,timeToNextSong/1e3,{width:"100%",ease:Linear.easeNone,onComplete:self.getCurrentMetaData})),self.displayMetaData()},this.convertMetaData=function(data){return data.startsAt=Date.parse(self.transformAPIDateStr(data.startsAt)),data.endsAt=Date.parse(self.transformAPIDateStr(data.endsAt)),data.duration=data.endsAt-data.startsAt,data},this.displayMetaData=function(){self.$backgroundImg.attr("src",self.currentMetaData.backgroundImage),self.$coverImg.attr("src",self.currentMetaData.image),self.$artist.text(self.currentMetaData.artist),self.$title.text(self.currentMetaData.title),self.currentMetaData.itunesLink&&""!=self.currentMetaData.itunesLink?(self.$itunesBtn.removeClass("mbc-hide"),self.$itunesBtn.attr("href",self.currentMetaData.itunesLink)):self.$itunesBtn.addClass("mbc-hide"),self.$infoContainer.hasClass("mbc-hide")&&(TweenMax.set(self.$infoContainer,{alpha:0}),TweenMax.to(self.$infoContainer,.5,{delay:.4,alpha:1,ease:Sine.easeOut}),self.$infoContainer.removeClass("mbc-hide"))},this.onGetServerTime=function(data,status){var serverTime=new Date(Date.parse(self.transformAPIDateStr(data.time)));self.serverTimeOffset=serverTime.getTime()-+new Date,self.getStreamInfo()},this.getStreamInfo=function(){var protocol=URI().protocol();$.post(URI(window.config.ajaxurl).protocol(protocol).toString(),{action:"radio_get_stream_info",no_geo_location:!0,ssl:!0},self.onGetStreamInfo,"json")},this.onGetStreamInfo=function(data){self.streamInfo=data,self.streamId=data.stream_id,self.streamURL={mp3:self.streamInfo.stream_urls[self.getBitrate().toString()][0]},self.getCurrentMetaData(),self.buildPlayer()},this.getCachedServerTime=function(){return(new Date).getTime()+self.serverTimeOffset},this.getBitrate=function(){return self.isHighQuality()?self.BITRATE_HIGH:self.BITRATE_LOW},this.onPlayClicked=function(){self.isPlaying=!0,self.getCurrentMetaData(),$element.find(".mbc-play-btn").addClass("mbc-hide"),$element.find(".mbc-stop-btn").removeClass("mbc-hide")},this.onStopClicked=function(){$element.removeClass("mbc-is-playing"),TweenMax.killTweensOf(self.$progressBar),$element.find(".mbc-stop-btn").addClass("mbc-hide"),$element.find(".mbc-play-btn").removeClass("mbc-hide"),self.isPlaying=!1},this.onVolumeBtnClicked=function(){self.$volumeSlider.toggleClass("mbc-hide"),
self.$volumeBtn.toggleClass("mbc-active")},this.onVolumeSliderChange=function(){var newValue=parseFloat(self.$volumeSlider.val());self.$jplayer.jPlayer("volume",newValue),self.updateVolumeIcon(newValue),TweenMax.delayedCall(2,self.hideVolumeBar)},this.onVolumeSliderSlide=function(){self.$jplayer.jPlayer("volume",parseFloat(self.$volumeSlider.val())),TweenMax.killDelayedCallsTo(self.hideVolumeBar)},this.updateVolumeIcon=function(value){self.$volumeBtn.removeClass("mbc-vol-medium mbc-vol-off"),0==value?self.$volumeBtn.addClass("mbc-vol-off"):.5>value&&self.$volumeBtn.addClass("mbc-vol-medium")},this.hideVolumeBar=function(){self.$volumeSlider.addClass("mbc-hide"),self.$volumeBtn.removeClass("mbc-active")},this.toggleSettingsScreen=function(){self.$settingsScreen.toggleClass("mbc-hide"),self.hideVolumeBar()},this.toggleQuality=function(){self.$qualityToggle.toggleClass("mbc-off"),$.cookie(self.QUALITY_COOKIE_NAME,self.isHighQuality()?"1":"0",{expires:3650,path:"/"}),self.streamURL={mp3:self.streamInfo.stream_urls[self.getBitrate().toString()][0]},self.isPlaying?(self.$jplayer.jPlayer("stop"),self.$jplayer.jPlayer("setMedia",self.streamURL).jPlayer("play")):self.$jplayer.jPlayer("setMedia",self.streamURL)},this.isHighQuality=function(){return self.$qualityToggle.hasClass("mbc-off")?!1:!0},this.transformAPIDateStr=function(dateStr){var newDateString=dateStr.replace(/T/g," ").replace(/Z/g,"").replace(/-/g,"/");return newDateString.substring(0,newDateString.indexOf("."))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.DropdownForm=function(){var element,$element,options,self=this;return this.$select,this.$listWrapper,this.defaults={initialLocale:null},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,0===$element.find("select").length&&$element.append("<select></select>"),$element.data("plugin",this),this.initDropdown()},this.initDropdown=function(){$element.find(":not(select,option)").off().remove(),$element.prepend('<div class="mbc-selected-item"><a class="mbc-item-link" href="#"></a></div>'),$element.prepend('<div class="mbc-form-list-wrapper"><ul class="mbc-list"></ul></div>'),self.$select=$element.find("select"),self.$listWrapper=$element.find(".mbc-form-list-wrapper");var initialValue=self.$select.val(),$list=$element.find(".mbc-list");self.$select.find("option").each(function(index,el){$list.append('<li class="mbc-list-item"><a id="'+$(el).attr("value")+'" class="mbc-item-link" data-value="'+$(el).attr("value")+'" href="#">'+$(el).text()+"</a></li>")}),self.options.initialLocale&&(initialValue=self.options.initialLocale),self.updateSelectedItem(initialValue),$element.find(".mbc-selected-item .mbc-item-link").on("click",self.onOpenDropdownClicked),$list.find(".mbc-item-link").on("click",self.onItemSelected),self.$select.off("change.dropdown").on("change.dropdown",self.onSelectChanged)},this.onOpenDropdownClicked=function(e){e.preventDefault(),self.toggleOpenState(),self.$list=self.$element.find(".mbc-list"),self.overflowScroll()},this.onItemSelected=function(e){e.preventDefault();var selectedValue=$(e.target).data("value");self.updateSelectedItem(selectedValue),self.toggleOpenState()},this.overflowScroll=function(){self.$list.jScrollPane({showArrows:!1,autoReinitialise:!0,hideFocus:!0})},this.toggleOpenState=function(){$element.toggleClass("mbc-open"),$element.hasClass("mbc-open")?self.$listWrapper.height($element.find(".mbc-list").outerHeight()):self.$listWrapper.height($element.height())},this.updateSelectedItem=function(value){$element.find(".mbc-list-item").removeClass("mbc-selected"),$element.find('.mbc-list-item .mbc-item-link[data-value="'+value+'"]').parent().addClass("mbc-selected");var langText=$element.find(".mbc-list .mbc-selected .mbc-item-link").text();$element.find(".mbc-selected-item .mbc-item-link").text(langText),self.$select.val(value),self.$select.trigger("change")},this.onSelectChanged=function(e,selfTriggered){void 0!==e.originalEvent&&self.updateSelectedItem(self.$select.val())},this}}(this.window,this.jQuery),function(window,$){"use strict";window.SoundcloudMBC=function(){var element,$element,options,self=this;return this.isDownloadable,this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){return element=this.element,$element=this.$element,options=this.options,this.isDownloadable=!1,"Explorer8"==window.wpmbcom.helper.browser.id||"Explorer9"==window.wpmbcom.helper.browser.id?void self.$element.parent().remove():void("tracks"==options.objectType?jQuery.post(window.config.ajaxurl_soundcloud,{action:"mixedtape_track_information",client_id:options.clientId,track_id:options.objectId},self.onDownloadInfo,"json"):self.embedSoundcloud(!1))},this.embedSoundcloud=function(downloadable,secretToken){var showVisual="tracks"===options.objectType,iframeStr='<iframe width="100%" height=100%" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https://api.soundcloud.com/'+options.objectType+"/"+options.objectId+"&secret_token="+secretToken+"&auto_play="+options.isAutoPlay+"&hide_related=false&show_comments=false&show_user=true&show_reposts=false&show_artwork="+showVisual+"&visual="+showVisual+"&download="+downloadable+'"></iframe>';$element.prepend(iframeStr)},this.onDownloadInfo=function(r){var downloads=parseInt(r.download.count),maxDownloads=parseInt(options.maxDownloads);r.download.hasOwnProperty("url")?(self.downloadUrl=r.download.url+"?secret_token="+r.secret_token+"&client_id="+r.client_id,""!=self.downloadUrl||" "!=self.downloadUrl?(self.$element.find(".mbc-soundcloud-download").removeClass("mbc-hide"),self.$element.find(".mbc-soundcloud-download-link").attr("href",self.downloadUrl)):self.$element.find(".mbc-soundcloud-download").remove()):self.$element.find(".mbc-soundcloud-download").remove(),downloads>maxDownloads?(self.embedSoundcloud(!1,r.secret_token),self.$element.find(".mbc-soundcloud-download").addClass("mbc-hide")):self.embedSoundcloud(!0,r.secret_token)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ArticleLoadMore=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.loadMoreArticles=function(e){e.preventDefault(),wpmbcom.helper.preloader.show(.5),self.currentPage++,$.get(self.urlStatic+"?page="+parseInt(self.currentPage-1)).done(function(data){var html=$(data).find("#mbc-article section").not(".mme-section-welcome-text, .mme-article-navigation,.mbc-article-start,#mbc-load-more");wpmbcom.helper.preloader.hide(),html.insertBefore(self.$element);for(var i=0;i<window.stickyIDs.length;i++)$("html").find(".mbc-article-section[data-content-id='"+window.stickyIDs[i]+"']").last().remove(),$("html").find(".mbc-article-with-background[data-content-id='"+window.stickyIDs[i]+"']").last().remove();($(data).find("#mbc-load-more-button").length<1||html.length<=3)&&TweenMax.to(self.$element.find("#mbc-load-more-button"),.5,{autoAlpha:0})}).fail(function(data){wpmbcom.helper.preloader.hide(),TweenMax.to(self.$element.find("#mbc-load-more-button"),.5,{autoAlpha:0})})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$loadMoreBtn=self.$element.find("#mbc-load-more-button"),self.url=self.$element.find("#mbc-load-more-button").attr("href"),self.urlStatic=window.location.origin+window.location.pathname,1===self.$loadMoreBtn.length&&(self.currentPage=self.$element.find("#mbc-load-more-button").attr("href"),self.url=self.currentPage,self.url=self.url.substr(0,self.url.length-2),self.currentPage=self.currentPage.split("/"),self.currentPage=parseInt(self.currentPage[self.currentPage.length-2]),isNaN(self.currentPage)?TweenMax.to(self.$element.find("#mbc-load-more-button"),.5,{autoAlpha:0}):(self.currentPage=self.currentPage-1,self.$element.find("#mbc-load-more-button").on("click",self.loadMoreArticles)))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Comments=function(){var element,$element,options,self=this;return this.defaults={key:"value",maxComments:4},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.hideComments=function(){if(self.$comments.length>self.options.maxComments)for(var i=self.options.maxComments;i<self.$comments.length;i++)self.$comments.eq(i).addClass("mbc-hide")},this.showComments=function(){self.row++;var max=self.row*self.options.maxComments;if(self.$comments.length>self.options.maxComments&&self.$comments.length<max&&(max=self.$comments.length),max<=self.$comments.length)for(var i=self.options.maxComments*(self.row-1);i<self.options.maxComments*self.row;i++)self.$comments.eq(i).removeClass("mbc-hide"),i+1==self.$comments.length&&self.hideButton()},this.hideButton=function(){TweenMax.to(self.$element.find("#mbc-load-more-comments"),.3,{alpha:0,height:0,paddingTop:0})},this.handleFormError=function(){self.$errorMessage.insertAfter("#mbc-btn-form-submit"),self.$errorMessage.addClass("mbc-text-error"),self.$element.find("textarea.mbc-commentarea").addClass("mbc-form-error mbc-text-error")},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.row=1,self.hashIndex=self.$element.find(window.location.hash).index(),self.$comments=self.$element.find("#mbc-commentlist ul li").not(".depth-2,.depth-3"),self.$commentsWrapper=self.$comments.parent(),self.hideComments(),self.$element.find("textarea.mbc-commentarea").placeholder(),self.$comments.length<=self.options.maxComments&&self.hideButton(),self.$element.find("#mbc-btn-form-submit").on("click",function(e){e.preventDefault(),self.$element.find(".form-submit input").first().trigger("click")}),self.$element.find("#mbc-load-more-comments a").on("click",function(e){e.preventDefault(),self.showComments()}),window.location.hash.indexOf("comment")>-1&&$("html, body").animate({scrollTop:$("#mbc-comments").offset().top}),self.$errorMessage=self.$element.find("#formError"),self.$errorMessage.length>0&&self.handleFormError()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.EventCalendarHeader=function(){var element,$element,options,$categorySelect,$form,$searchBtn,$searchInput,$filterContainer,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){$form.removeClass("tribe-bar-mini"),$filterContainer.removeClass("mbc-mobile-filters"),$filterContainer.css({height:"inherit"}),$("body").removeClass("mbc-fixed-height")},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,window.clanedarFirstLoad=!0,$form=$element.find("#tribe-bar-form"),$categorySelect=$element.find(".mbc-category-dropdown"),$searchBtn=$element.find(".mbc-search-btn"),$searchInput=$element.find("#tribe-bar-search"),$filterContainer=$element.find(".tribe-bar-filters"),$element.find(".mbc-mobile-filter-btn").on("click",self.onMobileFilterBtnClicked),$element.find(".mbc-mobile-clear-filters-btn").on("click",self.onMobileClearFiltersClicked),$element.find(".mbc-mobile-apply-filters-btn").on("click",self.onMobileApplyFiltersClicked),$element.find(".mbc-mobile-filters-close-btn").on("click",self.onMobileFiltersCloseBtnClicked),$searchBtn.on("click",self.onSearchBtnClicked),$searchInput.on("keyup",self.onSearchInputChanged),self.$select=$("select.mbc-category-dropdown-multiple"),"mobile"===mb_com.helper.browser.device()&&$__BODY__.width()<=700&&(self.$select.find("option").first().remove(),window.clanedarFirstLoad=!1),self.$select.change(function(){self.onCategorySelectChange()}),$form.on("submit",self.onAjaxStart),$(window.tribe_ev.events).on("tribe_ev_ajaxSuccess",self.onAjaxEnd),$__WINDOW__.on("calender_trigger_initial_value",self.onCategorySelectInitial);var queryCategory=(new URI).query(!0)["tribe_eventcategory[]"];""!==queryCategory&&$categorySelect.val(queryCategory),$form.find("input[name=tribe-bar-date]").attr("readonly","true"),$form.find("input[name=tribe-bar-date]").on("change",self.onDateInputChange),""!==$searchInput.val()&&$searchBtn.addClass("mbc-search-reset"),window.tribe_ev.state.filters=!0,$form.find("input").placeholder(),self.$element.find(".mbc-view-navi a").on("click",function(e){e.preventDefault();var $val=$($(this).data("href"));self.$select.val()||self.$select.val([""]),$val.trigger("click")}),self.onresize()},this.onCategorySelectChange=function(){window.clanedarFirstLoad||self.$select.val()&&($(window.wpmbcom).trigger("on_calendar_category_changed",{catId:self.$select.val(),catName:""}),setTimeout(function(){$form.submit()},300))},this.onCategorySelectInitial=function(){self.$select.val()&&($(window.wpmbcom).trigger("on_calendar_category_changed",{catId:self.$select.val(),catName:""}),$form.submit())},this.onMobileFilterBtnClicked=function(e){$("body").addClass("mbc-fixed-height"),$filterContainer.addClass("mbc-mobile-filters");var targetHeight=$("body").innerHeight();$filterContainer.css({height:targetHeight+"px"})},this.onMobileFiltersCloseBtnClicked=function(e){self.closeFilterLayer()},this.closeFilterLayer=function(e){$filterContainer.removeClass("mbc-mobile-filters"),$filterContainer.css({height:"0px"}),$("body").removeClass("mbc-fixed-height")},this.onMobileClearFiltersClicked=function(e){self.clearAllFilters()},this.clearAllFilters=function(){$searchInput.val(""),$element.find("#tribe-bar-date").val(""),$(".mbc-category-dropdown").val([""]),$__WINDOW__.trigger("MBCmobileCalendarClear")},this.onMobileApplyFiltersClicked=function(e){return self.$select.val()?($form.submit(),void self.closeFilterLayer()):void self.closeFilterLayer()},this.triggerCategoryChangedEvent=function(){var catName,catId=$form.find(".mbc-category-dropdown").val();if($.isArray(catId)){catName=[];for(var i=0;i<catId.length;i++){var name=catId[i]?$form.find(".mbc-category-dropdown option[value="+catId[i]+"]").text():"";catName.push(name)}}else catName=catId?$form.find(".mbc-category-dropdown option[value="+catId+"]").text():"";$(window.wpmbcom).trigger("on_calendar_category_changed",{catId:catId,catName:catName})},this.reloadWithFormParams=function(){var currentURL=new URI,selectedCategory=$form.find(".mbc-category-dropdown").val();currentURL.removeQuery("tribe_eventcategory[]"),""!==selectedCategory&&currentURL.setQuery({"tribe_eventcategory[]":selectedCategory}),currentURL.setQuery({"tribe-bar-date":$form.find("input[name=tribe-bar-date]").val()}),currentURL.setQuery({"tribe-bar-search":$form.find("#tribe-bar-search").val()}),window.location.href=currentURL.toString()},this.onSearchInputChanged=function(e){self.$select.val()||self.$select.val([""]),""===$searchInput.val()?$searchBtn.removeClass("mbc-search-reset"):$searchBtn.addClass("mbc-search-reset"),13!==e.keyCode||self.useAjax()||self.reloadWithFormParams()},this.onSearchBtnClicked=function(e){""!==$searchInput.val()&&($searchBtn.toggleClass("mbc-search-reset"),$searchBtn.hasClass("mbc-search-reset")||$searchInput.val(""),self.$select.val()||self.$select.val([""]),$form.submit())},this.onDateInputChange=function(e){self.useAjax()?(self.$select.val()||self.$select.val([""]),setTimeout(function(){$form.submit()},300)):self.reloadWithFormParams()},this.useAjax=function(){var browserId=window.wpmbcom.helper.browser.id;return!("Explorer8"===browserId||"Explorer9"===browserId)},this.onAjaxStart=function(){wpmbcom.helper.preloader.show(!0)},this.onAjaxEnd=function(){wpmbcom.helper.preloader.hide()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.EventCalendarMap=function(){var element,$element,options,mapData,openedInfoWindowAndMarker,self=this;return this.markerDefaultImg={url:"/wp-content/themes/mbcom/assets/images/maps/marker_default.png",size:new google.maps.Size(70,88),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,45),scaledSize:new google.maps.Size(35,44)},this.markerActiveImg={url:"/wp-content/themes/mbcom/assets/images/maps/marker_active.png",size:new google.maps.Size(70,88),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,45),scaledSize:new google.maps.Size(35,44)},this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,window.spin_end=function(){},mapData=window.tribe_ev.geoloc,window.tribe_ev.fn.map_add_marker=self.map_add_marker;var styles=[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:.5}]}];mapData.map.setOptions({styles:styles,streetViewControl:!0,mapTypeControl:!1,minZoom:"mobile"===wpmbcom.helper.browser.device()?1:2}),$element.on("mouseenter",".mbc-info-box img",function(){$(this).attr("src","/wp-content/themes/mbcom/assets/images/maps/close_00adef.png")}),$element.on("mouseleave",".mbc-info-box img",function(){$(this).attr("src","/wp-content/themes/mbcom/assets/images/maps/close.png")}),setTimeout(function(){$__DOCUMENT__.prop("title","Events")},2e3)},this.map_add_marker=function(lat,lng,title,address,link){var myLatlng=new google.maps.LatLng(lat,lng),tg=window.tribe_ev.geoloc,marker=new google.maps.Marker({position:myLatlng,map:tg.map,title:title,icon:self.markerDefaultImg});tg.markers.push(marker);var infoWindow=new InfoBox({maxWidth:300,boxClass:"mbc-info-box",closeBoxURL:"/wp-content/themes/mbcom/assets/images/maps/close.png",pixelOffset:new google.maps.Size(25,-31),infoBoxClearance:new google.maps.Size(10,10)});link=new URI(link).protocol("").toString();var content='<div class="mbc-link-wrapper"><a class="mbc-event-link mbc-hover" href="'+link+'">'+title+"</a></div>";infoWindow.setContent(content),google.maps.event.addListener(infoWindow,"domready",function(){TweenMax.set($element.find(".mbc-info-box"),{y:"-50%",transformOrigin:"left top"})}),google.maps.event.addListener(infoWindow,"closeclick",function(event){marker.setIcon(self.markerDefaultImg)}),google.maps.event.addListener(marker,"click",function(event){openedInfoWindowAndMarker&&(openedInfoWindowAndMarker.infoWin.close(),openedInfoWindowAndMarker.marker.setIcon(self.markerDefaultImg)),openedInfoWindowAndMarker={infoWin:infoWindow,marker:marker},marker.setIcon(self.markerActiveImg),infoWindow.open(tg.map,marker)}),tg.refine&&marker.setVisible(!1),tg.bounds.extend(myLatlng)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.EventCalendarList=function(){var element,$element,options,tribeCalData,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.maxTimeout=6,self.pagesLoaded=1,self.loadAttempts=0,tribeCalData=window.tribe_ev,$("html").hasClass("mbc-iframe")&&$(window.tribe_ev.events).on("tribe_ev_ajaxSuccess",self.addIframeParamToDetailLink),$element.on("click",".mbc-load-more",self.onLoadMoreBtnClicked),$__WINDOW__.on("reset_calendar_pager",self.resetCalendarPager),0==self.useAjax()&&(0!=$(".mbc-calendar-list-item").length&&$("#tribe-events-content .tribe-events-notices").remove(),$("#mbc-calendar-list").children().length<=0&&1!=$("#tribe-events-content .tribe-events-notices").length&&self.reloadNextPage())},this.resetCalendarPager=function(){self.pagesLoaded=1},this.addIframeParamToDetailLink=function(e){$(".mbc-detail-link").each(function(){var newHREF=new URI($(this).attr("href")).addQuery("iframe","true").protocol("");$(this).attr({href:newHREF.toString()})})},this.onLoadMoreBtnClicked=function(e){e.preventDefault(),tribeCalData.state.ajax_running||(wpmbcom.helper.preloader.show(!0),self.useAjax()?self.loadMoreAjax():self.reloadNextPage())},this.loadMoreAjax=function(){tribeCalData.state.ajax_running=!0;var params=window.wpmbcom.helper.string.deparam(tribeCalData.state.params+"");self.pagesLoaded++,params.tribe_paged=self.pagesLoaded,params.hash=$("#tribe-events-list-hash").val();var request=$.ajax({url:TribeList.ajaxurl,type:"POST",data:$.param(params),dataType:"json",cache:!1});request.done(self.onAjaxListComplete),request.fail(function(jqXHR,textStatus){})},this.onAjaxListComplete=function(r){tribeCalData.state.ajax_running=!1,tribeCalData.data.ajax_response={total_count:parseInt(r.total_count),view:r.view,max_pages:r.max_pages,tribe_paged:r.tribe_paged,timestamp:(new Date).getTime()};var $htmldump=$(r.html),$list=$htmldump.find("#mbc-calendar-list"),isLoadMore=(0==$list.find(".mbc-calendar-list-item").length,!1),hasNext=!0,$newHTML=$(r.html).find("#mbc-calendar-list").children();return 0==$list.find(".mbc-calendar-list-item").length&&(isLoadMore=!0,self.loadAttempts++),$element.find("#mbc-calendar-list .mbc-calendar-list-seperator:last-of-type").remove(),$element.find("#mbc-calendar-list").append($newHTML),$htmldump.find("#mbc-calendar-list"),$htmldump.find(".mbc-load-more").length<1&&(hasNext=!1),self.removeDuplicateMonthHeading(),isLoadMore&&self.loadAttempts<self.maxTimeout&&hasNext?void self.loadMoreAjax():(1==hasNext?(wpmbcom.helper.preloader.hide(),self.showLoadMore()):(wpmbcom.helper.preloader.hide(),self.hideLoadMore()),void(self.loadAttempts=0))},this.hideLoadMore=function(){TweenMax.to(self.$element.find(".mbc-load-more"),.5,{autoAlpha:0})},this.showLoadMore=function(){TweenMax.to(self.$element.find(".mbc-load-more"),.5,{autoAlpha:1})},this.removeDuplicateMonthHeading=function(){var first={};$(".mbc-calendar-list-month-heading").each(function(){var $el=$(this),txt=$el.find("h3").text();first[txt]?($el.prev().remove(),$el.remove()):first[txt]=!0})},this.reloadNextPage=function(){var $form=$("#tribe-bar-form"),currentURL=new URI,selectedCategory=$form.find(".mbc-category-dropdown").val();currentURL.removeQuery("tribe_eventcategory[]"),""!==selectedCategory&&currentURL.setQuery({"tribe_eventcategory[]":selectedCategory});var page=currentURL.search(!0).tribe_paged;page=page?parseInt(page)+1:2,currentURL.removeQuery("tribe_paged"),currentURL.setQuery("tribe_paged",page),currentURL.setQuery({"tribe-bar-date":$form.find("input[name=tribe-bar-date]").val()}),currentURL.setQuery({"tribe-bar-search":$form.find("#tribe-bar-search").val()}),window.location.href=currentURL.toString()},this.useAjax=function(){var browserId=window.wpmbcom.helper.browser.id;return!("Explorer8"===browserId||"Explorer9"===browserId)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.EventCalendarDetail=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,""!==document.referrer&&window.history&&""==$element.find("a.mbc-close").attr("href")&&$element.find("a.mbc-close").attr("href","javascript:window.history.back();")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.EventCalendarMonth=function(){var element,$element,options,$infoLayer,$infoLayerClonedContent,$infoLayerInnerWrapper,layerOpenTl,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){var $tableCells=$element.find(".mbc-cal-table td.mbc-day"),$tableRows=$element.find(".mbc-cal-table tbody tr"),height=0;$tableRows.each(function(){var currentHeight=$(this).outerHeight();height=currentHeight>height?currentHeight:height}),$tableCells.css({height:height+"px"})},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$infoLayer=$element.find(".mbc-cal-info-layer"),$infoLayerClonedContent=$element.find(".mbc-cal-info-layer .mbc-cloned-events"),$infoLayerInnerWrapper=$element.find(".mbc-cal-info-layer .mbc-inner-wrapper"),$infoLayer.find("a.mbc-close-btn").on("click",self.onLayerCloseBtnClicked),$element.on("click","td.tribe-events-has-events",self.onDayClicked),$element.on("click","a.mbc-disabled",function(e){e.preventDefault()}),$(window.tribe_ev.events).on("tribe_ev_ajaxSuccess",self.onresize),self.onresize()},this.onDayClicked=function(e){var $day=$(this),eventsNum=$day.find(".mbc-day-events .mbc-single-event").length;if(1===eventsNum){var eventURL=$day.find("a.mbc-single-event-link").attr("href");return $("html").hasClass("mbc-iframe")&&(eventURL=new URI(eventURL).addQuery({iframe:!0}).toString()),void(window.location.href=eventURL)}self.openLayer($day)},this.openLayer=function($data){var clonedEvents=$data.find("div.mbc-day-num, div.mbc-day-events").clone();$infoLayer.addClass("mbc-open"),$infoLayerClonedContent.empty(),$infoLayerClonedContent.append(clonedEvents),$infoLayerClonedContent.find("a.mbc-single-event-link").removeClass("mbc-disabled");var dateName=$infoLayerClonedContent.find(".mbc-day-num").data("date-name");$infoLayerClonedContent.find(".mbc-day-num").text(dateName),$("html").hasClass("touch")||$infoLayerClonedContent.find("a.mbc-single-event-link").addClass("mbc-hover");var contentHeight=parseInt($infoLayerInnerWrapper.outerHeight());layerOpenTl&&(layerOpenTl.kill(),layerOpenTl.clear());var animationTime=.4,yOffset=-Math.round(contentHeight/2);"mobile"===wpmbcom.helper.browser.device()&&($("body").addClass("mbc-fixed-height"),contentHeight=$("body").innerHeight(),animationTime=0,yOffset=0),layerOpenTl=new TimelineLite,layerOpenTl.set($infoLayerInnerWrapper,{alpha:0}),layerOpenTl.set($infoLayer,{alpha:1}),layerOpenTl.to($infoLayer,animationTime,{height:contentHeight,y:yOffset,ease:Sine.easeOut}),layerOpenTl.fromTo($infoLayerInnerWrapper,animationTime,{alpha:0},{alpha:1,ease:Sine.easeOut})},this.closeLayer=function(){$("body").removeClass("mbc-fixed-height"),layerOpenTl&&(layerOpenTl.kill(),layerOpenTl.clear()),TweenMax.killTweensOf($infoLayer),TweenMax.set($infoLayerInnerWrapper,{alpha:0}),TweenMax.to($infoLayer,.25,{alpha:0,height:0,y:0,ease:Sine.easeOut,onComplete:function(){$infoLayer.removeClass("mbc-open")}})},this.onLayerCloseBtnClicked=function(e){self.closeLayer()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.EventCalendarSubscription=function(){var element,$element,options,$innerWrapper,$subscriptionLink,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$innerWrapper=$element.find(".mbc-subscription-inner-wrapper"),$subscriptionLink=$element.find(".mbc-subscription-link"),$(window.wpmbcom).on("on_calendar_category_changed",self.onCategoryChanged),$element.find(".mbc-close").on("click",self.closeWidget);var catIds=(new URI).query(!0)["tribe_eventcategory[]"];if(catIds&&""!==catIds){var catNames=new Array;if($.isArray(catIds)){for(var i=0;i<catIds.length;i++)if(""!=catIds[i]){var catName=$("#tribe-bar-form .mbc-category-dropdown option[value="+catIds[i]+"]").text();catNames.push(catName)}}else catNames.push($("#tribe-bar-form .mbc-category-dropdown option[value="+catIds+"]").text());this.onCategoryChanged(null,{catId:catIds,catName:catNames})}},this.onCategoryChanged=function(e,data){!data.catId||""===data.catId||data.catId.length&&(0===data.catId.length||""===data.catId[0]&&data.catId.length<=1)?self.closeWidget():(self.openWidget(),self.updateLink(data.catName,data.catId))},this.closeWidget=function(){TweenMax.to($element,.35,{height:0,ease:Sine.easeOut})},this.openWidget=function(){var targetHeight=$innerWrapper.outerHeight();TweenMax.to($element,.35,{height:targetHeight,ease:Sine.easeOut})},this.updateLink=function(catName,catId){TweenMax.killTweensOf($subscriptionLink),TweenMax.set($subscriptionLink,{alpha:0});var href,ids,slug,newSlug,linkTxt=($.isArray(catName)?catName.join(", "):catName,$subscriptionLink.data("link-txt"));if($.isArray(catId)){ids=[],""!==catId[0]?(slug="/"+window.config.icalurls[catId[0]].split("/")[9]+"/",href=window.config.icalurls[catId[0]]):""!==catId[1]&&(slug="/"+window.config.icalurls[catId[1]].split("/")[9]+"/",href=window.config.icalurls[catId[1]]);for(var i=0;i<catId.length;i++)window.config.icalurls[catId[i]]&&ids.push(window.config.icalurls[catId[i]].split("/")[9]);newSlug="/"+ids.join()+"/",href=href.replace(slug,newSlug)}else href=window.config.icalurls[catId];$subscriptionLink.attr("href",href),$subscriptionLink.text(linkTxt),TweenMax.to($subscriptionLink,.8,{alpha:1,ease:Sine.easeOut,delay:.25})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Twoclicksolution=function(){var element,$element,options,$elParent,$elCheckbox,$elCheckboxHolder,$elCheckboxWrapper,$elCheckboxInner,$elLayerClone,$elLayerClonesButtons,$elApiHolder,$elLikeImage,self=this;return this.defaults={iServiceCount:3,sButtonClass:"onoffswitch",sAcceptButtonClass:"accept-button",iAnimationTimeButton:.2,iAnimationTimeLayer:.5,iCookieExpires:1,sLikeUrl:"",oService:{sName:"",facebook:{oEmbed:{sType:"facebookLikeIframe",sUrl:"http://www.facebook.com/plugins/like.php"},oUrlParams:{locale:"de"===config.lang?"de_DE":"en_GB",href:"",layout:"button_count",action:"recommend",show_faces:!1,appId:498488093586338}},twitter:{sAccountName:"mercedesamgf1",oEmbed:{sType:"twitterLikeScript",sUrl:"https://twitter.com/share"}},google:{oEmbed:{sType:"googleLikeScript",sSize:"medium"}}}},this.animateLayer=function(sState){var iOpacity=0;$element.hasClass("enabled")||"show"!==sState||0!==$elParent.find(".legal-layer.open").not($element).length?$elLayerClone.removeClass("open"):($elLayerClone.css({opacity:0,visibility:"visible"}).addClass("open"),iOpacity=1),TweenMax.to($elLayerClone,options.iAnimationTimeLayer,{opacity:iOpacity,onComplete:function(){"hide"===sState&&$elLayerClone.css({visibility:"hidden"})}})},this.animateSlideButton=function($el,sState){TweenMax.to($element.find(".onoffswitch-switch"),options.iAnimationTimeButton,{left:"on"===sState?"0%":"50%"}),TweenMax.to($elCheckboxInner,options.iAnimationTimeButton,{marginLeft:"on"===sState?"-100%":"-50%",onComplete:function(){"on"===sState?($elCheckbox.addClass("checked").attr("checked","checked"),$element.addClass("enabled"),$elCheckboxWrapper.trigger("mouseleave")):($elCheckbox.removeClass("checked").removeAttr("checked"),$element.removeClass("enabled"),$elCheckboxWrapper.trigger("mouseenter"))}})},this.handleSlideButtonClick=function(e){e.preventDefault(),e.stopPropagation(),$elCheckbox.hasClass("checked")||$elCheckbox.attr("checked")?(self.animateSlideButton($elCheckbox,"off"),wpmbcom.helper.cookie.clear(options.oService.sName+"LikeAccepted"),$elLayerClonesButtons=$elParent.parent().find(".legal-layer").find('[data-service="'+options.oService.sName+'"]'),$elLayerClonesButtons.each(function(){$(this).removeClass("enabled")}),$elParent.parent().find(".legal-layer").find('[data-service="all"]').removeClass("enabled"),self.destroyApi()):(self.animateSlideButton($elCheckbox,"on"),wpmbcom.helper.cookie.write(options.oService.sName+"LikeAccepted",!0,options.iCookieExpires),$elLayerClonesButtons=$elParent.parent().find(".legal-layer").find('[data-service="'+options.oService.sName+'"]'),$elLayerClonesButtons.each(function(){$(this).addClass("enabled")}),$elParent.siblings(".legal-layer").find("[data-service]").filter(".enabled").length===options.iServiceCount&&$elParent.parent().find(".legal-layer").find('[data-service="all"]').addClass("enabled"),self.buildApi())},this.handleAcceptButtonClick=function(e){e.preventDefault(),e.stopPropagation();var $el=$(e.target),sServiceToEnable=$el.attr("data-service");"all"!==sServiceToEnable?$elParent.find("input#twoclicksolution-"+sServiceToEnable).trigger("click"):$elParent.find("input."+options.sButtonClass+"-checkbox").not(".checked").trigger("click");
},this.destroyApi=function(){$__HTML__.find("#"+options.oService.sName+"-js").remove(),$elApiHolder.html($elLikeImage)},this.buildApi=function(){var sHtml="";"facebookLikeIframe"===options.oService[options.oService.sName].oEmbed.sType?sHtml='<iframe id="'+options.oService.sName+'-iframe" src="'+options.sLikeUrl+'" scrolling="no" frameborder="0" allowtransparency="true" frameborder="0" hspace="0" marginheight="0" marginwidth="0"></iframe>':"facebookShareScript"===options.oService[options.oService.sName].oEmbed.sType?(sHtml='<div class="fb-share-button" data-href="'+options.oService[options.oService.sName].oUrlParams.href+'" data-type="button_count"></div>',sHtml+='<div id="fb-root"></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/'+options.oService[options.oService.sName].oUrlParams.locale+'/all.js?"; fjs.parentNode.insertBefore(js, fjs); }(document, "script", "'+options.oService.sName+'-js"));</script>',"undefined"!=typeof FB&&(FB=null),window.fbAsyncInit=function(){try{FB.init({appId:options.oService[options.oService.sName].oUrlParams.appId,status:!0,cookie:!0,xfbml:!0})}catch(error){}}):"twitterLikeScript"===options.oService[options.oService.sName].oEmbed.sType?(sHtml='<a href="'+options.oService[options.oService.sName].oEmbed.sUrl+'" class="twitter-share-button" data-via="'+options.oService[options.oService.sName].sAccountName+'"></a>',sHtml+='<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?"http":"https";if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document, "script", "'+options.oService.sName+'-js" + "");</script>'):"twitterShareScript"===options.oService[options.oService.sName].oEmbed.sType?(sHtml='<a href="'+options.oService[options.oService.sName].oEmbed.sUrl+'" class="twitter-share-button" data-via="'+options.oService[options.oService.sName].sAccountName+'"></a>',sHtml+='<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?"http":"https";if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document, "script", "'+options.oService.sName+'-js" + "");</script>'):"googleLikeScript"===options.oService[options.oService.sName].oEmbed.sType?(sHtml='<div class="g-plusone" data-size="'+options.oService[options.oService.sName].oEmbed.sSize+'" data-href="'+options.oService[options.oService.sName].oUrlParams.href+'"></div>',sHtml+='<script type="text/javascript">window.___gcfg = {lang: "'+config.lang+'", parsetags: "onload"}; (function() { var po = document.createElement("script"); po.type = "text/javascript"; po.async = true; po.id="'+options.oService.sName+'-js";po.src = "https://apis.google.com/js/plusone.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s); })();</script>'):"googleShareScript"===options.oService[options.oService.sName].oEmbed.sType&&(sHtml='<div class="g-plus" data-action="share" data-annotation="bubble"></div>',sHtml+='<script type="text/javascript">window.___gcfg = {lang: "'+config.lang+'", parsetags: "onload"}; (function() { var po = document.createElement("script"); po.type = "text/javascript"; po.async = true; po.id="'+options.oService.sName+'-js"; po.src = "https://apis.google.com/js/plusone.js";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s); })();</script>'),$elApiHolder.html(sHtml)},this.buildLikeUrl=function(){options.sLikeUrl=options.oService[options.oService.sName].oEmbed.sUrl+"?";for(var key in options.oService[options.oService.sName].oUrlParams)"href"===key&&-1===options.oService[options.oService.sName].oUrlParams[key].indexOf("http")?options.sLikeUrl+=key+"="+$$.core.oPageInformations.host+options.oService[options.oService.sName].oUrlParams[key]+"&":options.sLikeUrl+=key+"="+options.oService[options.oService.sName].oUrlParams[key]+"&";options.sLikeUrl=options.sLikeUrl.replace(/&$/,"")},this.buildSlideButton=function(){$elCheckbox.addClass(options.sButtonClass+"-checkbox").attr("name",options.sButtonClass).wrap('<div class="'+options.sButtonClass+'"></div>'),$elCheckboxWrapper=$elCheckbox.parent(),$elCheckboxWrapper.append('<label class="'+options.sButtonClass+'-label" for="'+$elCheckbox.attr("id")+'"><div class="'+options.sButtonClass+'-inner"><div class="'+options.sButtonClass+'-bg-off"></div><div class="'+options.sButtonClass+'-switch"></div><div class="'+options.sButtonClass+'-bg-on"></div></div></label>'),$elCheckboxInner=$elCheckboxWrapper.find("."+options.sButtonClass+"-inner")},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$elParent=$element.parent("ul"),$elCheckbox=$element.find('input[type="checkbox"]'),$elCheckboxHolder=$element.find(".checkbox-holder"),$elApiHolder=$element.find(".api-holder"),$elLikeImage=$element.find(".like-image"),self.buildLikeUrl(),wpmbcom.helper.cookie.read(options.oService.sName+"LikeAccepted")?($element.addClass("enabled"),$elCheckbox.addClass("checked"),$elCheckbox.attr("checked"),$elParent.siblings(".legal-layer").find("[data-service="+options.oService.sName+"]").addClass("enabled"),$elParent.find(".legal-layer").find("[data-service="+options.oService.sName+"]").addClass("enabled"),$elParent.siblings(".legal-layer").find("[data-service]").filter(".enabled").length===options.iServiceCount&&$elParent.parent().find(".legal-layer").find('[data-service="all"]').addClass("enabled"),self.buildApi()):($element.removeClass("enabled"),$elCheckbox.removeClass("checked"),$elCheckbox.removeAttr("checked"),$elParent.siblings(".legal-layer").find("[data-service="+options.oService.sName+"]").removeClass("enabled"),$elParent.find(".legal-layer").find("[data-service="+options.oService.sName+"]").removeClass("enabled")),$elParent.siblings(".legal-layer").not(".clone").find("."+options.sAcceptButtonClass).off("click.twoclicksolution").on("click.twoclicksolution",self.handleAcceptButtonClick),$elLayerClone=$elParent.siblings(".legal-layer").not(".clone").clone(!0).addClass("clone"),self.buildSlideButton(),$elCheckboxHolder.append($elLayerClone),$element.find("."+options.sButtonClass).off("click.twoclicksolution").on("click.twoclicksolution",self.handleSlideButtonClick),$elCheckboxHolder.off("mouseenter.twoclicksolution mouseleave.twoclicksolution").on("mouseenter.twoclicksolution mouseleave.twoclicksolution",function(e){e.preventDefault(),e.stopPropagation(),"mouseenter"===e.type?self.animateLayer("show"):self.animateLayer("hide")})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ShareLayer=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){self.$element.width()>800?(self.$twoClick.slideDown(0),self.$toggleBtn.hasClass("mbc-active")&&self.$toggleBtn.removeClass("mbc-active")):self.$element.width()<800&&0==Modernizr.touch&&self.$twoClick.slideUp(0)},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$twoClick=self.$element.find("#socialshareprivacy"),self.$toggleBtn=self.$element.find("a.mbc-share-toggle"),self.$element.width()<=800&&self.$twoClick.slideUp(0),self.$element.find(".privacy-btn").on("click",function(e){e.preventDefault(),$__WINDOW__.trigger("mbc-meta-open-show-privacy")}),self.$toggleBtn.on("click",function(e){e.preventDefault(),$(this).toggleClass("mbc-active"),self.$element.width()<=800&&($(this).hasClass("mbc-active")?self.$twoClick.slideDown(500):self.$twoClick.slideUp(500))})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.CommentSharing=function(){var element,$element,options,self=this;return this.defaults={key:"value",maxComments:4},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options;var $teasers=$__HTML__.find(".mme-additional-teasers").last();$teasers.length>0&&self.$element.insertBefore($teasers)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.QuickAccess=function(){var element,$element,options,$openBtn,$slideWrapper;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$slideWrapper=$element.find(".mbc-slide-wrapper"),$openBtn=$element.find(".mbc-open-btn"),$openBtn.on("click",$.proxy(this.onOpenBtnClicked,this))},this.onOpenBtnClicked=function(e){if(e.preventDefault(),$slideWrapper.toggleClass("mbc-open"),$openBtn.toggleClass("mbc-open"),$slideWrapper.hasClass("mbc-open")){var targetHeight=$slideWrapper.find(".mbc-inner-wrapper").outerHeight();$slideWrapper.css("height",targetHeight+"px")}else $slideWrapper.css("height","0px")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.InfoBelt=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){320===$("#mbc-article").width()?self.$element.css({"border-left-width":0,"border-right-width":0,"margin-left":0}):(self.contentWidth=($__WINDOW__.width()-$("#mbc-article").width())/2,self.contentWidth>=20?self.$element.css({"border-left-width":self.contentWidth,"border-right-width":self.contentWidth,"margin-left":-self.contentWidth}):self.$element.css({"border-left-width":20,"border-right-width":20,"margin-left":-20}))},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,320===$("#mbc-article").width()?self.$element.css({"border-left-width":0,"border-right-width":0,"margin-left":0}):(self.contentWidth=($__WINDOW__.width()-$("#mbc-article").width())/2,self.contentWidth>=20?self.$element.css({"border-left-width":self.contentWidth,"border-right-width":self.contentWidth,"margin-left":-self.contentWidth}):self.$element.css({"border-left-width":20,"border-right-width":20,"margin-left":-20}))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.SpeedReader=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){self.swapInterface()},this.onresize=function(){},this.ondevicechange=function(){},this.swapInterface=function(){320===self.$article.width()?$("#mbc-qtm-reader-interface").insertBefore("#mbc-qtm-reader-filter"):$("#mbc-qtm-reader-filter").insertBefore("#mbc-qtm-reader-interface")},this.getFontSize=function(wordCount){return wordCount=wordCount.length,self.$article.width()>=944?18>wordCount?48:24>wordCount?42:32:14>wordCount?42:18>wordCount?32:24},this.getNextSection=function(){return self.resetReader(),self.sectionCounter++,self.sectionCounter>=self.maxSections?void(self.sectionCounter=self.maxSections-1):(self.$currentSection=self.$sections.eq(self.sectionCounter),self.text=self.analyseSectionText(),void self.gotoSection())},this.getPrevSection=function(){self.resetReader(),self.sectionCounter--,self.sectionCounter<=1&&(self.sectionCounter=1),self.$currentSection=self.$sections.eq(self.sectionCounter),self.text=self.analyseSectionText(),self.gotoSection()},this.gotoSection=function(){self.resetReader(),self.readCurrentSection()},this.readCurrentSection=function(){var currentword,size;self.isReading=!0,self.words=self.text.split(" "),self.currentWord=0,0==self.pause?self.setReadingInterval():(self.currentWord++,currentword=self.removeSpecialChars(self.words[self.currentWord]),size=self.getFontSize(currentword),currentword=self.getStringPivot(currentword),self.$textHolder.html(currentword),self.$textHolder.css({"font-size":size}))},this.setReadingInterval=function(){var currentword,size;self.readInterval=setInterval(function(){self.currentWord<self.words.length?(currentword=self.removeSpecialChars(self.words[self.currentWord]),size=self.getFontSize(currentword),currentword=self.getStringPivot(currentword),self.$textHolder.html(currentword),self.$textHolder.css({"font-size":size}),self.currentWord++,currentword.indexOf(".")>=0&&self.textPause()):(clearInterval(self.readInterval),self.getNextSection())},self.readingSpeed)},this.textPause=function(){self.resetReader();var timeout=400;parseInt(self.wpm)>=300&&(timeout=300),parseInt(self.wpm)>=400&&(timeout=200),setTimeout(function(){self.pause===!1&&self.playReading()},timeout)},this.setReadingSpeed=function(){self.isReading&&(clearInterval(self.readInterval),self.pause===!1&&self.setReadingInterval())},this.resetReader=function(){clearInterval(self.readInterval)},this.analyseSectionText=function(){var text="",sectionTextContent=self.$currentSection.find("p").parent().not(".mbc-top-envkv");1==self.sectionCounter?(self.firstSectionDone===!1&&(text+=" "+$("#mbc-qtm-reader-content-wrapper h2.mbc-article-section-header").text(),text+=" "+$("#mbc-qtm-reader-content-wrapper .mbc-article-section-subheadline").text(),text+="      ",self.firstSectionDone=!0),text+=" "+self.$currentSection.find(".mbc-article-section-header").text(),text+=" "+self.$currentSection.find(".mbc-article-section-subheadline").text()):text+=" "+self.$currentSection.find(".mbc-article-section-header").text();for(var k=0;k<sectionTextContent.length;k++)text+=" "+sectionTextContent.eq(k).find("p").text();return text},this.getStringPivot=function(word){var start,center,end,wordcenter=word.length<=3?Math.ceil(word.length/2):Math.round(word.length/2);return start=word.substring(0,wordcenter-1),center=word.substring(wordcenter-1,wordcenter),end=word.substring(wordcenter,word.length),word=start+'<span class="mbc-qtm-pivot">'+center+"</span>"+end},this.pauseReading=function(){self.pause=!0,clearInterval(self.readInterval)},this.playReading=function(){self.pause=!1,clearInterval(self.readInterval),self.setReadingInterval()},this.showLayer=function(startreading){self.pause=!1,$__WINDOW__.trigger("mbc-qtm-banner-hide"),TweenMax.to(self.$element.find("#mbc-qtm-banner-background"),.5,{autoAlpha:.9}),TweenMax.to(self.$element,.5,{autoAlpha:1,onComplete:function(){startreading&&(self.sectionCounter=0,self.$currentSection=self.$sections.eq(0),self.$playButton.addClass("play"),self.getNextSection())}})},this.togglePlayPause=function($el){var state=$el.hasClass("play");state?self.isReading===!1?self.getNextSection():self.playReading():self.pauseReading()},this.hideLayer=function(){TweenMax.to(self.$element,.5,{autoAlpha:0}),TweenMax.to(self.$element.find("#mbc-qtm-banner-background"),.5,{autoAlpha:0,onComplete:function(){$__WINDOW__.trigger("mbc-qtm-banner-show")}}),self.pauseReading(),self.clear()},this.clear=function(){self.sectionCounter=0,self.$currentSection=self.$sections.eq(0),self.isReading=!1,self.pause=!0,self.$textHolder.html(""),self.$playButton.removeClass("play"),self.resetReader(),setTimeout(function(){self.$textHolder.html(""),self.resetReader()},1500)},this.removeSpecialChars=function(word){for(var index,removeChars=['"',",","!","?",";",":","„","“"],excludeChars=["-"],i=0;i<removeChars.length;i++)index=word.indexOf(removeChars[i]),index>=0&&(word=index>=1?word.substr(0,index):word.substr(index+1,word.length));for(var k=0;k<excludeChars.length;k++)if(word.indexOf(excludeChars[k])>=0&&word.length<=3)return"";return word},this.setup=function(){element=this.element,$element=this.$element,options=this.options,TweenMax.set(self.$element,{autoAlpha:0}),self.$sections=$("#mbc-article").find("section").not(".mbc-article-video, .mme-additional-teasers, #mbc-comments-and-sharing, .mbc-article-gallery, .mbc-top-envkv, .mbc-social-links, .mbc-envkv-footer, .mbc-resort-related-links, #mbc-qtm-banner, .mbc-article-section"),self.maxSections=self.$sections.length,self.sectionCounter=0,self.$currentSection=self.$sections.eq(self.sectionCounter),self.isReading=!1,self.firstLoad=!1,self.readingSpeed=Math.round(6e4/self.$element.find("#mbc-qtm-reader-filter select").val()),self.wpm=self.$element.find("#mbc-qtm-reader-filter select").val(),self.$playButton=self.$element.find(".mbc-qtm-pause-play-section"),self.$textHolder=self.$element.find("#mbc-qtm-reader-content h2"),self.text="",self.$article=$("#mbc-article"),self.pause=!0,self.firstSectionDone=!1,self.$element.find(".mbc-qtm-next-section").on("click",function(e){e.preventDefault(),self.getNextSection()}),self.$element.find(".mbc-qtm-prev-section").on("click",function(e){e.preventDefault(),self.getPrevSection()}),self.$element.find(".mbc-qtm-close-section").on("click",function(e){e.preventDefault(),self.hideLayer()}),self.$element.find("#mbc-qtm-reader-filter select").on("change",function(){self.readingSpeed=Math.round(6e4/$(this).val()),self.wpm=$(this).val(),self.setReadingSpeed()}),self.$element.find(".mbc-qtm-pause-play-section").on("click",function(e){e.preventDefault(),$(this).toggleClass("play"),self.togglePlayPause($(this))}),$__WINDOW__.on("mbc-preload-complete",function(){self.firstLoad===!1&&$.cookie("c_disclaimer")&&($__WINDOW__.trigger("mbc-qtm-banner-show"),self.firstLoad=!0)}),$__WINDOW__.on("mbc-qtm-banner-button-click",function(){self.showLayer(!0)}),$__WINDOW__.on("mbc-dropdown-open",function(){setTimeout(function(){$("#mbc-qtm-reader-filter .mbc-dropdown-wrapper .mbc-list-wrapper").jScrollPane({showArrows:!1,autoReinitialise:!1,hideFocus:!0})},800)}),$__WINDOW__.on("c_layer_ie_close",function(){self.showLayer(!0),self.firstLoad=!0}),Helper.bindSignal(document,"c:layer:hide",function(){self.showLayer(!0),self.firstLoad=!0}),self.swapInterface()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.SpeedReaderBanner=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,TweenMax.set(self.$element,{height:0,autoAlpha:0}),self.$element.insertBefore("section.mbc-article-start"),self.$element.find(".mbc-qtm-banner-button-link").on("click",function(e){e.preventDefault(),$__WINDOW__.trigger("mbc-qtm-banner-button-click")}),$__WINDOW__.on("mbc-qtm-banner-show",function(){TweenMax.set(self.$element,{height:"auto",autoAlpha:1}),TweenMax.from(self.$element,.5,{height:0,autoAlpha:0})}),$__WINDOW__.on("mbc-qtm-banner-hide",function(){TweenMax.to(self.$element,.5,{height:0,autoAlpha:0})})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Tracking=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"undefined"!=typeof Helper&&(Helper.bindSignal(document,"c:layer:hide",function(){function checkForTrackingVar(){"undefined"!=typeof _satellite?_satellite.track("cookielayer_close"):setTimeout(checkForTrackingVar,200)}digitalData.page.pageInfo.disclaimerCookieValid=$.cookie("c_disclaimer"),digitalData.page.pageInfo.disclaimerCookieName="mb.com",checkForTrackingVar()}),Application.disclaimerCookieExists()&&(digitalData.page.pageInfo.disclaimerCookieValid=$.cookie("c_disclaimer"),digitalData.page.pageInfo.disclaimerCookieName="mb.com"))},this},wpmbcom.plugins.nonDomPlugins.push("Tracking")}(this.window,this.jQuery),function(window,$){"use strict";window.WelcomeTopText=function(){var element,$element,options,$textLayer="section.mme-section-welcome-text",$articleStart="section.mbc-article-start";return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$($textLayer).insertAfter($articleStart)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.IframeResizer=function(){var element,$element,options,self=this;return this.defaults={key:"value",iframeUrl:"",isRoute:!1},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.buildIframe=function(){""!=self.options.iframeUrl&&(self.options.isRoute&&(window.F015RouteplannerHasItem?self.options.iframeUrl=self.origiURL+"?start="+self.routeStart+"&end="+self.routeEnd+"&route="+self.routeType+"&item="+self.routeItem:self.options.iframeUrl=self.origiURL+"?start="+self.routeStart+"&end="+self.routeEnd+"&route="+self.routeType),self.$frame.attr("src",self.options.iframeUrl)),self.$frame.iFrameResize({autoResize:!0,enablePublicMethods:!0,resizedCallback:function(messageData){$__WINDOW__.trigger("mb-f015-reset-slide-height",{height:parseInt(self.$frame.offset().top)+parseInt(messageData.height)+74,id:config.F015.currentSlide})}}),self.$frameContent=self.$frame.get(0)},this.setGetParams=function(e,data){self.routeStart=data.routeStart,self.routeEnd=data.routeEnd,self.routeType=data.routeType,window.F015RouteplannerHasItem&&(self.routeItem=data.routeItem)},this.bindScrollEvents=function(){$__WINDOW__.on("scroll.IframeResizer",function(){self.sendScrollPosition()})},this.sendScrollPosition=function(){var data={left:$__WINDOW__.scrollLeft(),top:$__WINDOW__.scrollTop(),offsetLeft:$__WINDOW__.scrollLeft()-self.$frame.offset().left,offsetTop:$__WINDOW__.scrollTop()-self.$frame.offset().top};self.$frameContent.contentWindow.postMessage("parentScrollPosition:"+JSON.stringify(data),"*")},this.removeScrollEvents=function(){$__WINDOW__.off("scroll.IframeResizer"),self.$frame.attr("src","")},this.setup=function(){element=this.element,$element=this.$element,options=this.options;var $dotNav=$("#mb-f015-dot-navigation");if(self.$frame=self.$element.find("iframe.mbc-iframe-resize"),config.isF015){var id=parseInt(self.$element.data("slide-id"));$__WINDOW__.on("mb-f015-slide-open-finished",function(e,obj){id===obj.id&&(self.buildIframe(),self.bindScrollEvents(),$dotNav.removeClass("slide-opened"))}),self.origiURL=self.options.iframeUrl,$__WINDOW__.on("mb-f015-slide-closed-finished",self.removeScrollEvents),$__WINDOW__.on("mb-f015-iframe-set-route",self.setGetParams)}else self.buildIframe()},this}}(this.window,this.jQuery),function(window,$){"use strict";$(".mbc-event-table").each(function(){var content=$(this).find(".mbc-event-table-content"),ajaxUrl=content.attr("data-topic-ajax-url");$.ajax({type:"GET",url:ajaxUrl,success:function(response){var table=$($.parseHTML(response)).find("table.table");table.appendTo(content)}})})}(this.window,this.jQuery),function(window,$){"use strict";$(".mbc-download-table").each(function(){var content=$(this).find(".mbc-download-table-content"),ajaxUrl=content.attr("data-ajax-url");$.ajax({type:"GET",url:ajaxUrl,success:function(response){var table=$(response);table.appendTo(content)}})})}(this.window,this.jQuery),function(window,$){"use strict";$(".mbc-login-form").each(function(){var form=$(this).find("form"),csrfField=form.find("input[name=_csrf_token]"),ajaxUrl=form.attr("data-ajax-url"),loginCheckAjaxUrl=form.attr("data-login-check-ajax-url"),targetPageUrl=form.attr("data-target-page-url");form.find("#username").focus(),form.on("submit",function(event){event.preventDefault(),form.find("#username").val()&&form.find("#password").val()&&($("#mbc-preloader").css({display:"block",opacity:1}),$.ajax({type:"GET",url:ajaxUrl,success:function(response){var parsedResponse=$($.parseHTML(response)),csrfFieldResponse=(parsedResponse.find("form"),parsedResponse.find("input[name=_csrf_token]"));csrfField.val(csrfFieldResponse.val()),$.ajax({type:"POST",url:loginCheckAjaxUrl,data:form.serialize(),success:function(response){location.href=targetPageUrl},error:function(response){$("#mbc-preloader").css({display:"none",opacity:0}),form.find(".alert").remove(),form.prepend('<div class="alert alert-success" role="alert">'+response.responseText+"</div>")}})}}))})})}(this.window,this.jQuery),function(window,$){"use strict";$(".mbc-social-wall-content").each(function(){function fetchData(){loadMoreBtn.attr("disabled",!0),$.ajax({type:"GET",url:ajaxUrl,data:params,success:function(response){response.results&&($.each(response.results,function(index,clipping){content.append(renderClipping(clipping))}),itemCount>response.results.length&&loadMoreBtn.css("display","none")),loadMoreBtn.attr("disabled",!1)}})}function renderClipping(clipping){var html="";return html+='<a href="'+clipping.link+'" target="_blank">',html+='  <div class="mbc-social-wall-item" data-uuid="'+clipping.uuid+'">',html+='    <div class="mbc-social-wall-item-overlay">',html+='      <div class="mbc-social-wall-item-overlay-content">',html+='        <span class="mbc-social-wall-t-profile">@'+escapeHtml(clipping.profile)+"</span>",html+='        <div class="mbc-social-wall-t-title">'+escapeHtml(clipping.title)+"</div>",html+="      </div>",html+="    </div>",html+='    <div class="mbc-social-wall-item-img" style="background-image: url('+clipping.imageThumbUrl+');">',html+="    </div>",html+="  </div>",html+="</a>"}function loadMore(){params.offsetUuid=content.find(".mbc-social-wall-item:last").data("uuid"),fetchData()}function escapeHtml(text){return $("<div/>").text(text).html()}var content=$(this),ajaxUrl=content.attr("data-ajax-url"),labelsString=content.attr("data-label"),itemCount=content.attr("data-item-count")?parseInt(content.attr("data-item-count")):8,labels=labelsString?labelsString.split(","):[],loadMoreBtn=content.find(".load-more-btn");0==labels.length&&content.html("No labels defined"),loadMoreBtn.click(function(){loadMore()});var params={type:"image",count:itemCount,offsetUuid:null};params.label=labels[0],labels.length>1&&(params.labels1=labels.slice(1).join(",")),fetchData()})}(this.window,this.jQuery),function(window,$){"use strict";$(".mbc-retailer-search").each(function(){var map=$(this).find(".mbc-retailer-search-map"),formContainer=$(this).find(".mbc-retailer-search-form"),form=formContainer.find("form"),searchTerm=form.find("input[name=search_term]"),results=$(this).find(".mbc-retailer-search-results"),ajaxUrl=$(this).attr("data-ajax-url"),ajaxUrlJson=$(this).attr("data-ajax-url-json");map.css({height:map.width()/2,width:"100%"});var myLatLng={lat:51.62734,lng:9.36378},geocoder=new google.maps.Geocoder,googleMap=new google.maps.Map(map[0],{zoom:6,center:myLatLng,scrollwheel:!1});$.ajax({type:"GET",url:ajaxUrlJson,success:function(response){$.each(response.data,function(itemIndex,item){if(item.geoLat&&item.geoLng){var itemLatLng={lat:item.geoLat,lng:item.geoLng},infowindow=new google.maps.InfoWindow({content:'<span style="font-weight: bold;">'+item.title+"</span><br />"+item.address+"<br />"+item.zip+" "+item.city+'<br /><div style="height: 10px;"></div>'+item.phone+'<br /><a href="mailto:'+item.email+'">'+item.email+'</a><br /></div><a target="_blank" href="'+item.websiteUrl+'">'+item.websiteUrl+"</a>"}),marker=new google.maps.Marker({position:itemLatLng,map:googleMap,title:item.title});marker.addListener("click",function(){infowindow.open(map,marker)})}})}}),form.on("submit",function(evt){return evt.preventDefault(),searchTerm.val()?(results.html("Wird geladen..."),void geocoder.geocode({address:searchTerm.val()+", Germany"},function(geoResults,status){status===google.maps.GeocoderStatus.OK&&geoResults.length>0?($.ajax({type:"GET",url:ajaxUrl+"&geo_lat="+geoResults[0].geometry.location.lat()+"&geo_lng="+geoResults[0].geometry.location.lng(),success:function(response){results.html(response)}}),$.ajax({type:"GET",url:ajaxUrl+"&format=json&geo_lat="+geoResults[0].geometry.location.lat()+"&geo_lng="+geoResults[0].geometry.location.lng(),success:function(response){if(0==response.data.length)googleMap.setCenter(myLatLng),googleMap.setZoom(6);else{var bounds=new google.maps.LatLngBounds;$.each(response.data,function(itemIndex,item){var itemLatLng={lat:item.geoLat,lng:item.geoLng},marker=new google.maps.Marker({position:itemLatLng});3>itemIndex&&bounds.extend(marker.position)}),googleMap.fitBounds(bounds)}}})):(results.html("Ort nicht gefunden"),googleMap.setCenter(myLatLng),googleMap.setZoom(6))})):(results.html(""),googleMap.setCenter(myLatLng),void googleMap.setZoom(6))})})}(this.window,this.jQuery),function(window,$){"use strict";$(document).ready(function(){$(".mbc-video-inline").each(function(){function resize(){var targetWidth=elem.width();displayWidthPercent&&(targetWidth=Math.round(targetWidth*displayWidthPercent/100));var verticalMargin=0;if(1>=aspect&&targetWidth>=768&&(targetWidth=Math.round(targetWidth/2),verticalMargin=20),targetWidth!=lastTargetWidth){lastTargetWidth=targetWidth;var targetHeight=Math.round(targetWidth/aspect);video.css({display:"block",width:targetWidth,height:targetHeight,"margin-top":verticalMargin,"margin-bottom":verticalMargin,"margin-left":displayMarginLeftPercent?Math.round(displayMarginLeftPercent)+"%":"auto","margin-right":"auto"})}}var elem=$(this),video=elem.find("video"),w=video.attr("width"),h=video.attr("height"),aspect=w/h,displayWidthPercent=elem.attr("data-display-width-percent"),displayMarginLeftPercent=elem.attr("data-display-margin-left-percent"),lastTargetWidth=null;$(window).on("resize",resize),resize()})})}(this.window,this.jQuery),function(window,$){"use strict";window.F015Container=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){if(!self.isOpen){var windowHeight=$__WINDOW__.height();self.$element.height(windowHeight),self.$tool.height(windowHeight),self.$element.height(windowHeight)}},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options;var id,slideHeight=$__WINDOW__.height();self.$tool=$("#mb-f015-tool"),self.isOpen=!1,self.onresize(),"mobile"===wpmbcom.helper.browser.device()&&setTimeout(function(){$__WINDOW__.trigger("mb-f015-scroll-to-slide",[1])},1e3),$__WINDOW__.on("mb-f015-slide-closed-finished",function(){self.$element.height($__WINDOW__.height()),self.isOpen=!1}),$__WINDOW__.on("mb-f015-slide-open",function(e,obj){id=obj.id,slideHeight=obj.height,self.isOpen=!0}),$__WINDOW__.on("mb-f015-slide-open-finished",function(){self.$element.height(slideHeight),self.isOpen=!0}),$__WINDOW__.on("mb-f015-reset-slide-height",function(e,obj){self.$element.height(obj.height),self.opened=!0})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015TimeTool=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.loadData=function(value){var params="&max_reading_time="+value;self.totalTime=value,$.ajax({url:config.F015.ajaxurl+params,dataType:"json",success:function(data){self.renderData(data)},error:function(){}})},this.renderData=function(data){var html="";self.totalTime=data.totalPlaytime,TweenMax.to(self.$article,.5,{alpha:0,onComplete:function(){for(var i=0;i<data.content.length;i++){html=data.content[i][1].htmlContent;var $content=self.$article.eq(i);$content.html(html);var $elements=$content.find("section"),height=0;$elements.each(function(){void 0!=$(this).data("funct")&&wpmbcom.plugins.initPlugin($(this),$(this).data("funct")),height+=$(this).height()}),$content.css({height:height+$("#mbc-header").height()})}self.showContent()}})},this.showContent=function(){wpmbcom.helper.preloader.hide(),TweenMax.to(self.$article,.5,{alpha:1,onComplete:function(){$__WINDOW__.trigger("mb-f015-update-clock",[0,self.totalTime]),
self.isInitial===!1&&$__WINDOW__.trigger("mb-f015-set-time",[self.totalTime])}})},this.hideContent=function(){wpmbcom.helper.preloader.show(!0),TweenMax.to(self.$article,.5,{alpha:0})},this.getInitialInfo=function(){$.ajax({url:config.F015.ajaxurl,dataType:"json",success:function(data){self.parseInitialInfo(data)},error:function(){}})},this.parseInitialInfo=function(data){self.$tool=self.$element.find(".mb-f015-tool"),self.loadData(data.totalPlaytime),self.btnValue=data.totalPlaytime/self.$millisecs,$__WINDOW__.trigger("mb-f015-set-inital-time",[data.totalPlaytime]),$__WINDOW__.on("mb-f015-set-tool-time",function(e,val){self.isInitial=!1,self.hideContent(),self.loadData(val*self.$millisecs)})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.isInitial=!0,self.$millisecs=6e4,self.getInitialInfo(),self.$container=$("#mb-f015-tool-content"),self.$article=self.$container.find(".mb-f015-slide-content"),self.$header=$("#mbc-header"),self.$toolBtn=$("#mbc-f015-timetool-btn-start")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.AUTO_SCROLL_TIME_OFFSET=2500,window.F015AutoScroller=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.getContent=function(){self.$slides=self.$element.find("li.mb-f015-slide"),config.F015.isAutonomous=!0,-1==config.F015.currentSlide&&$__WINDOW__.trigger("mb-f015-scroll-to-slide",[1]),self.startPlayingTimeout=setTimeout(function(){self.playContent(!1)},5500),self.isInit&&self.bindScrollEvents(),$__WINDOW__.trigger("mb-f015-start-btn-autonomous-surf")},this.bindScrollEvents=function(){$__WINDOW__.on("mousewheel.F015AutoScroller",$.debounce(250,!0,function(e){self.stop(),!self.isAutoplay&&self.$currentSlide&&self.setCurrentSectionByScrollPosition()}))},this.setCurrentSectionByScrollPosition=function(){for(var calcTime=0,$sections=self.$currentSlide.find("section:visible"),i=0;i<$sections.length;i++)if(calcTime+=$sections.eq(i).data("reading-time"),self.inView($sections.eq(i)))return self.currentTime=calcTime,self.currentSectionIndex=i,void self.startAnimation("continue")},this.gotoNextSlide=function(isInit){return self.stop(),self.slideOpened&&self.closeSlide(),$__WINDOW__.trigger("mb-f015-start-btn-autonomous-surf"),config.F015.currentSlide>=parseInt(config.F015.items)-1?(config.F015.isAutonomous=!1,self.stop(),void $__WINDOW__.trigger("mb-f015-scroll-to-slide",[config.F015.currentSlide+2])):void(self.sectionTimeout=setTimeout(function(){self.scrollToNextSection()},2500))},this.scrollToNextSection=function(){$__WINDOW__.trigger("mb-f015-scroll-to-slide",[config.F015.currentSlide+2]),self.sectionTimeout=setTimeout(function(){self.playContent(!0)},5500)},this.playContent=function(isNext){self.isPlaying=!0,self.isAutoplay=!0,config.F015.isAutonomous=!0,self.startPlayingTimeout=setTimeout(function(){return self.$currentSlide=self.$slides.eq(config.F015.currentSlide),self.currentSectionIndex=0,self.currentSectionTotalTime=self.$currentSlide.find(".mb-f015-slide-content").children().eq(0).data("reading-time"),isNaN(self.currentSectionTotalTime)?void self.gotoNextSlide():void(self.isAutoplay&&0==self.isSlideOpen?(self.openSlide(),self.startAnimation("start")):self.startAnimation("start"))},self.fac+window.AUTO_SCROLL_TIME_OFFSET)},this.startAnimation=function(state){if(!("undefined"==typeof self.$currentSlide||self.$currentSlide.find(".mb-f015-slide-content").length<1)){switch($__WINDOW__.trigger("mb-f015-start-btn-autonomous-surf"),self.isPlaying=!0,self.isAutoplay=!0,self.sectionList=self.$currentSlide.find(".mb-f015-slide-content section:visible"),self.numSections=self.sectionList.length,"videoEnd"===state?self.videoEnd=!0:self.videoEnd=!1,self.setCurrentSectionByIndex(self.currentSectionIndex),state){case"start":self.currentSectionTime=0;break;case"continue":self.currentSectionTime=self.currentSectionTotalTime-self.currentSectionRemainingTime;break;case"videoEnd":self.currentSectionTime=self.currentSectionTotalTime}self.playInterval=setTimeout(function(){self.onPlay(self.videoEnd)},self.playDelay)}},this.onPlay=function(videoEnd){if(videoEnd||(self.currentSectionTime=self.currentSectionTime+self.fac,self.currentTime=self.currentTime+self.fac,self.currentSectionRemainingTime=self.currentSectionTotalTime-self.currentSectionTime),self.currentSectionTime>=self.currentSectionTotalTime&&self.$currentSection.hasClass("mbc-article-video")&&self.$currentSection.data("player")&&(videoEnd||(self.currentSectionTime=1e3*Math.ceil(self.$currentSection.data("player").getCurrentTime()))),self.currentSectionTime>=self.currentSectionTotalTime){if(self.currentSectionIndex>=self.numSections-1)return self.gotoNextSlide(),void(self.videoEnd=!1);self.videoEnd=!1,self.setCurrentSectionByIndex(self.currentSectionIndex+1),$__WINDOW__.trigger("mb-f015-scroll-to-element",[self.$currentSection])}self.playInterval=setTimeout(function(){self.onPlay(self.videoEnd)},self.playDelay)},this.setCurrentSectionByIndex=function(sectionIndex){self.currentSectionIndex=sectionIndex,self.$currentSection=self.sectionList.eq(self.currentSectionIndex),self.currentSectionTime=0,self.currentSectionTotalTime=self.currentSectionRemainingTime=self.$currentSection.data("reading-time"),isNaN(self.currentSectionTotalTime)&&(self.currentSectionTotalTime=self.fac+window.AUTO_SCROLL_TIME_OFFSET),self.$currentSection.hasClass("mbc-article-video")?(self.playDelay=self.playDelayVideo,self.videoEnd||self.playVideoContent(self.$currentSection)):self.$currentSection.hasClass("mbc-article-gallery")?(self.playDelay=self.playDelayVideo,self.playGallery(self.$currentSection,self.$currentSection.data("slide-count"),self.$currentSection.data("reading-time"))):self.playDelay=self.playDelayText},this.playGallery=function($el,count,time){var clickInt=Math.round(time/count)/(self.fac/1e3),clickInt=clickInt*(self.playDelay/1e3),$next=$el.find("a.mbc-slider-arrow-right-shdw"),activeImage=0,clickInterval=setInterval(function(){$next.trigger("click"),activeImage>=count-1&&window.clearInterval(clickInterval),activeImage++},clickInt)},this.inView=function($el){var scrollPosition=$__WINDOW__.scrollTop(),visibleArea=$__WINDOW__.scrollTop()+$__WINDOW__.height(),objEndPos=$el.offset().top+$el.outerHeight();return visibleArea>=objEndPos&&objEndPos>=scrollPosition?!0:!1},this.playVideoContent=function($section){var $el=$section.find(".mbc-ytplayer").get(0),videoid=$section.data("video-id");if($section.data("player")){var player=$section.data("player");return void player.playVideo()}var player=new YT.Player($el,{videoId:videoid,playerVars:{modestbranding:1,showinfo:0,WMode:"opaque",color:"white"},events:{onReady:function(e){$__HTML__.hasClass("iPad")||"mobile"===wpmbcom.helper.browser.device()||"tablet"===wpmbcom.helper.browser.device()?self.stop():(player.playVideo(),$__WINDOW__.on("mb-f015-slide-closed-finished",function(e,pos){try{player.stopVideo()}catch(error){}}))},onStateChange:function(e){switch(e.data){case YT.PlayerState.ENDED:self.stop();try{player.stopVideo()}catch(error){}self.startAnimation("videoEnd");break;case YT.PlayerState.PAUSED:self.stop();break;case YT.PlayerState.PLAYING:self.stop(),self.startAnimation("continue");break;case YT.PlayerState.BUFFERING:self.stop()}}}});$section.data("player",player)},this.openSlide=function(){self.slideOpened=!0,self.$currentSlide.find(".mb-f015-load-more").trigger("click")},this.closeSlide=function(){self.slideOpened=!1,self.$currentSlide.find(".mbc-f015-close-article a").trigger("click")},this.stop=function(){self.clearTimeouts(),self.isPlaying=!1,self.isAutoplay=!1,$__WINDOW__.trigger("mb-f015-stop-button-auto-surf")},this.clearTimeouts=function(){window.clearTimeout(self.sectionTimeout),window.clearTimeout(self.startPlayingTimeout),window.clearTimeout(self.playInterval)},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id&&(self.isInit=!0,self.currentTime=0,self.currentSectionIndex=0,self.currentSectionTime=0,self.isAutoplay=!1,self.isPlaying=!1,self.isSlideOpen=!1,self.fac=1e3,self.playDelayText=1e3,self.playDelayVideo=1e3,self.playDelay=self.playDelayText,$__WINDOW__.on("mb-f015-start-auto-scroll",function(){wpmbcom.helper.preloader.hide(),setTimeout(function(){self.isAutoplay=!0,self.isInit&&self.isSlideOpen===!1?(self.getContent(),self.isInit=!1):(self.isSlideOpen&&self.isInit===!1?($__WINDOW__.trigger("mb-f015-render-current-content",config.F015.currentSlide),self.startAnimation("continue")):self.isSlideOpen&&self.isInit===!0?($__WINDOW__.trigger("mb-f015-render-current-content",config.F015.currentSlide),self.getContent()):($__WINDOW__.trigger("mb-f015-render-current-content",config.F015.currentSlide),self.getContent()),self.isInit=!1)},1e3)}),$__WINDOW__.on("mb-f015-dot-navigation-clicked mb-f015-close-article-trigger mb-f015-stop-auto-scroll",function(){self.isAutoplay&&self.stop()}),$__WINDOW__.on("mb-f015-slide-closed-finished",function(e,pos){self.isSlideOpen=!1}),$__WINDOW__.on("mb-f015-slide-open-finished",function(e,obj){self.isSlideOpen=!0}),$__WINDOW__.on("mb-f015-change-reading-speed",function(e,val){switch(val){case 1:self.playDelayText=500;break;case 2:self.playDelayText=333;break;case 0:default:self.playDelayText=1e3}self.isPlaying&&self.isSlideOpen&&(self.stop(),self.startAnimation("continue"))}))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015Clock=function(){var element,$element,options,$time,circleContext,circleImageData,self=this,circ=2*Math.PI,quart=Math.PI/2;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setTime=function(currentTime,playTime){var time=self.msToTime(playTime-currentTime);playTime>=currentTime?($time.text(time),this.updateCircle(1-currentTime/playTime)):($time.text("00:00"),this.updateCircle(0))},this.msToTime=function(s){var ms=s%1e3;s=(s-ms)/1e3;var secs=s%60;s=(s-secs)/60;var mins=s%60,hrs=(s-mins)/60;return 10>secs&&(secs="0"+secs),10>mins&&(mins="0"+mins),10>hrs&&(hrs="0"+hrs),mins+":"+secs},this.initCircleCanvas=function(){var canvas=document.createElement("canvas");canvas.id="mb-f015-menu-clock-circle",canvas.width=30,canvas.height=30,canvas.style.position="absolute",canvas.style.left="-2px",canvas.style.top="-2px",$element.append(canvas),circleContext=canvas.getContext("2d"),circleContext.beginPath(),circleContext.strokeStyle="#00adef",circleContext.lineCap="square",circleContext.closePath(),circleContext.fill(),circleContext.lineWidth=2.5,circleImageData=circleContext.getImageData(0,0,30,30)},this.updateCircle=function(percent){circleContext.putImageData(circleImageData,0,0),circleContext.beginPath(),circleContext.arc(15,15,12,-quart,circ*percent-quart,!1),circleContext.stroke()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$time=$("#mb-f015-time",$element),this.initCircleCanvas(),this.setTime(0,36e3),$__WINDOW__.on("mb-f015-update-clock",function(e,currentTime,playTime){this.setTime(currentTime,playTime)}.bind(this))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015Scroll=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){if(!self.slideOpened){self.slideHeight=$__WINDOW__.height(),self.$slides.height(self.slideHeight),self.$slidesBG.height(self.slideHeight),self.headerHeight=$("#mbc-header.mb-f015").height();var ypos=-(self.slideHeight*self.currentSlide);TweenMax.to(self.$scrollcontainer,0,{y:ypos})}self.timeToolAccessible="none"!=$("#mb-f015-tool").css("display")&&"none"!=$("#mb-f015-tool-inner-wrapper").css("display")},this.ondevicechange=function(){},this.scrollToSlide=function(slide){slide!==self.currentSlide&&slide!==self.currentRequestedSlide&&self.animationRdy&&(self.currentRequestedSlide=slide,self.animationRdy=!1,self.beforeScroll())},this.beforeScroll=function(){$__WINDOW__.off("mb-f015-before-scroll.F015Scroll"),$__WINDOW__.on("mb-f015-before-scroll.F015Scroll",function(event,data){$__WINDOW__.off("mb-f015-before-scroll.F015Scroll"),event.isPropagationStopped()||self.performScrollToRequestedSlide()});var hasBackgroundSequence=1==Math.abs(self.currentSlide-self.currentRequestedSlide)&&self.currentRequestedSlide+self.currentSlide<=11&&!self.isMobile;$__WINDOW__.trigger("mb-f015-before-scroll",{currentRequestedSlide:self.currentRequestedSlide,currentSlide:self.currentSlide,completeCallback:self.playBackgroundAnimation,hasBackgroundSequence:hasBackgroundSequence})},this.afterScroll=function(){var lastSlide=self.currentSlide;self.currentSlide=self.currentRequestedSlide,$__WINDOW__.trigger("mb-f015-after-scroll",{currentSlide:self.currentSlide,lastSlide:lastSlide})},this.playBackgroundAnimation=function(){var hasBackgroundSequence=1==Math.abs(self.currentSlide-self.currentRequestedSlide)&&self.currentRequestedSlide+self.currentSlide<=11&&!self.isMobile;return hasBackgroundSequence?($__WINDOW__.off("mb-f015-background-animation-complete.F015Scroll"),$__WINDOW__.on("mb-f015-background-animation-complete.F015Scroll",function(){6===self.currentRequestedSlide?(TweenMax.to(self.canvas,.5,{autoAlpha:1}),TweenMax.to(self.$scrollcontainer,1,{autoAlpha:1})):(self.$scrollcontainer.css({visibility:"visible",opacity:"1"}),self.canvas.css({visibility:"visible",opacity:"1"})),$__WINDOW__.off("mb-f015-background-animation-complete.F015Scroll"),self.performScrollToRequestedSlide()}),5===config.F015.currentSlide?(TweenMax.to(self.$scrollcontainer,.7,{autoAlpha:0}),TweenMax.to(self.canvas,.5,{autoAlpha:1})):(self.$scrollcontainer.css({visibility:"hidden",opacity:"0"}),self.canvas.css({visibility:"visible",opacity:"1"})),void $__WINDOW__.trigger("mb-f015-start-background-animation",{currentRequestedSlide:self.currentRequestedSlide,currentSlide:self.currentSlide})):(self.performScrollToRequestedSlide(),void $__WINDOW__.trigger("f015-background-canas-clear"))},this.performScrollToRequestedSlide=function(){self.animationRdy=!1;var ypos=-(self.slideHeight*self.currentRequestedSlide);TweenMax.to(self.$scrollcontainer,0,{y:ypos,ease:Sine.easeOut,onComplete:function(){self.animationRdy=!0,self.afterScroll()}}),$__WINDOW__.trigger("mb-f015-new-scroll-position",[ypos])},this.scrollToElement=function($el){$el=$($el);var ypos=$el.offset().top-self.headerHeight;$__HTML__.hasClass("iPad")?$("html, body").animate({scrollTop:ypos+"px"},500):TweenMax.to([$__WINDOW__,$__DOCUMENT__],.5,{scrollTo:{y:ypos},ease:Sine.easeOut})},this.setSlideAnimation=function(direction){var requestedSlide;switch(direction){case"up":requestedSlide=self.currentSlide+1;break;case"down":requestedSlide=self.currentSlide-1}requestedSlide=Math.max(requestedSlide,0),self.timeToolAccessible||(requestedSlide=Math.max(requestedSlide,1)),requestedSlide=Math.min(requestedSlide,self.slideCount-1+(self.hasRelatedArticles?1:0)),self.scrollToSlide(requestedSlide)},this.setup=function(){if(element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id){if(self.currentRequestedSlide=0,self.currentSlide=0,self.$slides=$(".mb-f015-slide"),self.$slides.height($__WINDOW__.height()),self.slideHeight=self.$slides.height(),self.slideCount=self.$slides.length+F015_NUM_START_SLIDES,self.$slidesBG=self.$slides.find(".mb-f015-slide-bg-wrapper"),self.$slidesBG.height(self.slideHeight),self.canvas=$("#f015-background-animation"),self.animationRdy=!0,self.slideOpened=!1,self.$scrollcontainer=self.$element.find("#mb-f015-scroll-container"),self.headerHeight=$("#mbc-header.mb-f015").height(),self.isMobile="mobile"===wpmbcom.helper.browser.device(),self.timeToolAccessible="none"!=$("#mb-f015-tool").css("display")&&"none"!=$("#mb-f015-tool-inner-wrapper").css("display"),self.hasRelatedArticles=$(".mb-f015-related").length>0,$__WINDOW__.on("mbc-preload-complete.F015Scroll",function(){$__WINDOW__.off("mbc-preload-complete.F015Scroll"),$__WINDOW__.trigger("mb-f015-before-scroll",{currentRequestedSlide:this.currentSlide,currentSlide:-1,completeCallback:function(){}}),$__WINDOW__.trigger("mb-f015-after-scroll",{currentSlide:this.currentSlide,lastSlide:-1})}.bind(this)),$__WINDOW__.on("mousewheel",function(e){self.slideOpened||self.mobileNaviOpened||e.preventDefault()}),$__WINDOW__.on("mousewheel",$.debounce(250,!0,function(e){self._handleScrollRequest(e.deltaY)})),Modernizr.touch){var delta;$__WINDOW__.swipe({swipe:function(event,direction,distance,duration,fingerCount,fingerData){("down"==direction||"up"==direction)&&(delta="down"===direction?1:-1,self._handleScrollRequest(delta))},threshold:50})}$__WINDOW__.on("mb-f015-slide-closed",function(){self.slideOpened=!1,$__WINDOW__.swipe("enable")}),$__WINDOW__.on("mb-f015-slide-open",function(){self.slideOpened=!0,$__WINDOW__.swipe("disable")}),$__WINDOW__.on("mb-f015-scroll-to-slide",function(e,slide){slide!==self.currentSlide&&slide!==self.currentRequestedSlide&&self.scrollToSlide(slide)}),$__WINDOW__.on("mb-f015-scroll-to-element",function(e,$el){self.scrollToElement($el)}),$__WINDOW__.on("yt.video.show yt.video.hide",function(e){self.mobileNaviOpened=$(".mbc-mobile-navi-header").hasClass("mbc-open")})}},this._handleScrollRequest=function(dir){self.mobileNaviOpened||self.slideOpened||self.setSlideAnimation(0>dir?"up":"down")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015_NUM_START_SLIDES=1,window.F015Slides=function(){var element,$element,options,$contentImage,$bg,$contentCopy,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.prepareForFadeIn=function(dir,hasBackgroundSequence){if(self.id>=0&&self.id<window.config.F015.filteredContent.length){var sections=window.config.F015.filteredContent[self.id];self.$readMoreLinks.css("display",sections.length>0?"inline-block":"none"),sections.length>0&&sections.length<=2&&$(sections[0][0].content).hasClass("mbc-article-video")?(self.$closeArticle.data("default-label",self.$closeArticle.text()),self.$closeArticle.text(self.$closeArticle.data("close-article-no-text"))):self.$closeArticle.data("default-label")&&self.$closeArticle.text(self.$closeArticle.data("default-label"))}self.isMobile===!1?($bg.css("opacity",hasBackgroundSequence?1:0),$contentImage.css("opacity",0),$contentImage.css("margin-top",50*dir+"px"),$contentCopy.children().each(function(index,val){var $val=$(val);$val.css("position","relative"),$val.css("opacity",0),$val.css("top",30*dir+"px")})):($bg.css("opacity",0),$contentCopy.css("opacity",0))},this.fadeIn=function(dir){if(TweenMax.to($bg,.3,{opacity:1,ease:Quad.easeIn}),self.isMobile===!1){var copyItems=$contentCopy.children().get();-1==dir&&(copyItems=copyItems.reverse()),_.each(copyItems,function(val,index){TweenMax.to(val,.3,{delay:.2+.15*index,opacity:1,top:"0px",ease:Power2.easeOut})}),TweenMax.to($contentImage,.9,{delay:.2,opacity:1,marginTop:0,ease:Power2.easeOut})}else TweenMax.to($contentCopy,.5,{delay:.3,opacity:1,ease:Power2.easeIn})},this.fadeOut=function(dir,callBack,hasBackgroundSequence){if(self.opened)return $__WINDOW__.off("mb-f015-slide-closed-finished.F015SliderFadeOut"),$__WINDOW__.on("mb-f015-slide-closed-finished.F015SliderFadeOut",function(e,obj){$__WINDOW__.off("mb-f015-slide-closed-finished.F015SliderFadeOut"),obj.id===this.id&&this.fadeOut(dir,callBack)}.bind(this)),void $__WINDOW__.trigger("mb-f015-slide-closed",{height:self.height,id:self.id});if(self.isMobile===!1){var copyItems=$contentCopy.children().get(),contentImageDelay=0;-1==dir&&(copyItems=copyItems.reverse(),contentImageDelay=.15*(copyItems.length-1)),_.each(copyItems,function(val,index){TweenMax.to(val,.3,{delay:.15*index,opacity:0,top:-30*dir+"px",ease:Power2.easeIn})}),TweenMax.to($contentImage,.5,{delay:contentImageDelay,opacity:0,marginTop:-50*dir+"px",ease:Power2.easeIn})}else TweenMax.to($contentCopy,.5,{delay:.3,opacity:0,ease:Power2.easeIn});TweenMax.to($bg,.3,{delay:contentImageDelay+.5,opacity:hasBackgroundSequence?1:0,ease:Quad.easeIn,onComplete:callBack})},this.setup=function(){if(element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id){$contentImage=$(".mb-f015-content-image",$element),$contentCopy=$(".mb-f015-content-copy",$element),$bg=$(".mb-f015-slide-bg-wrapper",$element),self.id=parseInt(self.$element.data("slide-id")),self.$readMoreLinks=self.$element.find(".mb-f015-load-more"),self.$closeArticle=self.$element.find(".mbc-f015-close-article a"),self.slideHeight=self.$element.height(),self.height=0,self.isMobile="mobile"===wpmbcom.helper.browser.device(),self.isIframe=self.$element.hasClass("mb-f015-slide-iframe");var $nav=$("#mbc-header"),$oldContentImage=$contentImage;$contentImage=$('<div class="mb-f015-content-image" style="background-image: url(\''+$oldContentImage.attr("src")+"');\"></div>"),$oldContentImage.after($contentImage),$oldContentImage.remove(),self.$readMoreLinks.on("click tap",function(e){e.preventDefault(),self.height=self.$element.find(".mb-f015-slide-content").height()+self.$closeArticle.height(),$nav.addClass("open"),$__WINDOW__.trigger("mb-f015-slide-open",{height:self.height,id:self.id})}),self.$closeArticle.on("click tap",function(e){e.preventDefault(),$nav.removeClass("open"),void 0!==e.originalEvent&&$__WINDOW__.trigger("mb-f015-close-article-trigger"),$__WINDOW__.trigger("mb-f015-slide-closed",{height:self.height,id:self.id})}),$__WINDOW__.on("mb-f015-slide-closed",function(){self.stopAllVideos()}),$__WINDOW__.on("mb-f015-slide-closed-finished",function(e,obj){obj.id===self.id&&(self.$element.height($__WINDOW__.height()),self.opened=!1)}),$__WINDOW__.on("mb-f015-slide-open-finished",function(e,obj){obj.id===self.id&&(self.$element.height(self.height),self.opened=!0)}),$__WINDOW__.on("mb-f015-reset-slide-height",function(e,obj){obj.id===self.id&&(self.$element.height(obj.height),self.opened=!0,self.isIframe&&self.$element.find(".mb-f015-slide-content").height(obj.height))}),$__WINDOW__.on("mb-f015-before-scroll",function(event,data){data.currentSlide==self.id+F015_NUM_START_SLIDES&&(event.stopPropagation(),self.fadeOut(data.currentRequestedSlide>data.currentSlide?1:-1,data.completeCallback,data.hasBackgroundSequence)),data.currentRequestedSlide==self.id+F015_NUM_START_SLIDES&&self.prepareForFadeIn(data.currentRequestedSlide>data.currentSlide?1:-1,data.hasBackgroundSequence)}),$__WINDOW__.on("mb-f015-after-scroll",function(event,data){data.currentSlide==self.id+F015_NUM_START_SLIDES&&self.fadeIn(data.currentSlide>data.lastSlide?1:-1),config.F015.currentSlide=data.currentSlide-1,self.id===data.currentSlide-1&&TweenMax.delayedCall(1,function(){$__WINDOW__.trigger("mb-f015-render-current-content",data.currentSlide-1)})})}},this.stopAllVideos=function(){$('iframe[src*="//www.youtube.com/embed/"]',$element).each(function(i){this.contentWindow.postMessage?this.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"):this.contentWindow.location.href=$(this).attr("src").split("autoplay=1").join("autoplay=0")})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015iFrameHandler=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$contents=self.$element.find("li.mb-f015-slide"),self.$btn=self.$contents.find(".mbc-load-more-btn"),self.$iframe=self.$contents.find(".mbc-iframe-resize"),self.$header=$("#mbc-header"),self.$iframeWrapper=self.$contents.find(".mb-f015-slide-content"),self.$iframeWrapper.height(0),self.$btn.on("click",function(e){e.preventDefault();var height,$context=$(this),id=parseInt($context.data("slide-id"));if(height=self.$iframe.eq(id).height(),$context.hasClass("open"))TweenMax.to(self.$iframeWrapper.eq(id),.5,{height:0}),$context.removeClass("open"),self.$contents.eq(id).removeClass("open"),$__WINDOW__.trigger("mb-f015-slide-closed"),TweenMax.to([$__WINDOW__,$__DOCUMENT__],.5,{scrollTo:{y:self.$contents.eq(id).offset().top},ease:Sine.easeOut});else{var $frame=self.$iframeWrapper.eq(id);$context.addClass("open"),self.$contents.eq(id).addClass("open"),TweenMax.to($frame,1,{height:height}),TweenMax.to([$__WINDOW__,$__DOCUMENT__],.5,{scrollTo:{y:$frame.offset().top-self.$header.height()},ease:Sine.easeOut}),$__WINDOW__.trigger("mb-f015-slide-open")}})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015MainNavigationToggle=function(){var element,$element,options,$mainNavContainer,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.toggle=function(event){event&&event.preventDefault(),$mainNavContainer.hasClass("hidden")?($mainNavContainer.removeClass("hidden"),$element.addClass("toggled"),TweenMax.to(self.$header,.4,{backgroundColor:"rgba(0,0,0,0.8)"})):($mainNavContainer.addClass("hidden"),$element.removeClass("toggled"),self.isSlideOpen===!1&&TweenMax.to(self.$header,.4,{backgroundColor:"rgba(0,0,0,0)"}))},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$header=$(".mb-f015-header"),self.isSlideOpen=!1,$mainNavContainer=$("#mbc-main-nav-container"),$mainNavContainer.addClass("hidden"),$element.on("click",this.toggle.bind(this)),$__WINDOW__.on("mb-f015-slide-closed-finished",function(){self.isSlideOpen=!1,$mainNavContainer.addClass("hidden")}),$__WINDOW__.on("mb-f015-slide-open-finished",function(e,obj){self.isSlideOpen=!0}),$__WINDOW__.on("mb-f015-after-scroll",function(event,data){data.currentSlide>0?TweenMax.to(self.$header,.4,{backgroundColor:"rgba(0,0,0,0.8)"}):0==data.currentSlide&&$mainNavContainer.hasClass("hidden")&&TweenMax.to(self.$header,.4,{backgroundColor:"rgba(0,0,0,0.0)"})})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015CanvasTimeTool=function(){var element,$element,options,tempAngle,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){self.canvas&&self.canvas.$element&&(self.canvas.centerX=self.canvas.$element.offset().left+self.canvas.width/2/self.devicePixelratio,self.canvas.centerY=self.canvas.$element.offset().top+self.canvas.height/2/self.devicePixelratio)},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){if(element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id){if(self.firstShow=!0,self.flyoutActive=!1,self.flyout=$("#flyout-time-tool",self.$element),self.slideIntroText=$(".mb-f015-start-text",self.$element),self.slideBackground=$(".mb-f015-tool-wrapper-bg-img",self.$element),self.isMobile="mobile"===wpmbcom.helper.browser.device(),self.isMobile)return void setTimeout(function(){$__WINDOW__.trigger("f015-canvas-animation-intro-finished")},2e3);TweenMax.set(self.slideIntroText,{opacity:0}),self.initCanvas();var max,isMobile="mobile"===wpmbcom.helper.browser.device(),min=3e5;$__WINDOW__.on("mb-f015-set-inital-time",function(e,val){max=val}),$__WINDOW__.on("mb-f015-after-scroll",function(event,data){if(0===data.currentSlide){var showFlyout=!0,delay=250;self.firstShow===!1&&(showFlyout=!1,delay=500,self.reset()),self.firstShow=!1,self.active=!0,self.setTimeSpan(min,max),setTimeout(function(){self.animateIn(showFlyout)},delay)}}),$__WINDOW__.on("mb-f015-before-scroll",function(event,data){isMobile||(0!=data.currentRequestedSlide&&0===data.currentSlide?(event.stopPropagation(),self.active=!1,self.animateBlowUp(data.completeCallback,data.hasBackgroundSequence)):(clearTimeout(self.timerFlyout),self.flyoutActive===!0&&self.hideFlyout()))})}},this.setTimeSpan=function(min,max){self.durationSpan.min=Math.round(min/6e4),self.durationSpan.max=Math.round(max/6e4),self.durationSpan.duration=0},this.initCanvas=function(){config.colors={},config.colors.mbColWhite="#fff",config.colors.mbColCyan="#00adef",config.colors.mbColCyanRGBA="#00adef",config.colors.mbColCyanDark="#0088c6",config.colors.mbColBlueDark="#003366",config.colors.mbColBlueLight="#71aed7",config.isIE="Explorer"===wpmbcom.helper.browser.type&&wpmbcom.helper.browser.version<=11,config.isIPad="iPad"===wpmbcom.helper.browser.type,config.isMobile=$(window).width()<=768?!0:!1,config.touch=Modernizr.touch,self.rotationDeltaLogged=!1,self.mouse={},self.mouse.x=0,self.mouse.y=0,self.pluginEnabled=!0,self.mouseoverClickcatcher=!1,self.triggerDurationEvents=!1,self.cachePosition={},self.cachePosition.doCache=!1,self.cachePosition.oldX=0,self.cachePosition.oldY=0,self.cachePosition.x=0,self.cachePosition.y=0,self.durationSpan={},self.canvas={},self.canvas.$element=$("canvas",$element),self.canvas.element=$("canvas",$element)[0],self.canvas.context=self.canvas.$element[0].getContext("2d"),self.devicePixelratio=isNaN(Number(window.devicePixelRatio))?1:Number(window.devicePixelRatio),self.canvas.backingStorePixelRatio=self.canvas.context.webkitBackingStorePixelRatio||self.canvas.context.mozBackingStorePixelRatio||self.canvas.context.msBackingStorePixelRatio||self.canvas.context.oBackingStorePixelRatio||self.canvas.context.backingStorePixelRatio||1,self.canvas.pixelRatio=self.devicePixelratio!==self.canvas.backingStorePixelRatio?self.devicePixelratio:1,self.imageScaleRatio=2===self.canvas.pixelRatio?1:.5,self.canvas.element.width=self.canvas.$element.attr("width")*self.canvas.pixelRatio,self.canvas.element.height=self.canvas.$element.attr("height")*self.canvas.pixelRatio,self.canvas.width=self.canvas.$element.attr("width"),self.canvas.height=self.canvas.$element.attr("height"),self.canvas.stage=new createjs.Stage("mbc-f015-canvas-timetool"),config.isIE===!1&&self.drawGlow(),self.drawKnob(),self.drawCircleSegments(),self.canvas.stage.enableMouseOver(25),createjs.Touch.enable(self.canvas.stage),TweenMax.ticker.addEventListener("tick",self.onTickCanvas)},this.animateIn=function(showFlyout){showFlyout="undefined"==typeof showFlyout?!1:showFlyout;var durationIn=Math.abs(self.buttonStart.degOld)/200,durationInStatic=3.2;self.triggerDurationEvents=!0,self.scriptedAnimation=1,self.lastAngle=self.buttonStart.degOld,TweenMax.to(self.circleSegments.container,.6*durationIn,{alpha:.65,ease:Quad.easeInOut}),TweenMax.to(self.circleSegments.containerHover,.6*durationIn,{alpha:1,ease:Quad.easeInOut}),TweenMax.to(self.slideBackground,durationInStatic,{delay:0,opacity:1,ease:Cubic.easeInOut}),TweenMax.to(self.slideIntroText,durationInStatic/2,{delay:0,opacity:1,ease:Cubic.easeInOut}),TweenMax.to(self.buttonStart.background,durationIn,{alpha:1,ease:Quad.easeInOut}),TweenMax.to(self.buttonStart.center,durationIn,{alpha:1,ease:Quad.easeInOut}),TweenMax.to(self.buttonStart.centerText,durationIn,{alpha:1,ease:Quad.easeInOut}),TweenMax.to(self.buttonStart,durationIn,{deg:self.buttonStart.degOld,ease:Quad.easeOut,onComplete:function(){self.canvas.centerX=self.canvas.$element.offset().left+self.canvas.width/2/self.devicePixelratio,self.canvas.centerY=self.canvas.$element.offset().top+self.canvas.height/2/self.devicePixelratio,self.lockedRotationDirection=0,360===self.buttonStart.degOld&&(self.lockedRotationDirection=-1),0===self.buttonStart.degOld&&(self.lockedRotationDirection=1),self.scriptedAnimation=0,self.bindMouseListener(),$__WINDOW__.trigger("f015-canvas-animation-intro-finished"),showFlyout===!0&&self.startTimerFlyout()}})},this.startTimerFlyout=function(){
self.timerFlyout=setTimeout(self.showFlyout,3e3)},this.showFlyout=function(){self.flyoutActive=!0;var x=768===$__WINDOW__.width()?0:30;TweenMax.set(self.flyout,{css:{visibility:"visible"}}),TweenMax.to(self.flyout,.5,{alpha:1,x:x,ease:Quad.easeOut})},this.hideFlyout=function(){self.flyoutActive=!1,TweenMax.to(self.flyout,.4,{alpha:0,ease:Quad.easeInOut,onComplete:function(){TweenMax.set(self.flyout,{css:{visibility:"hidden"}})}})},this.animateBlowUp=function(completeCallback,hasBackgroundSequence){"undefined"==typeof completeCallback&&(completeCallback=null),clearTimeout(self.timerFlyout),self.flyoutActive===!0&&self.hideFlyout(),self.triggerDurationEvents=!1,self.unbindMouseListener(),self.scriptedAnimation=-1;var durationUp=.5,scaleTo=1.03*self.imageScaleRatio;self.buttonStart.degOld=self.buttonStart.deg,self.buttonStart.centerBitmapCached===!1&&(self.buttonStart.centerBitmapCached=!0,self.buttonStart.centerBitmap.cache(0,0,334,334)),TweenMax.to(self.buttonStart.centerBitmap,durationUp,{rotation:10,easel:{tint:"#000",tintAmount:.5},ease:Quad.easeOut}),TweenMax.to(self.buttonStart.centerText,durationUp,{alpha:0,ease:Quad.easeInOut}),config.isIE===!1&&TweenMax.to(self.glow,durationUp,{alpha:0,ease:Quad.easeOut}),TweenMax.to(self.buttonStart.background,durationUp,{rotation:20,scaleX:scaleTo,scaleY:scaleTo,ease:Quad.easeOut,onComplete:function(){self.animateOut(completeCallback,hasBackgroundSequence)}}),TweenMax.to(self.slideIntroText,durationUp,{delay:0,opacity:0,ease:Cubic.easeIn}),TweenMax.to(self.buttonStart,1.5,{deg:0,ease:Quad.easeIn})},this.animateOut=function(completeCallback,hasBackgroundSequence){var durationOut=1.1,scaleTo=.9*self.imageScaleRatio,delay=.1;hasBackgroundSequence||TweenMax.to(self.slideBackground,durationOut,{delay:0,opacity:0,ease:Cubic.easeInOut}),TweenMax.to(self.buttonStart.background,durationOut/2,{delay:delay,rotation:-55,alpha:0,scaleX:scaleTo,scaleY:scaleTo,ease:Quad.easeInOut}),TweenMax.to(self.buttonStart.center,.7*durationOut,{delay:delay+.2*durationOut,alpha:0,ease:Quad.easeInOut}),TweenMax.to(self.circleSegments.container,.4*durationOut,{delay:delay+.4*durationOut,alpha:0,ease:Quad.easeIn}),TweenMax.to(self.circleSegments.containerHover,.4*durationOut,{delay:delay+.4*durationOut,alpha:0,ease:Quad.easeIn}),TweenMax.to(self.buttonStart.centerBitmap,durationOut,{delay:delay,rotation:-30,easel:{tint:"#000",tintAmount:1},ease:Quad.easeInOut,onComplete:function(){self.pluginEnabled=!1,null!==completeCallback&&completeCallback()}})},this.reset=function(){var scale=1*self.imageScaleRatio;self.pluginEnabled=!0,self.buttonStart.center.mouseover=!1,self.buttonStart.deg=0,self.buttonStart.degHover=0,self.durationSpan.duration=0,self.lastAngle=self.buttonStart.deg,self.buttonStart.rotationContainer.rotation=self.buttonStart.deg,TweenMax.set(self.buttonStart.background,{rotation:0,alpha:0,scaleX:scale,scaleY:scale}),TweenMax.set(self.buttonStart.centerText,{alpha:0}),TweenMax.set(self.buttonStart.centerBitmap,{rotation:0,easel:{tint:"#000",tintAmount:0}}),TweenMax.set(self.buttonStart.center,{alpha:0,scaleX:1,scaleY:1}),TweenMax.set(self.circleSegments.container,{alpha:0}),TweenMax.set(self.circleSegments.containerHover,{alpha:0})},this.drawCircleSegments=function(){var radius=127*self.canvas.pixelRatio;self.circleSegments={},self.circleSegments.items=[],self.circleSegments.container=new createjs.Container,self.circleSegments.container.x=self.canvas.width/2,self.circleSegments.container.y=self.canvas.height/2,self.circleSegments.container.alpha=0,self.circleSegments.radius=radius,this.drawSegmentLine(self.circleSegments.container,config.colors.mbColCyan,self.circleSegments.items,config.colors.mbColCyan,1,1),self.canvas.stage.addChild(self.circleSegments.container),self.circleSegments.itemsHover=[],self.circleSegments.containerHover=new createjs.Container,self.circleSegments.containerHover.x=self.canvas.width/2,self.circleSegments.containerHover.y=self.canvas.height/2,self.circleSegments.containerHover.alpha=0,this.drawSegmentLine(self.circleSegments.containerHover,"#cbefff",self.circleSegments.itemsHover,"#fff",0,2),self.canvas.stage.addChild(self.circleSegments.containerHover)},this.drawSegmentLine=function(container,color,array,glowColor,alpha,strokeRatio){for(var line=null,countItems=45,widthItem=0,WIDTH_ITEM=10*self.canvas.pixelRatio,WIDTH_FIRST_ITEM=16*self.canvas.pixelRatio,STROKE_STYLE=2*strokeRatio*self.canvas.pixelRatio,i=0;countItems>i;i++)widthItem=0===i?WIDTH_FIRST_ITEM:WIDTH_ITEM,line=new createjs.Shape,line.graphics.setStrokeStyle(STROKE_STYLE),line.graphics.beginStroke(color),line.graphics.moveTo(self.circleSegments.radius,0),line.graphics.lineTo(self.circleSegments.radius+widthItem,0),line.graphics.endStroke(),line.rotation=360*i/countItems-90,line.alpha=alpha,config.isIPad===!1&&(line.shadow=new createjs.Shadow(glowColor,0,0,4*strokeRatio*self.canvas.pixelRatio)),container.addChild(line),array.push(line)},this.getCyanRGBA=function(alpha){return createjs.Graphics.getRGB(0,173,239,alpha)},this.drawGlow=function(){var radius=151*self.canvas.pixelRatio,radiusInner=111*self.canvas.pixelRatio;self.glow=new createjs.Shape,self.glow.graphics.beginRadialGradientFill([self.getCyanRGBA(1),self.getCyanRGBA(0)],[0,1],0,0,radiusInner,0,0,radius),self.glow.graphics.drawCircle(0,0,radius),self.glow.x=self.glow.y=self.canvas.width/2,self.glow.alpha=0,self.canvas.stage.addChild(self.glow)},this.drawKnob=function(){self.buttonStart={},self.buttonStart.rotationContainer=new createjs.Container,self.buttonStart.rotationContainer.x=self.buttonStart.rotationContainer.y=Math.round(self.canvas.width/2),self.canvas.stage.addChild(self.buttonStart.rotationContainer),self.buttonStart.background=new createjs.Bitmap(config.assetpath+"images/f015/tool/button-start-background.png"),self.buttonStart.background.regX=self.buttonStart.background.regY=222,self.buttonStart.background.scaleX=self.buttonStart.background.scaleY=self.imageScaleRatio,self.buttonStart.background.x=self.buttonStart.background.y=Math.round(self.canvas.width/2),config.isIPad===!1&&(self.buttonStart.background.shadow=new createjs.Shadow("#000",0,0,30*self.canvas.pixelRatio)),self.canvas.stage.addChild(self.buttonStart.background),self.buttonStart.center=new createjs.Container,self.buttonStart.center.x=self.buttonStart.center.y=Math.round(self.canvas.width/2),self.canvas.stage.addChild(self.buttonStart.center),self.buttonStart.centerBitmapCached=!1,self.buttonStart.centerBitmap=new createjs.Bitmap(config.assetpath+"images/f015/tool/button-start.png"),self.buttonStart.centerBitmap.regX=self.buttonStart.centerBitmap.regY=Math.round(167),self.buttonStart.centerBitmap.scaleX=self.buttonStart.centerBitmap.scaleY=self.imageScaleRatio,self.buttonStart.center.addChild(self.buttonStart.centerBitmap),self.buttonStart.center.mouseover=!1,self.buttonStart.centerTextCached=!1,"en"===config.lang?self.buttonStart.centerText=new createjs.Bitmap(config.assetpath+"images/f015/tool/button-start-copy-EN.png"):self.buttonStart.centerText=new createjs.Bitmap(config.assetpath+"images/f015/tool/button-start-copy-DE.png"),self.buttonStart.centerText.regX=self.buttonStart.centerText.regY=Math.round(167),self.buttonStart.centerText.scaleX=self.buttonStart.centerText.scaleY=self.imageScaleRatio,self.buttonStart.center.addChild(self.buttonStart.centerText);var radius=Math.round(129*self.canvas.pixelRatio),width=Math.round(64*self.canvas.pixelRatio);self.clickcatcher=new createjs.Shape,self.clickcatcher.graphics.beginStroke(createjs.Graphics.getRGB(0,0,0,.01)),self.clickcatcher.graphics.setStrokeStyle(width),self.clickcatcher.graphics.arc(0,0,radius,0,self.degToRad(360),!0),self.clickcatcher.x=self.clickcatcher.y=self.canvas.width/2,self.canvas.stage.addChild(self.clickcatcher),self.buttonStart.deg=0,self.buttonStart.degHover=0,self.buttonStart.degOld=360,self.lastAngle=self.buttonStart.deg,self.buttonStart.rotationContainer.rotation=self.buttonStart.deg},this.bindMouseListener=function(){self.dragging=!1,config.touch===!0?($(document.body).on("touchstart",self.onBodyMouseDown),$(document.body).bind("touchend",self.onBodyMouseup),$(document.body).bind("touchmove",self.onMouseMove),self.buttonStart.center.on("mousedown",self.onButtonStartClicked),self.clickcatcher.on("mousedown",self.onClickcatcherOver)):($(document.body).on("mousedown",self.onBodyMouseDown),$(document.body).bind("mouseup",self.onBodyMouseup),$(document.body).bind("mousemove",self.onMouseMove),self.buttonStart.center.on("mousedown",self.onButtonStartDown),self.buttonStart.center.on("mouseover",self.onButtonStartOver),self.buttonStart.center.on("mouseout",self.onButtonStartOut),self.clickcatcher.on("mouseover",self.onClickcatcherOver),self.clickcatcher.on("mouseout",self.onClickcatcherOut))},this.unbindMouseListener=function(){config.touch===!0?($(document.body).off("touchstart",self.onBodyMouseDown),$(document.body).unbind("touchend",self.onBodyMouseup),$(document.body).unbind("touchmove",self.onMouseMove),self.buttonStart.center.off("mousedown",self.onButtonStartClicked)):($(document.body).off("mousedown",self.onBodyMouseDown),$(document.body).unbind("mouseup",self.onBodyMouseup),$(document.body).unbind("mousemove",self.onMouseMove),self.buttonStart.center.off("mousedown",self.onButtonStartDown),self.buttonStart.center.off("mouseover",self.onButtonStartOver),self.buttonStart.center.off("mouseout",self.onButtonStartOut),self.clickcatcher.off("mouseover",self.onClickcatcherOver),self.clickcatcher.off("mouseout",self.onClickcatcherOut))},this.onClickcatcherOver=function(event){0===self.scriptedAnimation&&(document.body.style.cursor="pointer",self.mouseoverClickcatcher=!0,clearTimeout(self.timerFlyout),self.flyoutActive===!0&&self.hideFlyout())},this.onClickcatcherOut=function(event){document.body.style.cursor="default",self.mouseoverClickcatcher=!1},this.onBodyMouseDown=function(e){0===self.scriptedAnimation&&self.mouseoverClickcatcher!==!1&&(self.cachePosition.x=config.touch===!0?e.originalEvent.touches[0].pageX:e.pageX,self.cachePosition.y=config.touch===!0?e.originalEvent.touches[0].pageY:e.pageY,self.rotationDeltaLogged=!1,self.dragging=!0,clearTimeout(self.timerFlyout),self.flyoutActive===!0&&self.hideFlyout())},this.onBodyMouseup=function(e){if(0===self.scriptedAnimation){if(config.touch===!0&&(self.mouseoverClickcatcher=!1),self.dragging===!0){var mouseX=config.touch===!0?e.originalEvent.changedTouches[0].pageX:e.pageX,mouseY=config.touch===!0?e.originalEvent.changedTouches[0].pageY:e.pageY,deltaX=Math.abs(mouseX-self.cachePosition.x),deltaY=Math.abs(mouseY-self.cachePosition.y);10>deltaX&&10>deltaY&&self.autoRotateTo(mouseX,mouseY)}self.dragging=!1,self.buttonStart.center.mouseover===!0?$__WINDOW__.trigger("mb-f015-start-auto-scroll"):TweenMax.to(self.buttonStart.center,.6,{alpha:1,scaleX:1,scaleY:1,ease:Bounce.easeOut})}},this.onButtonStartClicked=function(e){$__WINDOW__.trigger("mb-f015-start-auto-scroll")},this.onButtonStartOver=function(e){0===self.scriptedAnimation&&(document.body.style.cursor="pointer",self.buttonStart.center.mouseover=!0,TweenMax.to(self.buttonStart.center,.15,{alpha:.85,scaleX:.987,scaleY:.987,ease:Quad.easeOut}),self.buttonStart.centerTextCached===!1&&(self.buttonStart.centerTextCached=!0,self.buttonStart.centerText.cache(0,0,334,334)),TweenMax.to(self.buttonStart.centerText,.25,{easel:{tint:config.colors.mbColCyan,tintAmount:1},ease:Quad.easeOut}))},this.onButtonStartOut=function(e){0===self.scriptedAnimation&&(document.body.style.cursor="default",self.buttonStart.center.mouseover=!1,TweenMax.to(self.buttonStart.center,.6,{alpha:1,scaleX:1,scaleY:1,ease:Bounce.easeOut}),self.buttonStart.centerTextCached===!1&&(self.buttonStart.centerTextCached=!0,self.buttonStart.centerText.cache(0,0,334,334)),TweenMax.to(self.buttonStart.centerText,.4,{easel:{tint:config.colors.mbColCyan,tintAmount:0},ease:Quad.easeInOut}))},this.onButtonStartDown=function(event){0===self.scriptedAnimation&&TweenMax.to(self.buttonStart.center,.1,{alpha:.8,scaleX:.96,scaleY:.96,ease:Quad.easeOut})},this.autoRotateTo=function(mouseX,mouseY){self.scriptedAnimation=9;var tempAngle=self.calculatePolar(-1*(mouseX-self.canvas.centerX),-1*(mouseY-self.canvas.centerY));TweenMax.to(self.buttonStart,Math.abs(self.lastAngle-tempAngle)/200,{deg:tempAngle,ease:Quad.easeInOut,onComplete:function(){self.scriptedAnimation=0}}),self.lastAngle=tempAngle,self.lockedRotationDirection=0},this.onMouseMove=function(e){if(self.dragging===!0){if(self.mouse.x=config.touch===!0?e.originalEvent.touches[0].pageX:e.pageX,self.mouse.y=config.touch===!0?e.originalEvent.touches[0].pageY:e.pageY,self.rotationDeltaLogged===!1&&(self.rotationDeltaLogged=!0,self.rotationDelta=Math.round(self.buttonStart.deg-self.calculatePolar(-1*(self.mouse.x-self.canvas.centerX),-1*(self.mouse.y-self.canvas.centerY)))),self.buttonStart.degHover=Math.round(self.calculatePolar(-1*(self.mouse.x-self.canvas.centerX),-1*(self.mouse.y-self.canvas.centerY))),tempAngle=self.rotationDelta+self.buttonStart.degHover,tempAngle>360&&(tempAngle-=360),0>tempAngle&&(tempAngle+=360),self.lastAngle===tempAngle)return;1!==self.lockedRotationDirection&&(self.lastAngle>240&&120>tempAngle?(self.lockedRotationDirection=-1,self.buttonStart.deg=360):self.lastAngle-tempAngle>0&&tempAngle>340&&(self.lockedRotationDirection=0)),-1!==self.lockedRotationDirection&&(self.lastAngle<120&&tempAngle>240?(self.lockedRotationDirection=1,self.buttonStart.deg=0):self.lastAngle-tempAngle<0&&20>tempAngle&&(self.lockedRotationDirection=0)),0===self.lockedRotationDirection&&(self.buttonStart.deg=tempAngle),self.lastAngle=tempAngle}else self.mouse.x=config.touch===!0?e.originalEvent.touches[0].pageX:e.pageX,self.mouse.y=config.touch===!0?e.originalEvent.touches[0].pageY:e.pageY,tempAngle=self.calculatePolar(-1*(self.mouse.x-self.canvas.centerX),-1*(self.mouse.y-self.canvas.centerY)),self.buttonStart.degHover=tempAngle},this.onTickCanvas=function(){if(self.pluginEnabled!==!1){self.circleSegments.threeshold=Math.round(self.buttonStart.deg/360*self.circleSegments.items.length),self.circleSegments.hover=Math.round(self.buttonStart.degHover/360*self.circleSegments.items.length),self.circleSegments.alpha=0,self.circleSegments.alphaHover=0,(self.dragging===!0||0!==self.scriptedAnimation)&&(self.circleSegments.hover=self.circleSegments.threeshold),config.isIE===!1&&-1!==self.scriptedAnimation&&(self.glow.alpha=self.buttonStart.deg/360/6);for(var i=0;i<self.circleSegments.items.length;i++)self.circleSegments.alpha=1,i>self.circleSegments.threeshold?self.circleSegments.alpha=0:self.mouseoverClickcatcher===!0&&9!==self.scriptedAnimation&&i>self.circleSegments.hover&&(self.circleSegments.alpha=0),(0!==self.circleSegments.items[i].alpha||1!==self.circleSegments.items[i].alpha)&&TweenMax.to(self.circleSegments.items[i],.15,{alpha:self.circleSegments.alpha,ease:Quad.easeInOut}),(self.mouseoverClickcatcher===!0||0!==self.scriptedAnimation)&&(i===self.circleSegments.hover-3&&(self.circleSegments.alphaHover=.15),i===self.circleSegments.hover-2&&(self.circleSegments.alphaHover=.4),i===self.circleSegments.hover-1&&(self.circleSegments.alphaHover=.65),i===self.circleSegments.hover&&(self.circleSegments.alphaHover=1),i===self.circleSegments.hover+1&&(self.circleSegments.alphaHover=0)),TweenMax.to(self.circleSegments.itemsHover[i],.2,{alpha:self.circleSegments.alphaHover,ease:Sine.easeInOut});self.canvas.stage.update(),self.triggerDurationEvents===!0&&(self.durationSpan.duration=Math.floor(self.buttonStart.deg/(360/(self.durationSpan.max-self.durationSpan.min)))+self.durationSpan.min,(self.dragging===!0||9===self.scriptedAnimation)&&$__WINDOW__.trigger("mb-f015-timetool-set-dot-navigation",self.durationSpan.duration),(self.dragging===!0||1===self.scriptedAnimation||9===self.scriptedAnimation)&&$__WINDOW__.trigger("mb-f015-timetool-set-text",self.durationSpan.duration))}},this.calculatePolar=function(x,y){return self.tempAngle=Math.atan2(y,x)/Math.PI*180-90,self.tempAngle<=0&&(self.tempAngle+=360),self.tempAngle},this.degToRad=function(deg){return deg*Math.PI/180},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015DotNavigation=function(){var element,$element,options,$items,$timetoolButton,self=this;return this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.createChildren=function(config,childDataIsArray){self.childrenCreated=!0,self.dotItems=[],_.each(config,function(childList,itemKey){var spanItems=[];self.dotItems.push(spanItems),_.each(childList,function(childData){childDataIsArray&&(childData=childData[0]),this.addChildToItem(childData,itemKey,spanItems)}.bind(this))}.bind(this)),$element.find(".mb-f015-dot-item-link").on("click",function(e){e.preventDefault(),$__WINDOW__.trigger("mb-f015-scroll-to-slide",parseInt($(this).parent().data("id"))+F015_NUM_START_SLIDES),$__WINDOW__.trigger("mb-f015-dot-navigation-clicked")})},this.updateChildren=function(config,childDataIsArray){self.childrenCreated===!1&&self.createChildren(config,childDataIsArray),_.each(config,function(childList,itemKey){self.thresholdDisplay=childList.length;for(var i=0;i<self.dotItems[itemKey].length;i++)i>=self.thresholdDisplay||"undefined"==typeof childList[i]?self.dotItems[itemKey][i].addClass("disabled"):self.dotItems[itemKey][i].removeClass("disabled")}.bind(this))},this.addChildToItem=function(childData,itemKey,spanItems){var width="auto",percent=childData.time/6e4;"text"==childData.type&&(width=Math.ceil(18*percent)),8>width?width="8px":width+="px";var span=$('<span class="mb-f015-dot-item-child mb-f015-dot-item-child-'+childData.type+'" style="width:'+width+'"></span>');spanItems.push(span),$("a",$items[itemKey]).append(span)},this.setActive=function(itemIndex){$items.removeClass("active"),itemIndex===config.F015.relatedID&&(itemIndex=config.F015.relatedID-1),itemIndex>=0&&itemIndex<=$items.length&&$($items[itemIndex]).addClass("active"),-1===itemIndex?$timetoolButton.addClass("active"):$timetoolButton.removeClass("active")},this.handleSlideOpenClose=function(isOpened){isOpened?$element.addClass("slide-opened"):$element.removeClass("slide-opened")},this.setup=function(){if(element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id){$items=$("li",$element),$timetoolButton=$(".mb-f015-dot-item-timetool",$element),self.childrenCreated=!1;var isMobile="mobile"===wpmbcom.helper.browser.device();isMobile||(this.updateChildren(window.sidebarConfig),$__WINDOW__.on("mb-f015-before-scroll",function(event,data){this.setActive(data.currentRequestedSlide-F015_NUM_START_SLIDES)}.bind(this)),$__WINDOW__.on("mb-f015-slide-open mb-f015-slide-closed",function(event){this.handleSlideOpenClose("mb-f015-slide-open"==event.type)}.bind(this)),$__WINDOW__.on("mb-f015-content-filtered",function(event,filteredConfig){this.updateChildren(filteredConfig,!0)}.bind(this)),$__WINDOW__.on("mb-f015-slide-open mb-f015-slide-closed",function(event){this.handleSlideOpenClose("mb-f015-slide-open"==event.type)}.bind(this)))}},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015FoldAnimation=function(){var element,$element,options,cubeSides,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id&&($("body").css({"background-color":"black"}),self.cube={},self.cubeID=parseInt(self.$element.data("cube-id")),self.cube.container=$element,self.cube.height=self.cube.container.height(),self.cube.front=$(".front",self.cube.container),self.cube.bottom=$(".bottom",self.cube.container),self.cube.back=$(".back",self.cube.container),self.cube.top=$(".top",self.cube.container),self.cube.durationRotation=.55,self.cube.zIndices=[],self.transform3D=!0,self.cubeHeight=self.cube.height,self.rotationX=0,self.fitCubeToWindow(),$__WINDOW__.on("mb-f015-slide-open",function(e,obj){self.transfromEventObject=obj,self.cubeID===self.transfromEventObject.id&&self.prepareRotation3D()}),$__WINDOW__.on("mb-f015-slide-closed",function(e,obj){self.transfromEventObject=obj,self.cubeID===self.transfromEventObject.id&&self.prepareRotation3D()}))},this.fitCubeToWindow=function(){self.transform3D===!0&&(self.transformOrigin3D="50% 50% -"+self.cube.height/2,TweenMax.set(self.cube.front,{transformOrigin:self.transformOrigin3D}),TweenMax.set(self.cube.bottom,{transformOrigin:self.transformOrigin3D,rotationX:-90})),cubeSides={},cubeSides.elements=[self.cube.front,self.cube.bottom]},this.prepareRotation3D=function(){$.each(cubeSides.elements,function(index,value){value.css({display:"block"})}),90===self.rotationX?(self.cube.zIndices=[1e3,900],window.requestAnimFrame(self.resetArticle)):($(".content-cube-side",self.cube.bottom).css({top:"0px"}),self.cube.zIndices=[900,1e3],self.rotationX=90,window.requestAnimFrame(self.rotateCube3D))},this.resetArticle=function(){$(".content-cube-side",self.cube.bottom).css({top:-$(window).scrollTop()}),$(window).scrollTop(0),self.cube.bottom.css({overflow:"hidden",height:"100%",position:"absolute"}),self.cube.container.css({height:"100%",position:"absolute"}),self.rotationX=0,window.requestAnimFrame(self.rotateCube3D),$__WINDOW__.trigger("mb-f015-slide-closed-finished",self.transfromEventObject)},this.rotateCube3D=function(){self.cube.bottom.css({opacity:"1.0"}),TweenMax.delayedCall(self.cube.durationRotation,function(){self.cube.front.css({"z-index":self.cube.zIndices[0]}),self.cube.bottom.css({"z-index":self.cube.zIndices[1]})}),TweenMax.to(self.cube.front,self.cube.durationRotation,{z:.25*-self.cube.height,ease:Sine.easeInOut}),TweenMax.to(self.cube.front,self.cube.durationRotation,{delay:self.cube.durationRotation,z:0,ease:Sine.easeInOut}),TweenMax.to(self.cube.bottom,self.cube.durationRotation,{z:.25*-self.cube.height,ease:Sine.easeInOut}),TweenMax.to(self.cube.bottom,self.cube.durationRotation,{delay:self.cube.durationRotation,z:0,ease:Sine.easeInOut}),TweenMax.to(self.cube.front,2*self.cube.durationRotation,{rotationX:self.rotationX,ease:Sine.easeInOut}),TweenMax.to(self.cube.bottom,2*self.cube.durationRotation,{rotationX:self.rotationX-90,ease:Sine.easeInOut,onComplete:function(){90===self.rotationX?(self.cube.front.css({display:"none"}),window.requestAnimFrame(function(){$__WINDOW__.trigger("mb-f015-slide-open-finished",self.transfromEventObject)})):self.cube.bottom.css({display:"none"})}})},this.fadeIn2D=function(){},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015ScrollIndicator=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.showIndicator=function(){config.F015.isAutonomous||TweenMax.to(self.$element,.5,{autoAlpha:1,delay:1})},this.hideIndicator=function(){TweenMax.killTweensOf(self.$element),TweenMax.to(self.$element,.5,{autoAlpha:0})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id&&(self.isMobile="mobile"===wpmbcom.helper.browser.device(),self.isInitial=!0,TweenMax.set(self.$element,{autoAlpha:0}),$__WINDOW__.on("mb-f015-init-canvas-time-tool",function(){self.initialTimer=setTimeout(function(){self.showIndicator(),self.isInitial=!1},3e3)}),$__WINDOW__.on("mb-f015-before-scroll mb-f015-slide-open mb-f015-slide-open-finished mb-f015-hide-scroll-indicator",function(){clearTimeout(self.initialTimer),self.hideIndicator()}),self.$element.find(".mbc-load-more-btn").on("click tap",function(e){e.preventDefault(),$__WINDOW__.trigger("mb-f015-scroll-to-slide",[config.F015.currentSlide+2])}),$__WINDOW__.on("mb-f015-after-scroll mb-f015-slide-closed-finished mb-f015-show-scroll-indicator",function(){clearTimeout(self.initialTimer),self.isMobile&&config.F015.currentSlide<=config.F015.relatedID-3&&self.showIndicator()}))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015Router=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.checkHash=function(){var id=parseInt(window.location.hash.replace("#",""));isNaN(id)||$__WINDOW__.trigger("mb-f015-scroll-to-slide",id+F015_NUM_START_SLIDES)},this.updateHash=function(hash){window.location.hash=hash},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.checkHash(),$__WINDOW__.on("hashchange",this.checkHash.bind(this)),$__WINDOW__.on("mb-f015-before-scroll",function(event,data){data.currentRequestedSlide>=F015_NUM_START_SLIDES&&this.updateHash(data.currentRequestedSlide-F015_NUM_START_SLIDES)}.bind(this))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015ContentFilter=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.renderPriorityContent=function(priority,time,plugin,pageContainer,type){return self.currenReadingTime<=self.maxReadingTime+self.baseOffset&&plugin.priority==priority&&(self.currenReadingTime=self.currenReadingTime+time,self.currenReadingTime<=self.maxReadingTime+self.baseOffset&&pageContainer.push(plugin)),pageContainer},this.filterList=function(){for(var pluginContainer=[],pageContainer=[],l=0;l<self.sideBarConfig.length;l++)pluginContainer.push([]);for(var x=0;x<self.maxPriority;x++)for(var i=0;i<self.sideBarConfig.length;i++)for(var k=0;k<self.sideBarConfig[i].length;k++)pageContainer=[],self.currenReadingTime<self.maxReadingTime&&(pageContainer=self.renderPriorityContent(x+1,self.sideBarConfig[i][k].time,self.sideBarConfig[i][k],pageContainer,self.sideBarConfig[i][k].type),$.isArray(pageContainer)&&pageContainer.length>=1&&pluginContainer[i].push(pageContainer));pluginContainer=self.restoreOrder(pluginContainer),pluginContainer=pluginContainer.filter(function(){return!0});for(var i=0;i<self.sideBarConfig.length;i++)0!=pluginContainer[i].length||$(window.sidebarConfig[i][0].content).hasClass("mbc-article-video")?self.$article.eq(i).removeClass("mb-f015-minimal-content"):(self.$article.eq(i).addClass("mb-f015-minimal-content"),pluginContainer[i].push([window.sidebarConfig[i][0]]));window.config.F015.filteredContent=pluginContainer,$__WINDOW__.trigger("mb-f015-content-filtered",[pluginContainer]),self.plugins=pluginContainer},this.restoreOrder=function(pluginContainer){for(var sort=[],i=0;i<pluginContainer.length;i++){sort=[];for(var k=0;k<pluginContainer[i].length;k++)sort[pluginContainer[i][k][0].order]=pluginContainer[i][k];pluginContainer[i]=sort}return pluginContainer},this.renderHTML=function(id){for(var html="",k=0;k<self.plugins[id].length;k++)$.isArray(self.plugins[id][k])&&(html+=self.plugins[id][k][0].content);return html},this.renderContent=function(isInitial){self.htmlContainer=[];for(var k=0;k<config.F015.items;k++)self.htmlContainer.push(self.renderHTML(k));void 0!==isInitial&&self.showContent()},this.renderCurrentContent=function(id,injectElement,injectHTML){if(!(0>id)||injectElement){var html=self.htmlContainer[id],$content=self.$article.eq(id);$content.get(0).innerHTML=html,injectElement&&($content=$(".mb-f015-slide-content",injectElement),$content.html(injectHTML)),this.requestSlideHeightReset($content)}},this.requestSlideHeightReset=function($content){var $elements=$content.find("section"),height=0;$elements.each(function(){height+=$(this).outerHeight(!0)}),height+=74,self.isMobile&&(height+=self.headerHeight),$content.hasClass("mb-f015-minimal-content")||(height-=$content.find(".mb-f015-top-excerpt").outerHeight(!0)),$content.css({height:height}),self.isOpen&&$__WINDOW__.trigger("mb-f015-reset-slide-height",{height:height,id:config.F015.currentSlide}),self.showContent()},this.showContent=function(){self.isInitial&&(self.isInitial=!1,setTimeout(function(){$__WINDOW__.trigger("mb-f015-init-canvas-time-tool")},1300)),wpmbcom.helper.preloader.hide(),config.F015.totalTime=self.maxReadingTime},this.updateTime=function(val){self.maxReadingTime=6e4*val,self.currenReadingTime=0,self.filterList(val),self.isThrottle=!1},this.setup=function(){if(element=this.element,$element=this.$element,options=this.options,config.isF015!==!1){self.sideBarConfig=window.sidebarConfig,self.isThrottle=!1,self.oldVal=0,self.maxReadingTime=0,self.oldMaxReadingTime=0,self.baseOffset=5e3,self.currenReadingTime=0,self.maxPriority=3,self.$article=$(".mb-f015-slide-content"),self.$toolBtn=$("#mbc-f015-timetool-btn-start"),self.isInitial=!0,self.isOpen=!1,self.isMobile="mobile"===wpmbcom.helper.browser.device(),self.headerHeight=$("#mbc-header").outerHeight(!0),$__WINDOW__.on("mb-f015-timetool-set-dot-navigation",function(e,val){self.isThrottle||(setTimeout(function(){self.updateTime(val)},16),self.isThrottle=!0)});var frameIDs=config.F015.iframeID.split(",");$__WINDOW__.on("mb-f015-render-current-content",function(e,val,injectElement,injectHTML){(-1===$.inArray(String(val),frameIDs)||injectElement)&&self.renderCurrentContent(parseInt(val),injectElement,injectHTML)}),$__WINDOW__.on("mb-f015-before-scroll",function(event,data){0==data.currentSlide&&self.renderContent()}),$__WINDOW__.trigger("mb-f015-set-inital-time",[parseInt(config.F015.totalTime)]),self.updateTime(parseInt(config.F015.totalTime/6e4)),self.renderContent(!0);var $pluginContent,$elements;$__WINDOW__.on("mb-f015-slide-open-finished",function(e,obj){$pluginContent=self.$article.eq(obj.id),$elements=$pluginContent.find("section"),self.isOpen=!0,$elements.each(function(){void 0!=$(this).data("funct")&&"IframeResizer"!=$(this).data("funct")&&wpmbcom.plugins.initPlugin($(this),$(this).data("funct"))}),$pluginContent&&self.requestSlideHeightReset($pluginContent)}),$__WINDOW__.on("mb-f015-slide-closed-finished",function(){self.isOpen=!1})}},this},wpmbcom.plugins.nonDomPlugins.push("F015ContentFilter")}(this.window,this.jQuery),function(window,$){"use strict";window.F015ToggleScrollSpeed=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id&&(self.active=!1,self.readingSpeed=0,self.label=$(".label",$element),self.canvas={},self.canvas.$element=$("canvas",$element),self.canvas.element=$("canvas",$element)[0],self.canvas.context=self.canvas.$element[0].getContext("2d"),self.devicePixelratio=isNaN(Number(window.devicePixelRatio))?1:Number(window.devicePixelRatio),self.canvas.backingStorePixelRatio=self.canvas.context.webkitBackingStorePixelRatio||self.canvas.context.mozBackingStorePixelRatio||self.canvas.context.msBackingStorePixelRatio||self.canvas.context.oBackingStorePixelRatio||self.canvas.context.backingStorePixelRatio||1,self.canvas.pixelRatio=self.devicePixelratio!==self.canvas.backingStorePixelRatio?self.devicePixelratio:1,self.canvas.element.width=self.canvas.$element.attr("width")*self.canvas.pixelRatio,self.canvas.element.height=self.canvas.$element.attr("height")*self.canvas.pixelRatio,self.canvas.width=self.canvas.$element.attr("width"),self.canvas.height=self.canvas.$element.attr("height"),self.yDist=5.5*self.canvas.pixelRatio,self.yDistActive=6.8*self.canvas.pixelRatio,self.canvas.stage=new createjs.Stage("mb-f015-toggle-scroll-speed-canvas"),self.drawArrows(),self.canvas.stage.enableMouseOver(25),TweenMax.ticker.addEventListener("tick",self.onTickCanvas),
self.canvas.stage.update(),$__WINDOW__.on("mb-f015-after-scroll",function(event,data){self.currentSlide=data.currentSlide,data.currentSlide>0&&data.currentSlide<6?config.F015.isAutonomous&&self.show():self.hide()}),$__WINDOW__.on("mb-f015-start-auto-scroll",function(){self.currentSlide>0&&self.currentSlide<6&&self.show()}))},this.drawArrows=function(){self.arrows={},self.arrows.items=[],self.arrows.wrapper=new createjs.Container,self.arrows.wrapper.x=self.canvas.width/2,self.arrows.wrapper.y=self.canvas.height/2,self.canvas.stage.addChild(self.arrows.wrapper),self.arrows.top={},self.drawSingleArrow(self.arrows.top,!0,-self.yDist),self.arrows.middle={},self.drawSingleArrow(self.arrows.middle,!1,0),self.arrows.bottom={},self.drawSingleArrow(self.arrows.bottom,!1,self.yDist)},this.drawSingleArrow=function(object,active,yOffset){self.arrows.items.push(object),object.active=active,object.container=new createjs.Container,object.container.y=yOffset,object.container.alpha=0,self.arrows.wrapper.addChild(object.container);var strokeWidth=1.4;object.arrowGrey=new createjs.Shape,object.arrowGrey.graphics.setStrokeStyle(strokeWidth*self.canvas.pixelRatio),object.arrowGrey.graphics.beginStroke("#fff"),object.arrowGrey.graphics.moveTo(-6*self.canvas.pixelRatio,-2.5*self.canvas.pixelRatio),object.arrowGrey.graphics.lineTo(-.5*self.canvas.pixelRatio,2.5*self.canvas.pixelRatio),object.arrowGrey.graphics.lineTo(.5*self.canvas.pixelRatio,2.5*self.canvas.pixelRatio),object.arrowGrey.graphics.lineTo(6*self.canvas.pixelRatio,-2.5*self.canvas.pixelRatio),object.arrowGrey.graphics.endStroke(),object.arrowGrey.alpha=.5,object.container.addChild(object.arrowGrey);var alpha=active===!0?1:0;object.arrowBlue=new createjs.Shape,object.arrowBlue.graphics.setStrokeStyle(strokeWidth*self.canvas.pixelRatio),object.arrowBlue.graphics.beginStroke("#00adef"),object.arrowBlue.graphics.moveTo(-6*self.canvas.pixelRatio,-2.5*self.canvas.pixelRatio),object.arrowBlue.graphics.lineTo(-.5*self.canvas.pixelRatio,2.5*self.canvas.pixelRatio),object.arrowBlue.graphics.lineTo(.5*self.canvas.pixelRatio,2.5*self.canvas.pixelRatio),object.arrowBlue.graphics.lineTo(6*self.canvas.pixelRatio,-2.5*self.canvas.pixelRatio),object.arrowBlue.graphics.endStroke(),object.arrowBlue.alpha=alpha,object.arrowBlue.shadow=new createjs.Shadow("#00adef",0,0,8*self.canvas.pixelRatio),object.container.addChild(object.arrowBlue)},this.bindMouseListener=function(){$element.addClass("active"),$element.bind("click",self.click),$element.bind("mouseover",self.mouseOver),$element.bind("mouseout",self.mouseOut)},this.undbindMouseListener=function(){$element.removeClass("active"),$element.unbind("click",self.click),$element.unbind("mouseover",self.mouseOver),$element.unbind("mouseout",self.mouseOut)},this.click=function(event){self.readingSpeed=self.readingSpeed+1>2?0:self.readingSpeed+1;var oldActive=null,scale=1,yOffset=self.yDist,scaleActive=1.2,yOffsetActive=self.yDistActive;$.each(self.arrows.items,function(index,value){oldActive=0===index&&0===self.readingSpeed?!1:value.active,value.active=index<=self.readingSpeed?!0:!1,oldActive===!1&&value.active===!0&&(TweenMax.to(value.container,.25,{delay:0,y:yOffsetActive*(index-1),scaleX:scaleActive,scaleY:scaleActive,ease:Quad.easeOut}),TweenMax.to(value.arrowBlue,.25,{delay:0,alpha:1,ease:Quad.easeOut}),TweenMax.to(value.arrowBlue,.15,{delay:0,scaleX:1.3,scaleY:1.3,ease:Quad.easeOut}),TweenMax.to(value.arrowBlue,.25,{delay:.151,scaleX:1,scaleY:1,ease:Quad.easeInOut})),oldActive===!0&&value.active===!1&&(TweenMax.to(value.container,.4,{delay:0,y:yOffset*(index-1),scaleX:scale,scaleY:scale,ease:Quad.easeInOut}),TweenMax.to(value.arrowBlue,.4,{delay:0,alpha:0,ease:Quad.easeOut}))}),$__WINDOW__.trigger("mb-f015-change-reading-speed",self.readingSpeed)},this.mouseOver=function(event){var scale=1,yOffset=1;$.each(self.arrows.items,function(index,value){scale=value.active===!0?1.2:1,yOffset=value.active===!0?self.yDistActive:self.yDist,TweenMax.to(value.container,.25,{delay:0,y:yOffset*(index-1),scaleX:scale,scaleY:scale,ease:Quad.easeOut})})},this.mouseOut=function(event){var scale=1,yOffset=self.yDist;$.each(self.arrows.items,function(index,value){TweenMax.to(value.container,.4,{delay:0,y:yOffset*(index-1),scaleX:scale,scaleY:scale,ease:Quad.easeOut})})},this.show=function(){self.active!==!0&&(self.active=!0,self.bindMouseListener(),TweenMax.to(self.label,.7,{delay:0,opacity:1,ease:Quad.easeInOut}),TweenMax.to(self.arrows.top.container,.5,{delay:0,alpha:1,ease:Quad.easeInOut}),TweenMax.to(self.arrows.middle.container,.5,{delay:.15,alpha:1,ease:Quad.easeInOut}),TweenMax.to(self.arrows.bottom.container,.5,{delay:.3,alpha:1,ease:Quad.easeInOut}),$.each(self.arrows.items,function(index,value){value.active===!0&&(TweenMax.to(value.arrowBlue,.25,{delay:.1+.15*index,scaleX:1.3,scaleY:1.3,ease:Quad.easeOut}),TweenMax.to(value.arrowBlue,.5,{delay:.1+.15*index+.25,scaleX:1,scaleY:1,ease:Quad.easeInOut}))}))},this.hide=function(){self.active!==!1&&(self.active=!1,TweenMax.to(self.label,.5,{opacity:0,ease:Quad.easeInOut}),TweenMax.to(self.arrows.top.container,.5,{alpha:0,ease:Quad.easeInOut}),TweenMax.to(self.arrows.middle.container,.5,{delay:0,alpha:0,ease:Quad.easeInOut}),TweenMax.to(self.arrows.bottom.container,.5,{delay:0,alpha:0,ease:Quad.easeInOut,onComplete:self.undbindMouseListener}))},this.onTickCanvas=function(){self.canvas.stage.update()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015ButtonAutonomousSurf=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"Explorer8"!=window.wpmbcom.helper.browser.id&&"Explorer7"!=window.wpmbcom.helper.browser.id&&(self.active=!1,self.autonomousSurf=!1,$__WINDOW__.on("mb-f015-start-auto-scroll",function(e){self.autonomousSurf=!0,self.toggleIconState()}),$__WINDOW__.on("mb-f015-stop-auto-scroll mb-f015-stop-button-auto-surf",function(e){self.autonomousSurf=!1,self.toggleIconState()}),$__WINDOW__.on("mb-f015-start-btn-autonomous-surf",function(){self.autonomousSurf=!0,self.toggleIconState()}),$__WINDOW__.on("mb-f015-after-scroll",function(event,data){data.currentSlide>0&&data.currentSlide<6?self.show():self.hide()}))},this.show=function(){self.active!==!0&&(self.active=!0,$element.addClass("active"),TweenMax.to($element,.5,{opacity:1,ease:Quad.easeInOut}),$element.bind("click",self.click))},this.hide=function(){self.active=!1,$element.removeClass("active"),TweenMax.to($element,.5,{opacity:0,ease:Quad.easeInOut}),$element.unbind("click",self.click)},this.click=function(event){event.preventDefault(),self.autonomousSurf===!0?$__WINDOW__.trigger("mb-f015-stop-auto-scroll"):$__WINDOW__.trigger("mb-f015-start-auto-scroll")},this.toggleIconState=function(){self.autonomousSurf===!0?$element.addClass("autonomous-surf"):$element.removeClass("autonomous-surf")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015StartTime=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$text=self.$element.find("#mb-f015-start-text-time"),$__WINDOW__.on("mb-f015-timetool-set-text",function(e,val){val=Math.round(val),val=10>val?"0"+val:String(val),self.$text.text(val)})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015RelatedContentSlide=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){self.slideOpened||(self.height=$__WINDOW__.height(),self.$element.height(self.height))},this.onresize=function(){},this.ondevicechange=function(){},this.loadArticle=function(url){wpmbcom.helper.preloader.show(!0),$.ajax({url:url,dataType:"html",success:function(data,textStatus,jqXHR){var $sections=$("article section",data).not(".mme-additional-teasers, .mbc-resort-related-links, .mbc-envkv-footer");$__WINDOW__.trigger("mb-f015-render-current-content",[self.id,self.$element,$sections]),self.height=self.$element.find(".mb-f015-slide-content").height(),wpmbcom.helper.preloader.hide(),$__WINDOW__.trigger("mb-f015-slide-open",{height:self.height,id:self.id})},error:function(){}})},this.setup=function(){if(element=this.element,$element=this.$element,options=this.options,config.isF015!==!1){self.$footer=$("#mbc-main-footer"),$(".cube-side.front",$element).append(self.$footer),self.height=$__WINDOW__.height(),self.$element.height(self.height),self.$closeArticle=self.$element.find(".mbc-f015-close-article a"),TweenMax.set(self.$element,{autoAlpha:0}),TweenMax.set(self.$footer,{autoAlpha:0});var $scrollContainer=$("#mb-f015-scroll-container");self.id=$(".mb-f015-slide",$("#mb-f015-tool-content")).length,$(".mbc-f015-container-fold-animation",$element).data("cube-id",self.id),$scrollContainer.append($element),$__WINDOW__.on("mb-f015-before-scroll",function(event,data){data.currentSlide==self.id+F015_NUM_START_SLIDES&&(event.stopPropagation(),TweenMax.to(self.$footer,.5,{autoAlpha:0}),TweenMax.to(self.$element,.5,{autoAlpha:0,onComplete:data.completeCallback}))}),$__WINDOW__.on("mb-f015-after-scroll",function(event,data){data.currentSlide==self.id+F015_NUM_START_SLIDES&&(TweenMax.to(self.$element,.5,{autoAlpha:1}),TweenMax.to(self.$footer,.5,{autoAlpha:1}))}),$__WINDOW__.on("mb-f015-reset-slide-height",function(e,obj){obj.id===self.id&&(self.slideOpened=!0,self.$element.height(obj.height))}),$__WINDOW__.on("mb-f015-slide-closed-finished",function(e,obj){obj.id===self.id&&(self.$element.height($__WINDOW__.height()),self.slideOpened=!1)}),$__WINDOW__.on("mb-f015-slide-open-finished",function(e,obj){obj.id===self.id&&(self.$element.height(self.height),self.slideOpened=!0)}),$("a.mbc-teaser-link",$element).on("click tap",function(event){event.preventDefault(),self.loadArticle($(event.currentTarget).attr("href"))}),self.$closeArticle.on("click tap",function(e){e.preventDefault(),void 0!==e.originalEvent&&$__WINDOW__.trigger("mb-f015-close-article-trigger"),$__WINDOW__.trigger("mb-f015-slide-closed",{height:self.height,id:self.id})})}},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015MobileScroll=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.buildSidebar=function(){var html='<div id="mb-f015-mobile-sidebar"><div id="mb-f015-mobile-sidebar-indicator"></div></div>';self.$element.append(html),self.$indicator=$("#mb-f015-mobile-sidebar-indicator"),self.$indicator.css({height:100/self.maxItems+"%"}),self.indicatorHeight=self.$indicator.height(),$__WINDOW__.on("mb-f015-before-scroll",self.updateSidebar),self.updateSidebar()},this.updateSidebar=function(e,data){!data||data.currentRequestedSlide<1||(TweenMax.to(self.$indicator,.4,{autoAlpha:1}),TweenMax.to(self.$indicator,.4,{top:(data.currentRequestedSlide-1)*self.indicatorHeight,delay:.4}),TweenMax.to(self.$indicator,.4,{autoAlpha:0,delay:.8}))},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"mobile"===wpmbcom.helper.browser.device()&&(self.maxItems=$("#wrapper-dot-navigation").find("li").length,self.indicatorHeight=0,self.buildSidebar())},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015BrowserFallback=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,"Explorer8"==window.wpmbcom.helper.browser.id||"Explorer7"==window.wpmbcom.helper.browser.id?($("#mbc-article").remove(),$("#wrapper-dot-navigation").remove(),$(".mbc-mobile-legal-link-container").remove(),$(".mb-f015-container-menu-tools").remove(),self.$element.css({display:"block"})):self.$element.remove()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.NextAjaxContent=function(){var element,$element,options,$box,$accordionhead,$accordionheadicon,self=this;return this.defaults={key:"value",catID:6,itemOffset:12,startOffset:0,postsPerpage:6},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){self.$contentWrapper.isotope({itemSelector:".mbc-next-grid-item",layoutMode:"packery",packery:{gutter:944===self.$element.width()?16:20}})},this.renderContent=function(data){wpmbcom.helper.preloader.hide();var $data=$(data);self.$contentWrapper.isotope("insert",$data);var itemLength=self.$contentWrapper.find("li").length;itemLength>=self.options.itemOffset&&self.$element.find(".mbc-load-more").addClass("mbc-open"),(0===$data.length||itemLength<self.options.startOffset)&&self.$element.find(".mbc-load-more").removeClass("mbc-open");for(var i=0;i<self.$filter.length;i++){var $box=self.$filter.eq(i),id="."+self.$filter.eq(i).attr("id"),$item=self.$filterContainer.find(".mbc-next-grid-item"+id);$box.next("label").find(".article-counter").text("("+$item.length+")")}},this.getContent=function(){var postcount=self.isInitial?self.options.itemOffset:self.options.postsPerpage;wpmbcom.helper.preloader.show(!0),$.ajax({url:config.ajaxurl+"?action=get_next_content&cat_id="+self.options.catID+"&offset="+self.options.startOffset+"&posts_per_page="+postcount,dataType:"html",success:function(data){self.options.startOffset+=postcount,self.renderContent(data),self.isInitial=!1},error:function(){}})},this.initFilter=function(){var $checkboxes=$("#filters input");$checkboxes.change(function(){var notChecked=[],Checked=[];$checkboxes.each(function(i,elem){elem.checked&&Checked.push(elem.value),elem.checked?($(this).next().addClass("active"),$(this).parent().find("#reset-filter").removeClass("active")):$(this).next().removeClass("active")}),notChecked=notChecked.join("");var filterValue;Checked.length?(filterValue=$.map(Checked,function(value){return value+notChecked}),filterValue=filterValue.join(", ")):filterValue=notChecked,self.$contentWrapper.isotope({filter:filterValue})}),$("#reset-filter").click(function(){$checkboxes.attr("checked",!1).change(),$(this).addClass("active")})},this.filterAccordion=function(){$box=$element.find(".mbc-next-links"),$accordionhead=$element.find(".mbc-next-headline"),$accordionheadicon=$element.find("span.mbc-accordion-icon"),$accordionhead.on("click",function(e){e.preventDefault(),$($box).toggleClass("mbc-active"),$($box).hasClass("mbc-active")?($($box).slideDown(500),$($accordionheadicon).addClass("mbc-active"),$($accordionhead).addClass("active")):($($box).slideUp(500),$($accordionheadicon).removeClass("mbc-active"),$($accordionhead).removeClass("active"))}),self.initFilter()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.isInitial=!0,self.$contentWrapper=self.$element.find(".mbc-next-container"),self.$twitterStamp=self.$element.find(".twitter-stamp"),self.$filter=self.$element.find(".mbc-next-links .categorie-filter"),self.$filterContainer=self.$element.find(".mbc-next-container"),self.$contentWrapper.isotope({itemSelector:".mbc-next-grid-item",layoutMode:"packery",packery:{gutter:944===self.$element.width()?16:20}}),self.$contentWrapper.isotope("stamp",self.$twitterStamp),self.getContent(),self.$element.find(".mbc-next-load-more-btn").on("click",function(e){e.preventDefault(),self.getContent()}),self.filterAccordion()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.NextAjaxTagContent=function(){var element,$element,options,self=this;return this.defaults={key:"value",catID:6,itemOffset:0,startOffset:0,tags:""},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){self.$contentWrapper.isotope({itemSelector:".mbc-next-grid-item",layoutMode:"packery",packery:{gutter:944===self.$element.width()?16:20}})},this.renderContent=function(data){wpmbcom.helper.preloader.hide();var $data=$(data);self.$contentWrapper.isotope("insert",$data);var itemLength=self.$contentWrapper.find("li").length;itemLength>=self.options.itemOffset&&self.$element.find(".mbc-load-more").addClass("mbc-open"),(0===$data.length||itemLength<self.options.startOffset)&&self.$element.find(".mbc-load-more").removeClass("mbc-open")},this.getContent=function(){wpmbcom.helper.preloader.show(!0),$.ajax({url:config.ajaxurl+"?action=get_next_content&cat_id="+self.options.catID+"&offset="+self.options.startOffset+"&tags="+self.options.tags,dataType:"html",success:function(data){self.options.startOffset+=self.options.itemOffset,self.renderContent(data)},error:function(){}})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$contentWrapper=self.$element.find(".mbc-next-container"),self.$contentWrapper.isotope({itemSelector:".mbc-next-grid-item",layoutMode:"packery",packery:{gutter:944===self.$element.width()?16:20}}),self.getContent(),self.$element.find(".mbc-next-load-more-btn").on("click",function(e){e.preventDefault(),self.getContent()})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.NextAccordion=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$box=self.$element.find(".mbc-accordion-box"),self.$boxcontent=self.$box.find(".mbc-accordion-content"),self.$accordionhead=self.$box.find(".mbc-accordion-link"),self.$accordionhead.on("click",function(e){e.preventDefault(),$(this).prev().toggleClass("mbc-active"),$(this).prev().hasClass("mbc-active")?($(this).prev().slideDown(500),$(this).addClass("mbc-active")):($(this).prev().slideUp(500),$(this).removeClass("mbc-active"))})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.NextTabs=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$wrapper=self.$element.find(".mbc-tabs"),self.$tabnav=self.$wrapper.find(".mbc-tabs-box-wrapper-navigation"),self.$tabcontentwrapper=self.$wrapper.children(".mbc-tabs-box-wrapper-content"),self.$wrapper.each(function(){self.$tabnav.on("click","a",function(e){e.preventDefault();var selectedItem=$(this);if(!selectedItem.hasClass("mbc-active")){var selectedTab=selectedItem.data("content"),selectedContent=self.$tabcontentwrapper.find('li[data-content="'+selectedTab+'"]'),selectedContentHeight=selectedContent.innerHeight(!0);self.$tabnav.find("a.mbc-active").removeClass("mbc-active"),selectedItem.addClass("mbc-active"),selectedContent.addClass("mbc-active").siblings("li").removeClass("mbc-active"),self.$tabcontentwrapper.animate({height:selectedContentHeight})}})})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.NextContactForm=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.printFormular=function(e){e.preventDefault(),$("body").addClass("mbc-next-energy-page"),window.print()},this.updateValues=function(){$("input[type=text][name]",self.$sendForm).val(function(){return $("input[name="+this.name+"]",self.$fillOutForm).val()}),$("textarea[name]",self.$sendForm).val(function(){return $("textarea[name="+this.name+"]",self.$fillOutForm).val()}),$("input[name=selectChoice]",self.$sendForm).val(function(){return $("select[name="+this.name+"]",self.$fillOutForm).val()}),$("input[name=peremail]",self.$sendForm).val(function(){return $("input[name=peremail]:checked",self.$fillOutForm).val()}),$("input[name=pertelefon]",self.$sendForm).val(function(){return $("input[name=pertelefon]:checked",self.$fillOutForm).val()}),$("input[name=salutation]",self.$sendForm).val(function(){return $("input[name=salutation]:checked",self.$fillOutForm).val()})},this.nextStep=function(e){e.preventDefault(),self.$fillOutForm.valid()&&(self.$errorMessage.addClass("mbc-hide"),self.$fillOutForm.addClass("mbc-hide"),self.$sendForm.removeClass("mbc-hide"),self.$headlineForm.addClass("headline-not-active"),self.$headlineSend.removeClass("headline-not-active"),self.updateValues())},this.prevStep=function(e){e.preventDefault(),self.$fillOutForm.removeClass("mbc-hide"),self.$sendForm.addClass("mbc-hide"),self.$headlineForm.removeClass("headline-not-active"),self.$headlineSend.addClass("headline-not-active")},this.submitForm=function(e){e.preventDefault();var data=self.$fillOutForm.serialize();return $.post(window.config.ajaxurl,data,function(response){var backendResponse=JSON.parse(response);if(1==backendResponse.valid)self.$fillOutForm.addClass("mbc-hide"),self.$sendForm.addClass("mbc-hide"),self.$responseText.removeClass("mbc-hide"),self.$headlineForm.addClass("headline-not-active"),self.$headlineSend.removeClass("headline-not-active");else{self.$fillOutForm.removeClass("mbc-hide"),self.$sendForm.addClass("mbc-hide"),self.$headlineForm.removeClass("headline-not-active"),self.$responseText.addClass("mbc-hide"),self.$headlineSend.addClass("headline-not-active");for(var i in backendResponse.error_fields)self.$errorItem="#"+backendResponse.error_fields[i],self.$errorItemElement=self.$element.find(self.$errorItem),self.$errorItemElement.addClass("error")}}),!1},this.openModal=function(e){e.preventDefault(),wpmbcom.helper.preloader.show(!0),$(".mbc-energy-form-modal").modal({autoResize:!0,autoPosition:!0,overlayClose:!0,modal:!0,containerCss:{backgroundColor:"#fff",color:"#000",height:500,padding:40,width:580},onShow:function(){wpmbcom.helper.preloader.hide()},onClose:function(){$.modal.close(),self.isOpen=!1}}),self.isOpen=!0;var $closeBtn=$("#btn-close");$closeBtn.on("click",function(e){e.preventDefault(),$.modal.close(),self.isOpen=!1})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.isOpen=!1,self.$wrapper=$(".mbc-contact-form"),self.$headlineForm=self.$wrapper.find(".mbc-contact-form-headline-with-border"),self.$headlineSend=self.$wrapper.find(".mbc-contact-form-headline"),self.$fillOutForm=self.$element.find("#fillOutForm"),self.$sendForm=self.$element.find("#sendForm"),self.$nextBtn=self.$fillOutForm.find(".mbc-next-btn"),self.$prevBtn=self.$sendForm.find(".mbc-prev-btn"),self.$submitBtn=self.$sendForm.find("#mbc-submit-btn"),self.$errorMessage=self.$element.find(".mbc-error-message"),self.$responseText=self.$wrapper.find(".mbc-contact-form-response"),self.$printBtn=self.$wrapper.find(".mbc-print-button"),self.$modalBtn=self.$wrapper.find(".mbc-next-modal-link"),$.validator.setDefaults({rules:{selectChoice:{required:!0}},errorPlacement:function(){},highlight:function(element,errorClass,validClass){errorClass="not-valid",$(element).addClass(errorClass).removeClass(validClass),$(element.form).find("label[for="+element.id+"]").addClass("not-valid-message"),$(element).parents(".mbc-form-element").addClass("not-valid")},unhighlight:function(element,errorClass,validClass){errorClass="not-valid",$(element).removeClass(errorClass).addClass(validClass),$(element.form).find("label[for="+element.id+"]").removeClass("not-valid-message"),$(element).parents(".mbc-form-element").removeClass("not-valid")},submitHandler:function(form){console.log("submitHandler");var data=$(form).serialize();$.post(window.config.ajaxurl,data,function(response){var backendResponse=JSON.parse(response);if(1==backendResponse.valid)console.log("backend validation successful"),self.$responseText.removeClass("mbc-hide");else{console.log("backend validation false"),console.log(backendResponse.error_fields);for(var i in backendResponse.error_fields)self.$errorItem="#"+backendResponse.error_fields[i],self.$errorItemElement=self.$element.find(self.$errorItem),self.$errorItemElement.addClass("error"),console.log(self.$errorItem),console.log(self.$errorItemElement)}})},invalidHandler:function(event,validator){var errors=validator.numberOfInvalids();if(errors&&self.$errorMessage.removeClass("mbc-hide"),errors){var message=1==errors?"You missed 1 field. It has been highlighted":"You missed "+errors+" fields. They have been highlighted";$("div.error span").html(message),$("div.error").show()}else $("div.error").hide()}}),self.$nextBtn.on("click",self.nextStep),self.$prevBtn.on("click",self.prevStep),self.$submitBtn.on("click",self.submitForm),self.$printBtn.on("click",self.printFormular),self.$fillOutForm.on("submit",self.onSubmit),self.$modalBtn.on("click",self.openModal)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ArticlePadding=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options;var $lastArticle=$(self.$element.find(".mbc-article-with-background").last()),paddingInt=parseInt($lastArticle.css("padding-bottom"));40>paddingInt&&$lastArticle.css("padding-bottom",40)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Imageshare=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$sharebtn=$element.find(".mbc-image-share-btn"),self.$sharemenu=$element.find(".mbc-social-image-links"),self.imageHover()},this.imageHover=function(){var timer=null;self.$element.parents(".mbc-image").on({mouseenter:function(){self.$sharebtn.addClass("mbc-open"),clearTimeout(timer)},mouseleave:function(){var hasMenu=self.$sharebtn.hasClass("mbc-open");hasMenu&&(timer=setTimeout(function(){self.$sharebtn.removeClass("mbc-open")},0))}}),self.naviHover()},this.naviHover=function(){self.$sharebtn.on("click",function(e){e.preventDefault()});var timer=null;self.$element.on({mouseenter:function(){self.$sharemenu.addClass("mbc-open"),clearTimeout(timer)},mouseleave:function(){var hasMenu=self.$sharemenu.hasClass("mbc-open");hasMenu&&(timer=setTimeout(function(){self.$sharemenu.removeClass("mbc-open")},0))}})},this}}(this.window,this.jQuery),$(document).ready(function(){setStoererPosition(),setRightTextIntdent()});var resizeId;$(window).resize(function(){clearTimeout(resizeId),resizeId=setTimeout(setStoererPosition(),500)}),function(){for(var lastTime=0,vendors=["webkit","moz"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];for(x=0;x<vendors.length&&!window.cancelAnimationFrame;++x)window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}(),function(window,$){"use strict";window.F015BackgroundAnimation=function(){var FPS=30,ITV=1e3/FPS,SEQUENCE_FRAMES=[];SEQUENCE_FRAMES[0]={start:2,end:149},SEQUENCE_FRAMES[1]={start:151,end:249},SEQUENCE_FRAMES[2]={start:251,end:350},SEQUENCE_FRAMES[3]={start:351,end:449},SEQUENCE_FRAMES[4]={start:451,end:524},SEQUENCE_FRAMES[5]={start:526,end:600};var element,$element,options,direction,currentFrame,currentStartFrame,currentEndFrame,currentSequenceIndex,lastRenderTime,bindedRenderMethod,imageLoadList,self=this,completeOnNextTick=!1,imageTable=[],imageListByFrame=[];return this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.isMobile="mobile"===wpmbcom.helper.browser.device(),self.isMobile||(bindedRenderMethod=this.render.bind(this),this.initCanvas(),this.initImageLoadList(),this._initEventListeners(),this._loadNextImage(),this._loadNextImage(),this._loadNextImage(),this._loadNextImage(),$__WINDOW__.on("f015-background-canas-clear",function(){self.clearCanvas(!0)}))},this.playSequence=function(sequenceIndex,dir){this.updateImageLoadList(sequenceIndex),direction=dir,direction>0?(currentStartFrame=SEQUENCE_FRAMES[sequenceIndex].start,currentEndFrame=SEQUENCE_FRAMES[sequenceIndex].end):(currentStartFrame=SEQUENCE_FRAMES[sequenceIndex].end,currentEndFrame=SEQUENCE_FRAMES[sequenceIndex].start),currentSequenceIndex=sequenceIndex,currentFrame=currentStartFrame,lastRenderTime=0,this.render()},this.render=function(){var now=Date.now(),delta=now-lastRenderTime;if(delta>=ITV){if(completeOnNextTick)return this.clearCanvas(!1),$__WINDOW__.trigger("mb-f015-background-animation-complete"),void(completeOnNextTick=!1);currentFrame+=direction,lastRenderTime=now-delta%ITV;var img=imageListByFrame[currentFrame],fac=.7,imgWidth=img.width/fac,imgHeight=img.height/fac;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(img,0,this.canvas.height-imgHeight,imgWidth,imgHeight)}currentFrame===currentEndFrame&&(completeOnNextTick=!0),this._animationFrameRequest=window.requestAnimationFrame(bindedRenderMethod)},this.clearCanvas=function(isSkip){this._animationFrameRequest&&window.cancelAnimationFrame(this._animationFrameRequest),(self.currentSlide<6||isSkip)&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},this.initCanvas=function(){this.canvas=element,this.context=this.canvas.getContext("2d")},this.initImageLoadList=function(){imageTable=new Array(SEQUENCE_FRAMES.length),imageListByFrame=new Array(SEQUENCE_FRAMES[SEQUENCE_FRAMES.length-1].end);for(var img,s=0;s<SEQUENCE_FRAMES.length;s++){imageTable[s]=[];for(var frame=SEQUENCE_FRAMES[s].start;frame<=SEQUENCE_FRAMES[s].end;frame++){var frameString="0000"+frame;frameString=frameString.substr(frameString.length-4),img=new Image,img._src="/wp-content/themes/mbcom/assets/images/f015/jpg_orig-w_trim/sv_1505_f015_comp_003_bs_"+frameString+".jpg",imageTable[s].push(img),imageListByFrame[frame]=img}}this.updateImageLoadList(0)},this.updateImageLoadList=function(sequenceIndex){imageLoadList=[],this._addSequenceToImageLoadList(sequenceIndex);for(var i=sequenceIndex+1,k=sequenceIndex-1;;)if(i<imageTable.length&&(this._addSequenceToImageLoadList(i),i++),k>=0&&(this._addSequenceToImageLoadList(k),k--),i>=imageTable.length&&0>k)break},this._initEventListeners=function(){$__WINDOW__.on("mb-f015-start-background-animation",this._onStartTriggered.bind(this))},this._onStartTriggered=function(event,data){return data.currentSlide===data.currentRequestedSlide||Math.abs(data.currentSlide-data.currentRequestedSlide)>1?void $__WINDOW__.trigger("mb-f015-background-animation-complete"):(data.currentRequestedSlide>data.currentSlide?this.playSequence(data.currentRequestedSlide-1,1):this.playSequence(data.currentSlide-1,-1),void(self.currentSlide=data.currentRequestedSlide))},this._addSequenceToImageLoadList=function(sequenceIndex){for(var img,i=0;i<imageTable[sequenceIndex].length;i++)img=imageTable[sequenceIndex][i],img.loaded||img.loading||imageLoadList.push(img)},this._loadNextImage=function(){if(imageLoadList.length>0){var img=imageLoadList.shift();
img.loading=!0,img.src=img._src,img.onload=function(){img.loaded=!0,self._loadNextImage()}}},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015Routeplanner=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.checkInput=function(val){var valid=!1;return/[\d]/.test(val)||""===val||(valid=!0),valid},this.setup=function(){element=this.element,$element=this.$element,options=this.options;var $planner=$("#f015-roteplanner"),$start=$("#f015-route-start"),$end=$("#f015-route-destination"),$routeItem=$("#f015-route-item");$planner.find("input").iCheck({cursor:!0}),$__WINDOW__.on("mb-f015-after-scroll",function(event,data){6===data.currentSlide?($start.prop("disabled",!1),$end.prop("disabled",!1)):($start.prop("disabled",!0),$end.prop("disabled",!0))}),$planner.on("submit",function(e){e.preventDefault();var start=$start.val(),end=$end.val(),isStart=self.checkInput(start),isEnd=self.checkInput(end),routeType="oneway",routeItem=$routeItem.val();$planner.find("#f015-route-roundtrip").is(":checked")&&(routeType="roundtrip"),isStart?($start.css({border:"inherit"}),$start.parent().find("label").css({color:"white"})):($start.css({border:"1px solid red"}),$start.parent().find("label").css({color:"red"})),isEnd?($end.css({border:"inherit"}),$end.parent().find("label").css({color:"white"})):($end.css({border:"1px solid red"}),$end.parent().find("label").css({color:"red"})),isEnd&&isStart&&($__WINDOW__.trigger("mb-f015-slide-open",{height:500,id:config.F015.currentSlide}),window.F015RouteplannerHasItem?$__WINDOW__.trigger("mb-f015-iframe-set-route",{routeStart:start,routeEnd:end,routeType:routeType,routeItem:routeItem}):$__WINDOW__.trigger("mb-f015-iframe-set-route",{routeStart:start,routeEnd:end,routeType:routeType}))})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.F015RouteplannerHasItem=!1,window.F015UrlParams=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.parseUrlParams=function(){if(self.params.hasOwnProperty("start")&&self.params.hasOwnProperty("end")){if(self.params.hasOwnProperty("route")){var route=self.params.route;"roundtrip"===route?$("#f015-route-roundtrip").next().trigger("click"):route="oneway"}self.params.hasOwnProperty("item")&&(window.F015RouteplannerHasItem=!0),$__WINDOW__.trigger("mb-f015-scroll-to-slide",[7]);var $planner=$("#f015-roteplanner");$planner.find("#f015-route-start").val(self.params.start),$planner.find("#f015-route-destination").val(self.params.end),$planner.find("#f015-route-item").val(self.params.item),$__WINDOW__.on("mb-f015-after-scroll.F015UrlParams",function(event,data){7===data.currentSlide&&(setTimeout(function(){$planner.submit()},1500),$__WINDOW__.off("mb-f015-after-scroll.F015UrlParams"))})}},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.params=$.url(window.location.href).param(),$__WINDOW__.on("f015-canvas-animation-intro-finished.F015UrlParams",function(){self.parseUrlParams(),$__WINDOW__.off("f015-canvas-animation-intro-finished.F015UrlParams")})},this},wpmbcom.plugins.nonDomPlugins.push("F015UrlParams")}(this.window,this.jQuery),function(window,$){"use strict";window.IAAAdapterTable=function(){var element,$element,options,self=this;return this.defaults={type:"AMG F1"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.renderTables=function(){self.$tables.jScrollPane({showArrows:!1,autoReinitialise:!0,hideFocus:!0})},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$tables=self.$element.find(".mb-iaa-table"),self.renderTables()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.UxTeaserSlider=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options},this}}(this.window,this.jQuery),function(window,$){"use strict";window.CarSection=function(){var element,$element,options,$item,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$item=$element.find(".mbc-car-column").first(),self.$element.bxSlider({responsive:!0,slideWidth:$item.width(),minSlides:1,maxSlides:4,slideMargin:parseInt($item.css("margin-right").replace(/px/g,""),24),swipeThreshold:100,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,oneToOneTouch:!1,pager:!1,useCSS:!0,controls:!0,infiniteLoop:!1,hideControlOnEnd:!0})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.UxMainNavigation=function(){var element,$element,options,$menu,self=this,timer=null;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){self.headerHeight=self.$pageNav.height()},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,this.loadContent()},this.loadContent=function(){element=this.element,$element=this.$element;var context=$element.attr("data-context")?$element.attr("data-context"):config.context,lang=$element.attr("data-context-lang")?$element.attr("data-context-lang"):config.lang.replace("en","us"),nocache="1"==$element.attr("data-nocache");$.ajax({url:config.ajaxurl+"?action=get_mbcom_main_navigation&context="+encodeURIComponent(context)+"&lang="+encodeURIComponent(lang)+(nocache?"&nocache=1":""),dataType:"html",success:function(data){$element.html(data),self.onContentLoaded()},error:function(){}})},this.onContentLoaded=function(){self.setActiveItems(),self.setupMainNavigationUx()},this.setActiveItems=function(){element=this.element,$element=this.$element;var activeItemIdsStr=$element.attr("data-active-menu-item-ids"),activeItemIds=activeItemIdsStr?activeItemIdsStr.split(","):[];$.each(activeItemIds,function(index,id){var $itemElement=$element.find(".mbc-main-nav-link[data-id="+id+"]");$itemElement.addClass("mbc-active"),index<activeItemIds.length-1&&$itemElement.addClass("mbc-active-ancestor")})},this.setupMainNavigationUx=function(){element=this.element,$element=this.$element,options=this.options,$menu=$("#mbc-main-nav").children().eq(0);"mobile"===wpmbcom.helper.browser.device();self.$pageNav=$("#mbc-page-nav:visible"),self.$topSlider=self.$pageNav,self.isOpen=!1,self.$subMenu=$(".mbc-sub-menu-wrapper"),0===self.$topSlider.length&&(self.$topSlider=$("#mbc-header").nextAll("section").not("#mbc-page-nav").eq(0)),0===self.$topSlider.length&&(self.$topSlider=$("#mbc-article")),config.isCalendar===!0&&(self.$topSlider=$(".mbc-calendar")),config.isTV===!0&&(self.$topSlider=$("#mbc-tv"),0===self.$topSlider.length&&(self.$topSlider=$(".mbc-tv-header"),self.$pageNav=$("header.mbc-tv-header.mbc-text-inverted"))),self.headerHeight=self.$pageNav.height(),self.navigationOpen=!1,Modernizr.touch?($element.find("a").hammer().on("tap",this.onNaviLinkClicked),$element.find("a.mbc-item-with-children").on("click",wpmbcom.helper.preventDefaultLinkEvent)):$element.find("a").on("click",this.onNaviLinkClicked),Modernizr.touch||$menu.menuAim({activate:this.activateSubmenu,deactivate:this.deactivateSubmenu,enter:this.abortDeactivation,exit:this.delayedDeactivation,submenuDirection:"below",exitOnMouseOut:!0}),self.naviHover(),$__BODY__.on("click touchend",function(e){$(e.target).closest("#mbc-main-nav li").length>0||self.resetSubmenu()})},this.activateSubmenu=function(target){var $target=$(target);$target.addClass("mbc-selected");var $subnav=$target.find(".mbc-sub-menu-wrapper"),index=$target.index();if(Modernizr.touch&&self.$element.hasClass("open"))return void self.deactivateSubmenu(target);var naviHeight=420;$__WINDOW__.width()>1279&&(naviHeight=465),0==$subnav.find(".mbc-teaser-slider").length&&(naviHeight=60),$target.find("a.mbc-main-nav-link ").first().hasClass("mbc-item-with-children")&&(self.$topSlider.addClass("mbc-selected"),self.navigationOpen=!0,clearTimeout(self.navigationTimeout),self.$element.addClass("open"),self.$subMenu.css({"z-index":0}),self.$subMenu.eq(index).css({"z-index":10}),self.isOpen===!1?(0!==self.$pageNav.length?TweenMax.to(self.$pageNav,.4,{marginTop:naviHeight,height:0,ease:Quad.easeOut}):TweenMax.to(self.$topSlider,.4,{marginTop:naviHeight,ease:Quad.easeOut}),TweenMax.to($subnav,.4,{height:naviHeight,ease:Quad.easeOut,onComplete:function(){self.$subMenu.css({overflow:"visible"})}})):(0!==self.$pageNav.length?TweenMax.to(self.$pageNav,0,{marginTop:naviHeight,height:0,ease:Quad.easeOut}):TweenMax.to(self.$topSlider,0,{marginTop:naviHeight,ease:Quad.easeOut}),TweenMax.to($subnav,0,{height:naviHeight,ease:Quad.easeOut}),self.$subMenu.css({overflow:"visible"})),self.isOpen=!0)},this.deactivateSubmenu=function(target){var $target=$(target);self.navigationTimeout=setTimeout(function(){self.$element.removeClass("open"),TweenMax.to(self.$pageNav,.4,{marginTop:0,height:self.headerHeight,ease:Quad.easeOut}),TweenMax.to(self.$topSlider,.4,{marginTop:0,ease:Quad.easeOut}),TweenMax.to(self.$subMenu,.4,{height:0,ease:Quad.easeOut}),self.isOpen=!1,self.$subMenu.css({overflow:"hidden"}),self.$topSlider.removeClass("mbc-selected"),$target.removeClass("mbc-selected")},250),self.$subMenu.css({overflow:"hidden"}),self.$topSlider.removeClass("mbc-selected"),$target.removeClass("mbc-selected")},this.resetSubmenu=function(){self.$element.removeClass("open"),self.isOpen=!1,0!==self.$pageNav.length?TweenMax.to(self.$pageNav,.4,{marginTop:0,height:self.headerHeight,ease:Quad.easeOut}):TweenMax.to(self.$topSlider,.4,{marginTop:0,ease:Quad.easeOut}),TweenMax.to(self.$subMenu,.4,{height:0})},this.delayedDeactivation=function(target){var $target=$(target);timer=setTimeout(function(){$target.removeClass("mbc-selected")},1e3)},this.abortDeactivation=function(target){null!==timer&&clearTimeout(timer)},this.onNaviLinkClicked=function(e){var $target=$(e.currentTarget),isMobile="mobile"===wpmbcom.helper.browser.device();if($target.hasClass("mbc-item-with-children")&&isMobile&&e.preventDefault(),$target.hasClass("mbc-item-with-children"))if(Modernizr.touch&&!isMobile)self.toggleSubnavi($target.parent());else if(isMobile){var $nextLevelContent=$target.siblings(".mbc-sub-menu-wrapper").find(">.mbc-sub-menu").clone(!0,!0);$(window).trigger("show_next_navi_level",[$target.text(),$nextLevelContent])}},this.toggleSubnavi=function($li){$menu.find("li").removeClass("mbc-selected"),Modernizr.touch&&($li.addClass("mbc-selected"),self.activateSubmenu($li)),$li.hasClass("mbc-selected")?$__WINDOW__.trigger("yt.video.hide"):$__WINDOW__.trigger("yt.video.show")},this.naviHover=function(){var $naviLink=$element.find(".mbc-cars");$naviLink.find("a.mbc-main-nav-link").addClass("mbc-item-with-children");var left=$naviLink.parent(".mbc-sub-menu").position().left;$naviLink.find(".mbc-carnavigation-sub-menu-wrapper").css("left","-"+left+"px");var timer=null;$naviLink.find("a.mbc-main-nav-link").on("click",function(e){"mobile"!==wpmbcom.helper.browser.device()&&"tablet"!==wpmbcom.helper.browser.device()&&e.preventDefault()}),$naviLink.on({mouseenter:function(){var $node=$(this);Modernizr.touch||$naviLink.removeClass("mbc-item-selected"),clearTimeout(timer),Modernizr.touch||$node.addClass("mbc-item-selected")},mouseleave:function(){var $node=$(this),hasSubmenu=!!$node.find(".mbc-cars-sub-menu-wrapper").length;hasSubmenu?timer=setTimeout(function(){$node.removeClass("mbc-item-selected")},1e3):$node.removeClass("mbc-item-selected")}})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.UxCountryChooser=function(){var element,$element,options,self=this;return this.$el,this.$wrapper,this.countryData,this.$initState,this.$countryState,this.$currentState,this.$countryListContainer,this.$flyout,this.easing,this.$list,this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,this.$el=$element=this.$element,options=this.options,$(window).on("linktool_ready",$.proxy(this.onLinktoolReady,this))},this.onLinktoolReady=function(){this.initModule()},this.initModule=function(){this.$wrapper=this.$el.find(".wrapper"),this.$initState=this.$el.find(".init-state"),this.$countryState=this.$el.find(".country-state"),this.$currentState=this.$initState,this.$countryListContainer=this.$countryState.find(".mbc-countries"),this.$flyout=this.$el.find(".mbc-flyout"),this.$list=this.$countryListContainer.find(".mbc-list"),this.$el.find("a.change-country").on("click",$.proxy(this.onChangeCountryClicked,this)),this.$el.find("a.mbc-close").on("click",$.proxy(this.hide,this)),self.currentContinent="EUR",this.parseCountryJSON(),self.isIE8()?this.easing=SteppedEase.config(1):this.easing=Sine.easeOut,Modernizr.touch?(this.$el.find(".mbc-flyout-toggle").hammer().on("tap",$.proxy(this.onTouchToggle,this)),this.$el.find(".mbc-flyout-toggle").on("click",wpmbcom.helper.preventDefaultLinkEvent)):this.$el.find(".mbc-flyout-toggle").on("click",$.proxy(this.onTouchToggle,this)),$(window).on("open_country_chooser",self.onOpenCountryChooserEvent)},this.onOpenCountryChooserEvent=function(){TweenMax.delayedCall(.6,self.show)},this.isIE8=function(){return"Explorer"===wpmbcom.helper.browser.type&&wpmbcom.helper.browser.version<=8},this.getHoverClass=function(){return Modernizr.touch?"":"mbc-hover"},this.parseCountryJSON=function(){var $dropdown=this.$el.find(".mbc-continents select"),$countryList=this.$el.find(".mbc-countries select");for(var i in window.LinktoolData.global){$dropdown.append('<option value=".'+i.toLowerCase()+'">'+window.LinktoolData.global[i].name+"</option>");for(var j in window.LinktoolData.global[i].countries){var currentRegionCode;window.LinktoolData.global[i].countries[j].iso===window.LinktoolData.locale&&($countryList.find(".dropdown-content."+i.toLowerCase()).removeClass("mbc-hide"),currentRegionCode=i.toLowerCase(),this.countryData=window.LinktoolData.global[i].countries[j])}}$element.find(".mbc-dropdown-wrapper").data("plugin").initDropdown(),$dropdown.on("change",$.proxy(this.onCountryDropdownClicked,this)),$dropdown.on("change",function(){$element.find(".mbc-dropdown-list-wrapper").data("plugin").initDropdown()}),$element.find(".mbc-dropdown-wrapper").data("plugin").updateSelectedItem("."+currentRegionCode),self.$countryListContainer.find("select").on("change",function(e){self.onCountrySelected(e)}),self.$countryListContainer.find("select").val("."+window.LinktoolData.locale.toUpperCase()),self.$countryListContainer.find("select").trigger("change")},this.initCountryLink=function(){var linkName,linkObj,data;if(self.countryData){data=self.countryData,data.country&&self.$initState.find(".label-country-name").text(" "+data.country),data&&data.link&&(linkName=data.link.replace(/.*?:\/\//g,""),"/"==linkName.slice(-1)&&(linkName=linkName.substr(0,linkName.length-1)),linkObj=data.link?'<div class="link-container"><a data-analytics-linkcategory="conversion" data-analytics-linkname="emb-homepage" data-analytics-linkposition="header" href="'+data.link+'" target="_blank" class="mbc-btn mbc-external mbc-country-link '+self.getHoverClass()+'">'+linkName+"</a></div>":"");var textObj=data.contact||"";if(self.$initState.find(".mbc-container-country-info").empty(),linkObj)self.$initState.find(".mbc-container-country-info").append(linkObj);else{var emails=textObj.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]{2,8})/gi),www=textObj.match(/(w+\.[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]{2,8})/gi);if(emails)for(var i=0;i<emails.length;i++)textObj=textObj.replace(emails[i],'<a href="mailto:'+emails[i]+'" class="mbc-mail-link mbc-hover">'+emails[i]+"</a>");www&&(textObj=textObj.replace(www,'<a href="http://'+www+'" target="_blank" class="mbc-arrow-link mbc-external">'+www+"</a>")),self.$initState.find(".mbc-container-country-info").append(textObj).append("<br>"),self.$initState.find(".mbc-container-country-info").find(".country-link.basic").addClass("mbc-arrow-link mbc-external mbc-hover")}}},this.buildCountryList=function(continentName,countries){self.$countryListContainer.empty(),wpmbcom.plugins.initPlugin(self.$countryListContainer,self.$countryListContainer.data("funct"));for(var j in countries)self.$countryListContainer.find("select").append('<option value=".'+countries[j].iso+'">'+countries[j].country+"</option>"),self.$countryListContainer.find("select").addClass("mbc-select"),self.$url=countries[j].link;wpmbcom.plugins.initPlugin(self.$countryListContainer,self.$countryListContainer.data("funct")),self.$countryListContainer.find("select").on("change",function(e){self.onCountrySelected(e)})},this.onCountryDropdownClicked=function(e){var currentContinent=$(e.currentTarget).val();currentContinent=currentContinent.substr(1,currentContinent.length),currentContinent=currentContinent.toUpperCase(),self.currentContinent=currentContinent,self.buildCountryList(currentContinent,window.LinktoolData.global[currentContinent].countries),this.$el.find(".mbc-countries .mbc-list-item").addClass("mbc-hide");var countryClass=$(e.target).val();this.$el.find('.mbc-list-item[data-continent="'+countryClass+'"]').removeClass("mbc-hide"),this.$el.find(".dropdown-content:selected").removeAttr("selected"),this.$el.children("option").first().attr("selected","selected")},this.onCountrySelected=function(e){var currentCountry=$(e.currentTarget).val();currentCountry=currentCountry.substr(1,currentCountry.length),currentCountry=currentCountry.toUpperCase();for(var j in window.LinktoolData.global[self.currentContinent].countries)window.LinktoolData.global[self.currentContinent].countries[j].iso===currentCountry&&(self.countryData=window.LinktoolData.global[self.currentContinent].countries[j]);self.initCountryLink()},this.prepareCountryState=function(){},this.prepareInitState=function(){this.initCountryLink()},this.show=function(){self.$flyout.removeClass("mbc-hide"),self.$el.find(".mbc-flyout-toggle").addClass("mbc-active"),TweenMax.set(self.$flyout,{height:self.$wrapper.innerHeight()}),TweenMax.killDelayedCallsTo(self.hide),$__WINDOW__.trigger("yt.video.hide")},this.hide=function(){this.$currentState===this.$countryState&&(this.$currentState.css({display:"none"}),this.$initState.css({display:"block"}),TweenMax.set(this.$initState,{autoAlpha:1}),this.$currentState=this.$initState,this.$flyout.attr("style","")),this.$el.find(".mbc-flyout-toggle").removeClass("mbc-active"),this.$flyout.addClass("mbc-hide"),$__WINDOW__.trigger("yt.video.show")},this.onMouseLeave=function(e){TweenMax.delayedCall(CountryChooser.CLOSE_DELAY,this.hide,[],this)},this.onTouchToggle=function(e){e.preventDefault(),this.$flyout.hasClass("mbc-hide")?(this.show(),$__DOCUMENT__.on("click",self.closeElement)):(this.hide(),$__DOCUMENT__.off("click",self.closeElement))},this.closeElement=function(e){e.isTrigger||$(e.target).parent().is("a")||$(e.target).parents().is(".mbc-country-chooser")||(self.$currentState===self.$countryState&&(self.$currentState.css({display:"none"}),self.$initState.css({display:"block"}),TweenMax.set(self.$initState,{autoAlpha:1}),self.$currentState=self.$initState,self.$flyout.attr("style","")),self.$el.find(".mbc-flyout-toggle").removeClass("mbc-active"),self.$flyout.addClass("mbc-hide"),$__DOCUMENT__.off("click",self.closeElement),$__WINDOW__.trigger("yt.video.show"))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.UxMobileCarNavigation=function(){var element,$element,options,$item,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.isMobile="mobile"===wpmbcom.helper.browser.device(),self.isMobile&&($item=$element.find(".mbc-car-column").first(),self.$element.bxSlider({responsive:!0,slideWidth:$item.width(),autoHover:!1,useCSS:!0,adaptiveHeight:!1,swipeThreshold:100,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,touchEnabled:!0,slideSelector:"li.mbc-car-column",infiniteLoop:!0,oneToOneTouch:!1,pager:!1,maxSlides:2,controls:!0,hideControlOnEnd:!0,onSlideNext:function(){console.log("next")}}))},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Navigation=function(){var element,$element,options,subLevelStack,self=this,NAVI_SLIDE_DURATION=.5;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){$element.find("#mbc-navi-wrapper").css("height",""),self.$navContainer.removeClass("mbc-open mbc-close"),$element.find(".mbc-mobile-navi-header").removeClass("mbc-open"),$("html").removeClass("mbc-mobile-navi-open"),self.$innerNavContainer.find(".mbc-sub-level").remove(),self.$innerNavContainer.css({transform:""}),"mobile"===wpmbcom.helper.browser.device()&&($(".mq-desktop nav").remove(),$(".mq-desktop a").removeClass("mbc-item-with-children"))},this.setup=function(){element=this.element,$element=this.$element,options=this.options,Modernizr.touch?$element.find("#mme-mobile-navi-btn").hammer().on("tap",this.onMobileNavBtnClicked):$element.find("#mme-mobile-navi-btn").on("click",this.onMobileNavBtnClicked),self.$navContainer=$element.find("#mbc-navi-wrapper"),self.$innerNavContainer=$element.find("#mbc-navi-inner-wrapper"),subLevelStack=[];var $firstLevel=self.$innerNavContainer.find(".mbc-mobile-level.mbc-level-0");$firstLevel.data("title",$element.find(".mbc-mobile-navi-header .mbc-title").text()),subLevelStack.push($firstLevel),$(window).on("show_next_navi_level",this.showNextNaviLevel),Modernizr.touch?$element.find(".mbc-mobile-navi-header .mbc-title").hammer().on("tap",this.showPreviousNaviLevel):$element.find(".mbc-mobile-navi-header .mbc-title").on("click",this.showPreviousNaviLevel)},this.onMobileNavBtnClicked=function(e){e.preventDefault(),$("#cLayer").remove(),self.$navContainer.hasClass("mbc-open")||self.$navContainer.hasClass("mbc-close")||self.$navContainer.addClass("mbc-close");var targetHeight=$(window).height();self.$navContainer.toggleClass("mbc-open mbc-close"),$element.find(".mbc-mobile-navi-header").toggleClass("mbc-open"),$("html").toggleClass("mbc-mobile-navi-open"),self.$navContainer.scrollTop(0),self.$navContainer.hasClass("mbc-open")?(self.$navContainer.height(targetHeight-73),self.$navContainer.css({display:"block"}),self.$innerNavContainer.css({display:"block"}),$__WINDOW__.trigger("yt.video.hide"),$__WINDOW__.trigger("mbc_top_slider_navigation_open")):(self.$navContainer.height(0),self.$navContainer.css({display:"none"}),self.$innerNavContainer.css({display:"none"}),$__WINDOW__.trigger("yt.video.show"),$__WINDOW__.trigger("mbc_top_slider_navigation_close"))},this.updateNaviHeader=function(title,showBackArrow){$element.find(".mbc-mobile-navi-header .mbc-title").text(title),showBackArrow?$element.find(".mbc-mobile-navi-header .mbc-title").addClass("mbc-back-arrow"):$element.find(".mbc-mobile-navi-header .mbc-title").removeClass("mbc-back-arrow")},this.showNextNaviLevel=function(e,title,$subContent){var $nextLevel=$('<div class="mbc-mobile-level mbc-sub-level mbc-level-'+subLevelStack.length+'"></div>').appendTo(self.$innerNavContainer);$nextLevel.append($subContent),$nextLevel.data("title",title),subLevelStack.push($nextLevel),TweenMax.to(self.$navContainer,.1,{scrollTo:{y:0},onComplete:self.onScrolledToTop,onCompleteParams:[title]}),"mobile"===wpmbcom.helper.browser.device()&&(self.carNavigation(),$(".mq-desktop nav").remove(),$(".mq-desktop a").removeClass("mbc-item-with-children"))},this.carNavigation=function(){var $wrapper=$element.find(".mbc-carnavigation-sub-menu-wrapper"),$vehicles=$element.find(".mbc-carnavigation-sub-menu"),$item=$wrapper.find("li.mbc-car-column");$vehicles.bxSlider({responsive:!0,slideWidth:180,slideMargin:parseInt($item.css("margin-right").replace(/px/g,""),10),autoHover:!1,useCSS:!0,adaptiveHeight:!1,swipeThreshold:100,startSlides:2,maxSlides:2,minSlides:1,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,touchEnabled:!0,slideSelector:$item,infiniteLoop:!0,oneToOneTouch:!0,pager:!1,controls:!0,hideControlOnEnd:!0})},this.onScrolledToTop=function(title){TweenMax.killTweensOf(self.$innerNavContainer);var level=subLevelStack.length-1;TweenMax.to(self.$innerNavContainer,NAVI_SLIDE_DURATION,{x:-level*self.$innerNavContainer.innerWidth(),onComplete:self.onMoveToNextLevelComplete,onCompleteParams:[title]})},this.showPreviousNaviLevel=function(e){if(e&&e.preventDefault(),!(subLevelStack.length<=1)){TweenMax.set(self.$navContainer,{scrollTo:{y:0}}),TweenMax.killTweensOf(self.$innerNavContainer);var level=subLevelStack.length-2;TweenMax.to(self.$innerNavContainer,NAVI_SLIDE_DURATION,{x:-level*self.$innerNavContainer.innerWidth(),onComplete:self.onMoveToPreviousLevelComplete})}},this.onMoveToPreviousLevelComplete=function(){TweenMax.set(self.$navContainer,{scrollTo:{y:0}}),self.updateNaviHeader(subLevelStack[subLevelStack.length-2].data("title"),subLevelStack.length-2>=1);var $lastLevel=subLevelStack.pop();$lastLevel.remove()},this.onMoveToNextLevelComplete=function(title){TweenMax.set(self.$navContainer,{scrollTo:{y:0}}),self.updateNaviHeader(title,!0)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.LanguageLink=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.updateLink=function(country,link){var linkName=link.replace(/.*?:\/\//g,"");"/"==linkName.slice(-1)&&(linkName=linkName.substr(0,linkName.length-1)),self.$element.find(".mbc-country-link-name").text(country),self.$element.find(".mbc-country-link-href").text(linkName),self.$element.find(".mbc-country-link-href").attr("href",link)},this.loadCountryList=function(){for(var i in window.LinktoolData.global)for(var j in window.LinktoolData.global[i].countries){window.LinktoolData.global[i].countries[j].iso===window.LinktoolData.locale&&self.updateLink(window.LinktoolData.global[i].countries[j].country,window.LinktoolData.global[i].countries[j].link)}},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$(window).on("linktool_ready",self.loadCountryList)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.PageGrid=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TVWatchlistAddButton=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this._storage=Modernizr.localstorage?$.localStorage:$.cookieStorage,this._videoId=this.$element.attr("data-tv-id"),self.$element.on("click",this._toggle.bind(this)),this._markIfAdded()},this.getWatchlistData=function(){return{video:{id:this._videoId,title:this.$element.attr("data-tv-title"),description:"",duration:this.$element.attr("data-tv-duration"),published_at:this.$element.attr("data-tv-published-at"),link_url:this.$element.attr("data-tv-link-url"),thumb_url:this.$element.attr("data-tv-thumb-url")},playlist:{id:this.$element.attr("data-tv-playlist-id"),title:this.$element.attr("data-tv-playlist-title")}}},this._markIfAdded=function(){var list=this._storage.get("tv_watchlist");list instanceof Object&&list[this._videoId]&&this.$element.addClass("mbc-active")},this._toggle=function(event){event&&event.preventDefault(),this.$element.hasClass("mbc-active")?this._removeFromWatchlist():this._addToWatchlist()},this._addToWatchlist=function(){var list=this._storage.get("tv_watchlist");list instanceof Object||(list={}),list[this._videoId]=this.getWatchlistData(),this._storage.set("tv_watchlist",list),this.$element.addClass("mbc-active"),$('.mbc-tv-watchlist-add-btn[data-tv-id="'+this._videoId+'"]').addClass("mbc-active"),this.$element.trigger("change")},this._removeFromWatchlist=function(){var list=this._storage.get("tv_watchlist");delete list[this._videoId],this._storage.set("tv_watchlist",list),this.$element.removeClass("mbc-active"),$('.mbc-tv-watchlist-add-btn[data-tv-id="'+this._videoId+'"]').removeClass("mbc-active"),this.$element.trigger("change")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TVWatchlistOpenButton=function(){var element,$element,options;return this.defaults={key:"value"},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this._storage=Modernizr.localstorage?$.localStorage:$.cookieStorage,this.$header=$(".mbc-tv-header"),this.$activeItems=$(".mbc-active",this.$header),this.$mainContainer=$(".mbc-tv-main"),this.$watchlistContainer=$('<div class="mbc-teaser-slider mbc-tv-videolist mbc-tv-watchlist"></div>'),this.$watchlistContainer.css("display","none"),this.$mainContainer.last().after(this.$watchlistContainer),this.$element.on("click",this._toggle.bind(this)),this._checkHash(),$__WINDOW__.on("hashchange",this._checkHash.bind(this))},this._checkHash=function(){1!==window.location.hash.indexOf("watchlist")||this._opened||(this._open(),TweenMax.to([$__WINDOW__,$__DOCUMENT__],.8,{scrollTo:{y:0},ease:Sine.easeOut}))},this._toggle=function(){this._opened?this._close():this._open()},this._open=function(){this._opened=!0,this.$activeItems.removeClass("mbc-active"),this.$element.addClass("mbc-active"),this.$header.addClass("mbc-tv-watchlist-opened"),this.$mainContainer.css("display","none"),this.$watchlistContainer.css("display","block"),this._reset();var list=this._storage.get("tv_watchlist");list instanceof Object&&!_.isEmpty(list)&&this._addList(),this._updateVisibility(),this._addRecommendations(),window.location.hash="watchlist"},this._reset=function(){this.$watchlistContainer.empty(),this.$watchlistContainer.append('<div class="mbc-tv-subnav"><span class="mbc-tv-watchlist-count"></span></div>'),this.$watchlistContainer.append('<span class="mbc-tv-watchlist-info">'+config.translations.tv.watchlist_info_empty+"</span>"),this.$ul=$('<ul class="mbc-slider-container mbc-row mbc-row-3"></ul>'),this.$watchlistContainer.append(this.$ul),this.$watchlistContainer.addClass("empty")},this._updateVisibility=function(){var numItems=this.$ul.children().length;numItems>0?this.$watchlistContainer.removeClass("empty"):this.$watchlistContainer.addClass("empty");var label=1==numItems?config.translations.tv.video:config.translations.tv.video_plural;$(".mbc-tv-watchlist-count",this.$watchlistContainer).text(numItems+" "+label)},this._close=function(){this._opened=!1,this.$element.removeClass("mbc-active"),this.$activeItems.addClass("mbc-active"),this.$watchlistContainer.css("display","none"),this._reset(),this.$mainContainer.css("display","block"),this.$header.removeClass("mbc-tv-watchlist-opened"),window.location.hash=""},this._removeFromWatchlist=function(videoId){var list=this._storage.get("tv_watchlist");delete list[videoId],this._storage.set("tv_watchlist",list),$('.mbc-tv-watchlist-add-btn[data-tv-id="'+videoId+'"]').removeClass("mbc-active"),this._updateList(),this._updateVisibility()},this._addList=function(){var list=this._storage.get("tv_watchlist");list instanceof Object&&!_.isEmpty(list)&&($.each(list,function(videoId,item){
this._addItemToList(item)}.bind(this)),this._updateVisibility())},this._updateList=function(){var $lis=this.$ul.find("li");$lis.each(function(index,li){var $li=$(li),videoId=$("[data-tv-id]",$li).attr("data-tv-id");this._isInWatchlist(videoId)||$lis.slice(index,index+1).remove()}.bind(this));var list=this._storage.get("tv_watchlist");list instanceof Object&&!_.isEmpty(list)&&$.each(list,function(videoId,item){0==$('[data-tv-id="'+videoId+'"]',this.$ul).length&&this._addItemToList(item)}.bind(this))},this._addItemToList=function(item){var html='<li class="mbc-teaser mbc-video mbc-column mbc-column-4" [data-tv-id="'+item.video.id+'"]><a class="mbc-teaser-link mbc-hover" href="'+item.video.link_url+'" target="_self"><div class="mbc-img-holder"><div class="mbc-teaser-img" style="background-image:url(\''+item.video.thumb_url+'\');"></div><div class="mbc-teaser-over"><div class="mbc-hover mbc-white mbc-tv-icon-button mbc-tv-watchlist-add-btn mbc-active"><span class="remove"><span class="mbcom-icon mbcom-icon-trash"></span>Von Merkliste entfernen</span></div></div></div><div class="mbc-teaser-info-holder"><h3 class="mbc-teaser-head">'+item.video.title+'</h3><small class="mbc-teaser-resort">'+item.playlist.title+" | "+item.video.published_at+" | "+item.video.duration+"</small></div></a></li>",$li=$(html);$(".mbc-tv-watchlist-add-btn",$li).on("click",function(event){event.preventDefault(),this._removeFromWatchlist(item.video.id)}.bind(this)),this.$ul.append($li)},this._addRecommendations=function(){if(window.tv_overview_grid){var $grid=$("<div>"+window.tv_overview_grid+"</div>").find(".mbc-tv-overview-grid");$grid.addClass("mbc-tv-related-videos-grid"),$grid.attr("data-item-count",6),$(".mbc-text-teaser-wrapper",$grid).remove();var $lis=$grid.find("li");$lis.each(function(index,li){var $li=$(li),videoId=$("[data-tv-id]",$li).attr("data-tv-id");this._isInWatchlist(videoId)&&$lis.slice(index,index+1).remove()}.bind(this)),$lis=$grid.find("li"),$lis.length<6||($lis.slice(2).removeClass("mbc-teaser-initial"),$lis.slice(0,1).addClass("mbc-teaser-initial"),this.$watchlistContainer.append('<h4 class="mbc-tv-section-headline">'+config.translations.tv.watchlist_recommendations+"</h4>"),this.$watchlistContainer.append($grid),$grid.find("[data-funct]").each(function(index,btn){var $btn=$(btn);wpmbcom.plugins.initPlugin($btn,$btn.data("funct")),$btn.on("change",function(){this._updateList(),this._updateVisibility()}.bind(this))}.bind(this)))}},this._isInWatchlist=function(videoId){var list=this._storage.get("tv_watchlist");return list instanceof Object&&!!list[videoId]},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TVNavigation=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.$mainNav=$(".mbc-tv-mainnav",this.$element),this.$subNav=$(".mbc-tv-subnav",this.$element),this._initPassengerCarsButton(),this._initOrderDropdown(),this.$subNav.on("mbc-expanded",this._onSubNavExpanded.bind(this)),this.$subNav.on("mbc-collapsed",this._onSubNavCollapsed.bind(this))},this._initOrderDropdown=function(){function getParameterByNameFromString(string,name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(string);return null==results?"":decodeURIComponent(results[1].replace(/\+/g," "))}var defaultOrder=getParameterByNameFromString(window.location.search,"order"),$orderDropdown=$('select[name="tv_order"]',this.$element);$('option[value="'+defaultOrder+'"]',$orderDropdown).length>0&&$orderDropdown.val(defaultOrder),$orderDropdown.on("change",function(event,data){if(!data.initial){var link=document.createElement("a");link.href=window.location.href,link.search="?order="+$orderDropdown.val(),window.location.href=link.href}})},this._initPassengerCarsButton=function(){return this.$passengerCarsButton=$("a.mbc-passenger-cars",this.$element),0==this.$passengerCarsButton.length?this:(this.$passengerCarsNavigation=$(".mbc-carnavigation-sub-menu-wrapper",this.$element),this.$activeItems=$(".mbc-tv-subnav .mbc-active",this.$element),this.$mainNav.on("mouseover",this._onPCButtonOut.bind(this)),$("a",this.$subNav).on("mouseover",this._onPCButtonOut.bind(this)),this.$passengerCarsButton.on("mouseover",this._onPCButtonOver.bind(this)),self.$element.on("mouseleave",this._onPCButtonOut.bind(this)),void this.$passengerCarsButton.on("click",this._onPCButtonClick.bind(this)))},this._onPCButtonOver=function(event){this._isMobile()||this._openPassengerCarsNavigation()},this._onPCButtonOut=function(event){this._isMobile()||this._closePassengerCarsNavigation()},this._onPCButtonClick=function(event){event.preventDefault(),!this._isMobile()&&Modernizr.touch&&(this._openPassengerCarsNavigationed?this._closePassengerCarsNavigation():this._openPassengerCarsNavigation())},this._openPassengerCarsNavigation=function(){this._openPassengerCarsNavigationed=!0,this.$passengerCarsNavigation.css("display","block"),this.$passengerCarsButton.addClass("mbc-active")},this._closePassengerCarsNavigation=function(){this._openPassengerCarsNavigationed=!1,this.$passengerCarsNavigation.css("display","none"),this.$passengerCarsButton.removeClass("mbc-active"),this.$activeItems.addClass("mbc-active")},this._onSubNavExpanded=function(){this._isMobile()&&this.$passengerCarsButton&&this.$passengerCarsButton.length>0&&(this.$subNav.addClass("has-passenger-cars-menu"),this._openPassengerCarsNavigation(),this._initPassengerCarsMobile())},this._onSubNavCollapsed=function(){this._closePassengerCarsNavigation(),this._destroyPassengerCarsMobile()},this._initPassengerCarsMobile=function(){if(!this._bxSlider){var $wrapper=this.$element.find(".mbc-carnavigation-sub-menu-wrapper"),$vehicles=this.$element.find(".mbc-carnavigation-sub-menu"),$item=$wrapper.find("li.mbc-car-column");this._bxSlider=$vehicles.bxSlider({responsive:!0,slideWidth:180,slideMargin:parseInt($item.css("margin-right").replace(/px/g,""),10),autoHover:!1,useCSS:!0,adaptiveHeight:!1,swipeThreshold:100,startSlides:2,maxSlides:2,minSlides:1,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,touchEnabled:!0,slideSelector:$item,infiniteLoop:!0,oneToOneTouch:!0,pager:!1,controls:!0,hideControlOnEnd:!0})}},this._destroyPassengerCarsMobile=function(){this._bxSlider&&(this._bxSlider.destroySlider(),this._bxSlider=null)},this._isMobile=function(){return"mobile"===wpmbcom.helper.browser.device()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TVDetailVideo=function(){var element,$element,options,self=this;return this.defaults={},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){self._updateSize()},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.$background=$(".mbc-tv-video-background",this.$element),this.$wrapper=$(".mbc-tv-video-container",this.$element),this._updateSize(),this._initProgressBar(),this._initReplayButton(),this._setupVideoListeners(),$__BODY__.on("click",this._onClick.bind(this))},this._updateSize=function(){var windowWidth=$__WINDOW__.width(),isMobile=768>windowWidth;if(isMobile)return void this._resetSize();var windowHeight=$__WINDOW__.height(),requiredHeight=9*this.$element.width()/16;if(requiredHeight>windowHeight){var maxWidth=(windowHeight-40)*(16/9);this.$wrapper.css("width",maxWidth),this.$wrapper.css("height",9*maxWidth/16),this.$element.addClass("no-full-width")}else this._resetSize();this.$background.css("width",windowWidth),this.$background.css("margin-left",-Math.ceil((windowWidth-this.$element.width())/2))},this._resetSize=function(){this.$wrapper.css("width","auto"),this.$wrapper.css("height","auto"),this.$background.css("width","100%"),this.$background.css("margin-left",0),this.$element.removeClass("no-full-width")},this._initProgressBar=function(){this.$playlist=$(".mbc-tv-playlist"),this.$currentVideoTeaser=this.$playlist.find('.mbc-teaser[data-tv-id="'+this.$element.attr("data-tv-id")+'"]'),this.$progressBar=$('<div class="mbc-tv-progress-bar"></div>'),this.$currentVideoTeaser.addClass("has-controls");var isMobile="mobile"===wpmbcom.helper.browser.device();isMobile||this.$currentVideoTeaser.addClass("playing"),this.$currentVideoTeaser.on("click",this._onTeaserClick.bind(this)),$(".mbc-teaser-over",this.$currentVideoTeaser).append(this.$progressBar),this._updateProgress(0)},this._initReplayButton=function(){$(".mbc-tv-replay-btn").on("click",this._replay.bind(this))},this._setupVideoListeners=function(){var isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;this._autoplay=!isIOS;var $videoPlayer=$('div[data-funct="YoutubeAPIPlayer"]',this.$wrapper);$videoPlayer.on("mb-she-youtube-player-progress",this._onVideoProgress.bind(this)),$videoPlayer.on("mb-she-youtube-player-state-change",this._onVideoStateChange.bind(this))},this._onVideoProgress=function(event,player){var percent=player.getCurrentTime()/player.getDuration();this._updateProgress(percent)},this._onVideoStateChange=function(event,state,player){player&&(this._player=player),state==YT.PlayerState.PLAYING?(this.$element.removeClass("video-paused"),this.$element.removeClass("video-ended"),this.$currentVideoTeaser.addClass("playing"),this._stopTimeoutForNextVideo()):(state==YT.PlayerState.PAUSED||state==YT.PlayerState.ENDED)&&(this.$element.addClass("video-paused"),this.$currentVideoTeaser.removeClass("playing"),state==YT.PlayerState.ENDED&&(this.$element.addClass("video-ended"),this._startTimeoutForNextVideo()))},this._onTeaserClick=function(event){event.preventDefault(),this._player&&this.$currentVideoTeaser&&(this.$currentVideoTeaser.hasClass("playing")?this._player.pauseVideo():this._player.playVideo())},this._replay=function(event){event.preventDefault(),this._player&&(this._player.seekTo(0),this._player.playVideo())},this._updateProgress=function(percent){this.$progressBar.css("width",Math.round(63*percent)+"px")},this._startTimeoutForNextVideo=function(){this._stopTimeoutForNextVideo(),this.$nextVideoTeaser||(this.$nextVideoTeaser=$(".mbc-teaser-link",this.$element).first()),this.$timeoutProgressBar=$('<div class="mbc-tv-progress-bar"></div>'),$(".mbc-teaser-over",this.$nextVideoTeaser).append(this.$timeoutProgressBar),this._nextVideoTick=0,this._nextVideoItv=window.setInterval(function(){this._nextVideoTick++;var percent=this._nextVideoTick/100;this.$timeoutProgressBar.css("width",Math.round(63*percent)+"px"),100==this._nextVideoTick&&(wpmbcom.helper.preloader.show(),this._stopTimeoutForNextVideo(),window.location.href=this.$nextVideoTeaser.attr("href"))}.bind(this),100)},this._stopTimeoutForNextVideo=function(){this._nextVideoItv&&window.clearInterval(this._nextVideoItv),this._nextVideoItv=null,this.$timeoutProgressBar&&this.$timeoutProgressBar.remove(),this.$timeoutProgressBar=null},this._onClick=function(){this._nextVideoItv&&(this._stopTimeoutForNextVideo(),this._startTimeoutForNextVideo())},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TVSharePanel=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.$toggleButton=self.$element.find(".mbc-tv-icon-button"),this.$toggleButton.on("click",this._toggle.bind(this))},this._toggle=function(event){event.preventDefault(),this.$toggleButton.hasClass("mbc-active")?this.$toggleButton.removeClass("mbc-active"):this.$toggleButton.addClass("mbc-active")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.TVPlaylist=function(){var element,$element,options;return this.defaults={key:"value"},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.$element.on("mbc-teaser-slider-load-complete",this._onMoreLoaded.bind(this))},this._onMoreLoaded=function(){var $sliderContainer=this.$element.find(".mbc-slider-container"),loadedSlides=$sliderContainer.find(".loaded").length;if(!(4>=loadedSlides)){var $prepend=$sliderContainer.find(".mbc-tv-prepend-on-load-more");$prepend.remove(),$prepend.removeClass("mbc-tv-prepend-on-load-more"),$sliderContainer.prepend($prepend)}},this}}(this.window,this.jQuery),function(window,$){"use strict";window.YoutubeAPIPlayer=function(){var element,$element,options,self=this,isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return this.defaults={youtubeID:"kR8OkZ2KurY",theme:"light",autoplay:0,controls:1,resizeable:!0,customPlaybar:!1,showinfo:0,rel:0,modestbranding:1,loop:0,color:"white",wrapInRow:!0,autoplayInViewport:!1},this.onresizeend=function(){self.resizePlayer()},this.onresize=function(){self.resizePlayer()},this.resizePlayer=function(){self.$playerFrame&&self.$playerFrame.length>0&&self.options.resizeable&&(self.options.wrapInRow?self.$playerFrame.css({width:self.$wrapper.innerWidth(),height:self.getHeight(self.$wrapper.innerWidth())}):self.$playerFrame.css({height:self.getHeight(self.$wrapper.innerWidth())}))},this.getTime=function(){var time=self.player.getCurrentTime(),hours=Math.round(time/3600)%24,minutes=Math.round(time/60)%60,seconds=Math.round(time)%60;return 10>hours&&(hours="0"+hours),10>minutes&&(minutes="0"+minutes),10>seconds&&(seconds="0"+seconds),hours+":"+minutes+":"+seconds},this.getHeight=function(width){return Math.round(width/16*9)},this.onPlayerReady=function(){self.$playerFrame=self.$element.find(".mbc-yt-api-div"),digitalData.page.video={},digitalData.page.video.videoTitle=self.player.getVideoData().title,digitalData.page.video.videoID=self.options.youtubeID,self.options.wrapInRow||self.$playerFrame.css("width","100%"),self.options.mute&&self.player.mute(),self.options.customPlaybar&&0===self.options.controls&&self.injectPlayerControls(),self.options.autoplay&&self.siteReady&&self.player.playVideo(),self.checkViewportItv&&self.checkAutoPlayInViewport(),self.$element.trigger("mb-she-youtube-player-ready",self.player)},this.setTimerInterval=function(){self.timeInterval=setInterval(function(){self.updateTime()},500)},this.onPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.ENDED:"undefined"==typeof _satellite||"me"!==config.context&&"she"!==config.context||_satellite.track("mb_me_video_completed"),clearInterval(self.timeInterval),self.setPlayState(!1);break;case YT.PlayerState.PAUSED:clearInterval(self.timeInterval),self.setPlayState(!1);break;case YT.PlayerState.PLAYING:"undefined"==typeof _satellite||"me"!==config.context&&"she"!==config.context||_satellite.track("mb_me_video_started"),self.setTimerInterval(),self.setPlayState(!0);break;case YT.PlayerState.UNSTARTED:self.setPlayState(!1)}self.$element.trigger("mb-she-youtube-player-state-change",[e.data,self.player])},this.injectPlayerObject=function(){var playerContainer='<div class="'+(this.options.wrapInRow?"mbc-row ":"")+'mbc-yt-wrapper"><div class="mbc-yt-api-div" data-ytid="'+self.options.youtubeID+'"></div></div>';self.$element.append(playerContainer)},this.injectPlayerControls=function(){var controlsHMTL='<div class="mbc-yt-player mbc-column-11 mbc-push-1"><a href="#" class="mbc-yt-player-play mb-she-icon mb-she-icon-play mbc-column-1"></a><div class="mbc-yt-playertime mbc-column-2">'+self.getTime()+"</div></div>";self.$wrapper.append(controlsHMTL),self.$playbtn=self.$wrapper.find(".mbc-yt-player-play"),self.$time=self.$wrapper.find(".mbc-yt-playertime"),self.bindEvents()},this.updateTime=function(){self.$time&&self.$time.text(self.getTime()),self.$element.trigger("mb-she-youtube-player-progress",self.player)},this.bindEvents=function(){self.$playbtn.on("click",function(e){e.preventDefault(),$(this).hasClass("play")?(self.player.pauseVideo(),window.clearInterval(self.checkViewportItv),self.options.autoplayInViewport=!1):self.player.playVideo()})},this.setPlayState=function(state){self.$playbtn&&(state?(self.$playbtn.addClass("play"),self.$playbtn.addClass("mb-she-icon-pause"),self.$playbtn.removeClass("mb-she-icon-play")):(self.$playbtn.removeClass("play"),self.$playbtn.removeClass("mb-she-icon-pause"),self.$playbtn.addClass("mb-she-icon-play")),self.playing=state)},this.setup=function(){element=this.element,$element=this.$element,options=this.options;$element.parent().find("figcaption").text().trim();self.injectPlayerObject(),isIOS&&(self.options.autoplay=!1,self.options.autoplayInViewport=!1),"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?self.initPlayer():$__WINDOW__.on("mbc_onYouTubeAPIReady",function(){self.initPlayer()}),self.options.autoplayInViewport&&this.initAutoPlayInViewport(),$__WINDOW__.on("mbc-preload-complete",self.onSiteReady)},this.onSiteReady=function(){$__WINDOW__.off("mbc-preload-complete",self.onSiteReady),self.siteReady=!0,self.options.autoplay&&self.player&&self.player.playVideo&&self.player.playVideo()},this.initPlayer=function(){self.$wrapper=self.$element.find(".mbc-yt-wrapper"),self.player=new YT.Player(self.$element.find(".mbc-yt-api-div").get(0),{height:self.getHeight(self.$wrapper.innerWidth()),width:self.$wrapper.innerWidth(),videoId:self.options.youtubeID,playerVars:{modestbranding:self.options.modestbranding,theme:self.options.theme,rel:self.options.rel,showinfo:self.options.showinfo,controls:self.options.controls,loop:self.options.loop,color:self.options.color,wmode:"transparent"},events:{onReady:self.onPlayerReady,onStateChange:self.onPlayerStateChange}})},this.initAutoPlayInViewport=function(){$__WINDOW__.width()<768||(self.options.autoplay=!1,self.checkViewportItv=window.setInterval(self.checkAutoPlayInViewport,300))},this.checkAutoPlayInViewport=function(){if(self.isElementInViewport()){if(self.playing)return;self.player&&self.player.playVideo?self.player.playVideo():self.options.autoplay=!0}else{if(!self.playing)return;self.player&&self.player.pauseVideo?self.player.pauseVideo():self.options.autoplay=!1,self.playing=!1}},this.isElementInViewport=function(){var rect=self.element.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.LoaderAnimation=function(){var element,$element,options;return this.defaults={key:"value",videoid:""},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this.pos=0,this.step=1,this.STEPS=12},this.show=function(){this.isShowing||(this.$element.css({opacity:"1",display:"block"}),this.run(),this.isShowing=!0)},this.hide=function(){TweenMax.to(this.$element,.8,{alpha:0,ease:Sine.easeOut,onComplete:this.onHideComplete,onCompleteScope:this})},this.onHideComplete=function(){this.stop(),this.$element.css({display:"none"}),this.isShowing=!1},this.run=function(){this.step<this.STEPS?(this.pos-=50,this.step++):(this.pos=0,this.step=1),this.sPos=this.pos+"px 0px",this.$element.css({backgroundPosition:this.sPos}),TweenMax.delayedCall(.1,this.run,null,this)},this.stop=function(){TweenMax.killDelayedCallsTo(this.run)},this}}(this.window,this.jQuery),function(window,$){"use strict";window.SimpleExpandableNavigation=function(){var element,$element,options;return this.defaults={key:"value"},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$("a",this.$element).on("click",this._toggle.bind(this))},this._toggle=function(event){if(this._isMobile()){var target=event.target,$li=$(target).parent(),pagenav=$("header.mbc-tv-header.mbc-text-inverted");$li.hasClass("mbc-active")?(event.preventDefault(),this.$element.hasClass("expanded")?(this.$element.removeClass("expanded"),this.$element.trigger("mbc-collapsed"),pagenav.removeClass("expanded")):(this.$element.addClass("expanded"),this.$element.trigger("mbc-expanded"),pagenav.addClass("expanded"))):($(".mbc-active",this.$element).removeClass("mbc-active"),$li.addClass("mbc-active"),$("a",$li).addClass("mbc-active"),this.$element.removeClass("expanded"),this.$element.trigger("mbc-collapsed"))}},this._isMobile=function(){return"mobile"===wpmbcom.helper.browser.device()},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ExpandableTextBlock=function(){var element,$element,options;return this.defaults={key:"value"},this.setup=function(){element=this.element,$element=this.$element,options=this.options,this._numLinesCollapsed=options.lines||3,this.$content=this.$element.find(".mbc-expandable-content"),this.$moreBtn=this.$element.find(".mbc-expandable-text-block-toggle-btn"),this._lineHeight=parseInt(this.$content.css("line-height")),this.$content.height()>this._lineHeight*this._numLinesCollapsed?(this._collapse(),this.$moreBtn.css("display","block"),this.$moreBtn.on("click",this._toggle.bind(this))):this.$moreBtn.css("display","none")},this._toggle=function(event){event.preventDefault(),this.$element.hasClass("expanded")?this._collapse():this._expand()},this._expand=function(){this.$content.css("max-height","none"),this.$element.addClass("expanded")},this._collapse=function(){this.$content.css("max-height",this._lineHeight*this._numLinesCollapsed+"px"),this.$element.removeClass("expanded")},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ImageSequence=function(){var element,$element,options,self=this;return this.defaults={type:"png",start:0,end:0,basename:"",framerate:25,basepath:"",reapeatTime:15,scaleFactor:1},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.resetAnimation=function(){cancelAnimationFrame(self.animationframe),self.animationRunning=!1},this.render=function(){self.animationframe=requestAnimationFrame(self.render);var now=Date.now(),delta=now-self.lastRenderTime;if(delta>self.renderInterval){if(self.lastRenderTime=now-delta%self.renderInterval,!(self.currentFrame<self.imageListByFrame.length))return cancelAnimationFrame(self.animationframe),self.lastRenderedFrame=0,void(self.animationRunning=!1);var img=self.imageListByFrame[self.lastRenderedFrame],fac=self.options.scaleFactor,imgWidth=img.width/fac,imgHeight=img.height/fac;self.context.clearRect(0,0,self.canvas.width,self.canvas.height),self.context.drawImage(img,0,self.canvas.height-imgHeight,imgWidth,imgHeight),self.currentFrame++,self.lastRenderedFrame=self.currentFrame}self.animationRunning=!0},this.playSequence=function(){self.lastRenderTime=Date.now(),self.currentFrame=0,self.render()},this.renderFirstImage=function(){var img=self.imageListByFrame[self.currentFrame],fac=self.options.scaleFactor,imgWidth=img.width/fac,imgHeight=img.height/fac;self.context.clearRect(0,0,self.canvas.width,self.canvas.height),self.context.drawImage(img,0,self.canvas.height-imgHeight,imgWidth,imgHeight)},this.createImagePlaceholder=function(){for(var img,i=0;i<self.aImages.length;i++)img=new Image,img.src=self.aImages[i],self.imageListByFrame.push(img),img.onload=function(){self.imageLoadCounter++,1===self.imageLoadCounter&&(console.log("renderfirstimage"),self.renderFirstImage()),self.imageLoadCounter===self.aImages.length&&(console.log("animation ready"),self.animationReady=!0,self.isInitialVisible===!0&&self.playSequence())}},this.buildLoadingQue=function(){for(var imagerate=Math.floor(25/self.options.framerate),frame=self.options.start,path="",subcount="00",i=0;i<Math.round((self.options.end-self.options.start)/imagerate);i++)frame>=10&&(subcount="0"),frame>=100&&(subcount=""),path=config.assetpath+self.options.basepath+self.options.basename+subcount+frame+self.options.type,self.aImages.push(path),frame+=imagerate;self.createImagePlaceholder()},this.initCanvas=function(){self.canvas=self.element,self.context=self.canvas.getContext("2d")},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.aImages=[],self.imageListByFrame=[],self.currentFrame=0,self.lastRenderTime=0,self.imageLoadCounter=0,self.animationRunning=!1,self.renderInterval=1e3/self.options.framerate,self.animationReady=!1,self.isInitialVisible=!1,self.lastRenderedFrame=0,self.initCanvas(),self.buildLoadingQue(),$__WINDOW__.on("playAnimation",self.playSequence),self.$element.visible(!0)&&(self.isInitialVisible=!0,self.animationReady===!0&&self.playSequence()),$__WINDOW__.on("scroll",function(){if(self.$element.visible(!1))if(self.animationReady===!0){if(self.animationRunning===!0)return;self.playSequence()}else self.resetAnimation()})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.VideoSequence=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.playVideo=function(){self.isPlaying=!0,self.video.play()},this.pauseVideo=function(){self.isPlaying=!1,self.video.pause()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$video=self.$element.find(".mbc-img-sqc-video"),self.video=self.$video.get(0),self.isPlaying=!1,$__WINDOW__.on("scroll",function(){self.$element.visible(!1)?self.isPlaying===!1&&self.playVideo():self.isPlaying===!0&&self.pauseVideo()})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.ExplImage=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$imageWrapper=self.$element.find(".mbc-expl-image-wrapper"),self.$hotspots=self.$element.find("#mbc-expl-hotspots"),self.$trigger=self.$element.find("#mbc-expl-image-trigger"),$__WINDOW__.on("scroll",function(){self.$trigger.visible()?self.$imageWrapper.hasClass("open")||(self.$imageWrapper.addClass("open"),self.$hotspots.addClass("open")):self.$imageWrapper.hasClass("open")&&(self.$imageWrapper.removeClass("open"),self.$hotspots.removeClass("open"))})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.VideoGallery=function(){var element,$element,options,self=this;return this.defaults={key:"value",delay:5},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.updatePlayer=function(){self.player.loadVideoById({videoId:self.options.videoid,startSeconds:self.options.delay,suggestedQuality:"large"}),self.$videoWrapper.addClass("open"),TweenMax.to([$__WINDOW__,$__DOCUMENT__],.8,{scrollTo:{y:self.$videoWrapper.offset().top},ease:Sine.easeOut,delay:.5})},this.initPlayer=function(){var videoElement=self.$element.find(".mbc-yt-video-container").get(0);self.player=new YT.Player(videoElement,{playerVars:{modestbranding:1,showinfo:0,wmode:"transparent",color:"white",autoplay:0,theme:"dark",rel:0},events:{onReady:self.onPlayerReady,onStateChange:self.onVideoEvent}}),self.playerInit=!0},this.playVideo=function(){self.isPlaying=!0,self.player.playVideo()},this.pauseVideo=function(){self.isPlaying=!1,self.player.pauseVideo()},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.playerInit=!1,self.$teaser=self.$element.find(".mbc-teaser"),self.$teaserLinks=self.$teaser.find(".mbc-teaser-link"),self.$videoWrapper=self.$element.find(".mbc-video-placeholder"),"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?self.initPlayer():$__WINDOW__.on("mbc_onYouTubeAPIReady",function(){self.initPlayer()}),self.$teaserLinks.on("click",function(e){e.preventDefault(),console.log("id",$(this).data("video-id"),$(this).data("video-delay")),self.options.videoid=$(this).data("video-id"),self.options.delay=$(this).data("video-delay"),self.playerInit===!0?self.updatePlayer():self.initPlayer()})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.DropdownSupport=function(){var element,$element,options,self=this;return this.$select,this.$listWrapper,this.defaults={key:"value",initialWord:""},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$("#dropdown").change(function(){$(this).find("option").each(function(){$("#"+this.value).hide()}),$("#"+this.value).show()});for(var arr=[],i=0;i<$("#dropdown").find("option").length;i++)arr.push($("#dropdown").find("option").eq(i).val());-1!=$.inArray(config.lang,arr)&&$("#dropdown").val(config.lang).change(),0===$element.find("select").length&&$element.append("<select></select>"),$element.data("plugin",this),this.initDropdown()},this.initDropdown=function(){$element.find(":not(select,option,optgroup)").off().remove(),$element.prepend('<div class="mbc-selected-item"><a class="mbc-item-link" href="#"></a></div>'),$element.prepend('<div class="mbc-list-wrapper"><ul class="mbc-list"></ul></div>'),self.$select=$element.find("select"),self.$listWrapper=$element.find(".mbc-list-wrapper");var $list=$element.find(".mbc-list");if(self.initialSetup=!0,self.renderListElements(self.$select,$list),"auto"===options.width){$element.addClass("mbc-auto-width");var initialWidth=$list.width();$element.width(initialWidth),$list.css({"min-width":initialWidth+"px"})}$("html").on("click",self.onClickedOutside),""!=self.options.initialWord?($element.find(".mbc-selected-item .mbc-item-link").text(self.options.initialWord),self.updateSelectedItem(250,!0)):self.updateSelectedItem(self.$select.val(),!0),$element.find(".mbc-selected-item .mbc-item-link").on("click",self.onOpenDropdownClicked),$list.find(".mbc-item-link:not(.mbc-has-children)").on("click",self.onItemSelected),self.$select.off("change.dropdown").on("change.dropdown",self.onSelectChanged)},this.renderListElements=function($selectContext,$currentList){$selectContext.find(">option,>optgroup").each(function(index,el){var $el=$(el);if($el.is("optgroup")){var $liWithChildren=$('<li class="mbc-list-item mbc-has-children"><a class="mbc-item-link mbc-has-children" href="javascript:;">'+$el.attr("label")+"</a><ul></ul></li>");$currentList.append($liWithChildren),self.renderListElements($el,$liWithChildren.find("ul"))}else $currentList.append('<li class="mbc-list-item"><a class="mbc-item-link" data-value="'+$el.attr("value")+'" href="#">'+$el.text()+"</a></li>")})},this.onClickedOutside=function(e){$element.hasClass("mbc-open")&&self.toggleOpenState()},this.onOpenDropdownClicked=function(e){e.preventDefault(),e.stopPropagation(),self.toggleOpenState(),self.overflowScroll()},this.onItemSelected=function(e){e.preventDefault(),e.stopPropagation();var selectedValue=$(e.target).data("value");self.updateSelectedItem(selectedValue),self.toggleOpenState()},this.toggleOpenState=function(){$element.toggleClass("mbc-open"),$element.hasClass("mbc-open")?(self.$listWrapper.height($element.find(".mbc-list").outerHeight()),$__WINDOW__.trigger("mbc-dropdown-open")):(self.$listWrapper.height($element.height()),$__WINDOW__.trigger("mbc-dropdown-close"))},this.updateSelectedItem=function(value,initial){$element.find(".mbc-list-item").removeClass("mbc-selected"),$element.find('.mbc-list-item .mbc-item-link[data-value="'+value+'"]').parent().addClass("mbc-selected");var langText=$element.find(".mbc-list .mbc-selected .mbc-item-link").text();""!=self.options.initialWord&&self.initialSetup===!0?$element.find(".mbc-selected-item .mbc-item-link").text(self.options.initialWord):$element.find(".mbc-selected-item .mbc-item-link").text(langText),self.$select.val(value),self.$select.trigger("change",{selfTriggered:!0,initial:initial}),self.initialSetup=!1},this.onSelectChanged=function(e,options){options&&options.selfTriggered===!0||self.updateSelectedItem(self.$select.val())},this.overflowScroll=function(){var $list=$element.find(".mbc-list");$list.jScrollPane({showArrows:!1,
autoReinitialise:!0,hideFocus:!0})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.Faq=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,self.$accordioncontent=self.$element.find(".mbc-faq-content"),self.$accordionhead=self.$element.find(".mbc-faq-header"),self.$accordionhead.on("click",function(e){e.preventDefault(),$(this).next().toggleClass("mbc-active"),$(this).next().hasClass("mbc-active")?($(this).next().slideDown(500),$(this).addClass("mbc-active")):($(this).next().slideUp(500),$(this).removeClass("mbc-active"))})},this}}(this.window,this.jQuery),function(window,$){"use strict";window.CookieLayer=function(){var element,$element,options,self=this;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$(".mbc-iframe").length||"jp"===config.lang||Helper.bindSignal(document,"c:layer:show:notice",function(){self.$cLayer=$("#cLayer"),"me"===config.context?self.$cLayer.insertBefore("#mme-header"):self.$cLayer.insertBefore("#mbc-header"),self.createPageOverlay(),$("#cLayerClose").on("click",function(){self.$cLayer.addClass("close"),self.$cPageOverlay.fadeOut(),Helper.triggerSignal(document,"c:layer:hide")})})},this.createPageOverlay=function(){self.$cPageOverlay=$('<div id="cPageOverlay"></div>'),self.$cPageOverlay.css({position:"fixed",left:"0px",top:"0px",width:$(window).width(),height:$(window).height(),background:"#141414",opacity:.3,"z-index":10001}),self.$cPageOverlay.appendTo($("body")),self.$cPageOverlay.on("click",function(evt){self.$cLayer.addClass("close"),self.$cPageOverlay.fadeOut(),Helper.triggerSignal(document,"c:layer:hide")})},this},wpmbcom.plugins.nonDomPlugins.push("CookieLayer")}(this.window,this.jQuery),function(window,$){"use strict";window.ExternalLinkLightbox=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options,$("a.mbc-link-external-lightbox").on("click",function(e){e.preventDefault(),$__WINDOW__.trigger("com-open-lightbox",{href:$(this).attr("href"),type:"linkout"})})},this},wpmbcom.plugins.nonDomPlugins.push("ExternalLinkLightbox")}(this.window,this.jQuery),function(window,$){"use strict";window.AppendIframe=function(){var element,$element,options;return this.defaults={key:"value"},this.onresizestart=function(){},this.onresizeend=function(){},this.onresize=function(){},this.ondevicechange=function(){},this.setup=function(){element=this.element,$element=this.$element,options=this.options;var iframeHtml=$element.data("iframe-html"),prevSection=this.findPreviousSection(element);if(prevSection&&$(prevSection).find(".mbc-column-content-text").append(iframeHtml),$(prevSection).hasClass("mbc-content-mobile-only")){var prevSectionDesktop=this.findPreviousSection(prevSection);$(prevSectionDesktop).find(".mbc-column-content-text").append(iframeHtml)}},this.findPreviousSection=function(element){for(var e=element.previousSibling;e&&"SECTION"!=e.nodeName;)e=e.previousSibling;return e?e:null},this}}(this.window,this.jQuery);